<!DOCTYPE html>
<html lang="en">
  <head>
    
      <title>Swift æ‹¾é— - æ±‡ç¼– :: iBlog</title>
    
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="description" content="Date Notes     2020-08-10 é¦–æ¬¡æäº¤    Preface ã€ŠSwift æ‹¾é—ã€‹æ˜¯ä¸€ä¸ªå…³äº Swift çš„æ–°æ–‡ç« ä¸“è¾‘ï¼Œè¿™ä¸ªç³»åˆ—çš„æ–‡ç« å°†ä¸ä¼šæ¶‰åŠåŸºæœ¬è¯­æ³•çš„å±‚é¢ï¼Œè€Œæ˜¯å°è¯•ä»åº•å±‚ã€Œæ‹¾ã€èµ·ä¹‹å‰æ‰€å¿½è§†çš„å†…å®¹ã€‚æœ¬æ–‡æ¶‰åŠäº†å„ä¸ªéƒ¨åˆ†å…³äºæ±‡ç¼–çš„å†…å®¹ã€‚
struct &amp;amp; class struct æ ˆåŒº // main.swift struct Foo { var a: Int var b: Int } func bar() { var foo1 = Foo(a: 10, b: 11) // BREAKPOINT ğŸ”´ var foo2 = foo1 foo2.a = 20 foo2.b = 22 } bar() æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªç»“æ„ä½“ Fooï¼Œå¹¶åœ¨å‡½æ•° bar ä¸­å£°æ˜å’Œæ„é€ åèµ‹å€¼äº foo1ï¼Œä¹‹åå°† foo1 èµ‹å€¼ç»™æ–°å˜é‡ foo2ï¼›æ­¤æ—¶æ”¹å˜ foo2 ä¸­çš„å€¼ï¼Œç”±äºç»“æ„ä½“æ˜¯å€¼ç±»å‹ï¼Œå› æ­¤å¯¹äº foo2 çš„æ”¹å˜å°†ä¸ä¼šå½±å“ foo1ï¼Œæˆ‘ä»¬å°è¯•ä»æ±‡ç¼–åº•å±‚çœ‹ä¸€ä¸‹è¿™ä¸ªè¿‡ç¨‹ï¼š"/>
<meta name="keywords" content="kingcos.me,maimieng.comios,swift,objective-c,obj-c,objc,oc,geek,python,ruby,golang,go,apple,mac"/>
<meta name="robots" content="noodp"/>
<link rel="canonical" href="/posts/2020/swift_with_asm/" />





<link rel="stylesheet" href="/assets/style.css">


<link rel="stylesheet" href="/style.css">


<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/img/apple-touch-icon-144-precomposed.png">
<link rel="shortcut icon" href="/img/favicon.png">


<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Swift æ‹¾é— - æ±‡ç¼–"/>
<meta name="twitter:description" content="ã€ŠSwift æ‹¾é—ã€‹æ˜¯ä¸€ä¸ªå…³äº Swift çš„æ–°æ–‡ç« ä¸“è¾‘ï¼Œè¿™ä¸ªç³»åˆ—çš„æ–‡ç« å°†ä¸ä¼šæ¶‰åŠåŸºæœ¬è¯­æ³•çš„å±‚é¢ï¼Œè€Œæ˜¯å°è¯•ä»åº•å±‚ã€Œæ‹¾ã€èµ·ä¹‹å‰æ‰€å¿½è§†çš„å†…å®¹ã€‚æœ¬æ–‡æ¶‰åŠäº†å„ä¸ªéƒ¨åˆ†å…³äºæ±‡ç¼–çš„å†…å®¹ã€‚"/>



<meta property="og:title" content="Swift æ‹¾é— - æ±‡ç¼–" />
<meta property="og:description" content="ã€ŠSwift æ‹¾é—ã€‹æ˜¯ä¸€ä¸ªå…³äº Swift çš„æ–°æ–‡ç« ä¸“è¾‘ï¼Œè¿™ä¸ªç³»åˆ—çš„æ–‡ç« å°†ä¸ä¼šæ¶‰åŠåŸºæœ¬è¯­æ³•çš„å±‚é¢ï¼Œè€Œæ˜¯å°è¯•ä»åº•å±‚ã€Œæ‹¾ã€èµ·ä¹‹å‰æ‰€å¿½è§†çš„å†…å®¹ã€‚æœ¬æ–‡æ¶‰åŠäº†å„ä¸ªéƒ¨åˆ†å…³äºæ±‡ç¼–çš„å†…å®¹ã€‚" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/2020/swift_with_asm/" />
<meta property="article:published_time" content="2020-08-10T00:00:00+00:00" />
<meta property="article:modified_time" content="2020-08-10T00:00:00+00:00" /><meta property="og:site_name" content="iBlog" />




<script data-ad-client="ca-pub-9925978992661955" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

  </head>
  <body class="">
    <div class="container">
      <header class="header">
  <span class="header__inner">
    <a href="/" class="logo" style="text-decoration: none;">
  
    <span class="logo__mark"><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44">
  <path fill="none" d="M15 8l14.729 14.382L15 35.367"/>
</svg>
</span>
    <span class="logo__text">kingcos.me</span>
    <span class="logo__cursor"></span>
  
</a>

    <span class="header__right">
      
        <nav class="menu">
  <ul class="menu__inner menu__inner--desktop">
    
      
        
          <li><a href="/about">About</a></li>
        
      
        
          <li><a href="/links">Links</a></li>
        
      
        
          <li><a href="/perspective">Perspective</a></li>
        
      
        
          <li><a href="/words">Words</a></li>
        
      
      
    
  </ul>

  <ul class="menu__inner menu__inner--mobile">
    
      
        <li><a href="/about">About</a></li>
      
    
      
        <li><a href="/links">Links</a></li>
      
    
      
        <li><a href="/perspective">Perspective</a></li>
      
    
      
        <li><a href="/words">Words</a></li>
      
    
  </ul>
</nav>

        <span class="menu-trigger">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M0 0h24v24H0z" fill="none"/>
            <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
          </svg>
        </span>
      
      <span class="theme-toggle">
        <svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M22 41C32.4934 41 41 32.4934 41 22C41 11.5066 32.4934 3 22
  3C11.5066 3 3 11.5066 3 22C3 32.4934 11.5066 41 22 41ZM7 22C7
  13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22Z"/>
</svg>

      </span>
    </span>
  </span>
</header>


      <div class="content">
        
  <div class="post">
    <h2 class="post-title"><a href="/posts/2020/swift_with_asm/">Swift æ‹¾é— - æ±‡ç¼–</a></h2>
    <div class="post-meta">
      
        <span class="post-date">
            2020-08-10
        </span>
      
      
      
        <span class="post-read-time">â€” 15 min read</span>
      
    </div>

    
      <span class="post-tags">
        
          #<a href="/tags/swift/">Swift</a>&nbsp;
        
          #<a href="/tags/swift-%E6%8B%BE%E9%81%97/">Swift æ‹¾é—</a>&nbsp;
        
      </span>
    

    

    <div class="post-content">
      <table>
<thead>
<tr>
<th align="center">Date</th>
<th align="center">Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">2020-08-10</td>
<td align="center">é¦–æ¬¡æäº¤</td>
</tr>
</tbody>
</table>
<h2 id="preface">Preface</h2>
<p>ã€ŠSwift æ‹¾é—ã€‹æ˜¯ä¸€ä¸ªå…³äº Swift çš„æ–°æ–‡ç« ä¸“è¾‘ï¼Œè¿™ä¸ªç³»åˆ—çš„æ–‡ç« å°†ä¸ä¼šæ¶‰åŠåŸºæœ¬è¯­æ³•çš„å±‚é¢ï¼Œè€Œæ˜¯å°è¯•ä»åº•å±‚ã€Œæ‹¾ã€èµ·ä¹‹å‰æ‰€å¿½è§†çš„å†…å®¹ã€‚æœ¬æ–‡æ¶‰åŠäº†å„ä¸ªéƒ¨åˆ†å…³äºæ±‡ç¼–çš„å†…å®¹ã€‚</p>
<!-- - 16 ä¸ªå¸¸ç”¨å¯„å­˜å™¨ï¼š
  - `rax`ã€`rbx`ã€`rcx`ã€`rdx`ã€`rsi`ã€`rdi`ã€`rbp`ã€`rsp`
  - `r8`ã€`r9`ã€`r10`ã€`r11`ã€`r12`ã€`r13`ã€`r14`ã€`r15`
  - `r` å¼€å¤´çš„å¯„å­˜å™¨å‡ä¸º 64 ä½(8 å­—èŠ‚ï¼‰å¯„å­˜å™¨ï¼Œ`e` å¼€å¤´ä¸º 32 ä½ï¼Œ`ax`ã€`bx`ã€`cx` ä¸º 16 ä½ï¼Œ`ah`ã€`al` ä¸º 8 ä½ã€‚

  - ç»“æ„ä½“å’Œå¯¹è±¡ç­‰å‡å­˜å‚¨åœ¨å†…å­˜ï¼ˆéå¯„å­˜å™¨ï¼‰ -->
<h2 id="struct--class">struct &amp; class</h2>
<h3 id="struct">struct</h3>
<h4 id="æ ˆåŒº">æ ˆåŒº</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#75715e">// main.swift</span>

<span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">Foo</span> {
    <span style="color:#66d9ef">var</span> a: Int
    <span style="color:#66d9ef">var</span> b: Int
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">bar</span>() {
    <span style="color:#66d9ef">var</span> foo1 = Foo(a: <span style="color:#ae81ff">10</span>, b: <span style="color:#ae81ff">11</span>) <span style="color:#75715e">// BREAKPOINT ğŸ”´</span>
    <span style="color:#66d9ef">var</span> foo2 = foo1

    foo2.a = <span style="color:#ae81ff">20</span>
    foo2.b = <span style="color:#ae81ff">22</span>
}

bar()
</code></pre></div><p>æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªç»“æ„ä½“ <code>Foo</code>ï¼Œå¹¶åœ¨å‡½æ•° <code>bar</code> ä¸­å£°æ˜å’Œæ„é€ åèµ‹å€¼äº <code>foo1</code>ï¼Œä¹‹åå°† <code>foo1</code> èµ‹å€¼ç»™æ–°å˜é‡ <code>foo2</code>ï¼›æ­¤æ—¶æ”¹å˜ <code>foo2</code> ä¸­çš„å€¼ï¼Œç”±äºç»“æ„ä½“æ˜¯å€¼ç±»å‹ï¼Œå› æ­¤å¯¹äº <code>foo2</code> çš„æ”¹å˜å°†ä¸ä¼šå½±å“ <code>foo1</code>ï¼Œæˆ‘ä»¬å°è¯•ä»æ±‡ç¼–åº•å±‚çœ‹ä¸€ä¸‹è¿™ä¸ªè¿‡ç¨‹ï¼š</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-asm" data-lang="asm"><span style="color:#a6e22e">demo</span><span style="color:#960050;background-color:#1e0010">`</span><span style="color:#66d9ef">bar</span>():
    <span style="color:#75715e">; ...
</span><span style="color:#75715e"></span>    <span style="color:#75715e">; å‡½æ•°è°ƒç”¨å‰è¦å…ˆä¼ é€’å‚æ•°ï¼š
</span><span style="color:#75715e"></span>    <span style="color:#75715e">; å°†ç«‹å³æ•° 10 ç§»åŠ¨åˆ° edi å¯„å­˜å™¨ï¼ˆå³ rdi å¯„å­˜å™¨ä½ 32 ä½ï¼‰
</span><span style="color:#75715e"></span>    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000b73</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">19</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">movl</span>   <span style="color:#66d9ef">$0xa</span>, %edi
    <span style="color:#75715e">; å°†ç«‹å³æ•° 11 ç§»åŠ¨åˆ° esi å¯„å­˜å™¨ï¼ˆå³ rsi å¯„å­˜å™¨ä½ 32 ä½ï¼‰
</span><span style="color:#75715e"></span>    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000b78</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">24</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">movl</span>   <span style="color:#66d9ef">$0xb</span>, %esi
    <span style="color:#75715e">; æ„é€ å‡½æ•°è°ƒç”¨ï¼š
</span><span style="color:#75715e"></span><span style="color:#960050;background-color:#1e0010">-&gt;</span>  <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000b7d</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">29</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">callq</span>  <span style="color:#ae81ff">0x100000b50</span>               <span style="color:#75715e">; demo.Foo.init(a: Swift.Int, b: Swift.Int) -&gt; demo.Foo at main.swift:1
</span><span style="color:#75715e"></span>    <span style="color:#75715e">; ç»æ„é€ å‡½æ•°è°ƒç”¨åï¼Œæ­¤æ—¶ 10 ä½äº raxï¼Œ11 ä½äº rdxï¼ˆè¯¦è§ä¸‹æ–¹ init å†…æ±‡ç¼–ï¼‰
</span><span style="color:#75715e"></span>    <span style="color:#75715e">; (lldb) register read rax =&gt; rax = 0x000000000000000a
</span><span style="color:#75715e"></span>    <span style="color:#75715e">; (lldb) register read rdx =&gt; rdx = 0x000000000000000b
</span><span style="color:#75715e"></span>    <span style="color:#75715e">; ---
</span><span style="color:#75715e"></span>    <span style="color:#75715e">; (lldb) register read rbp =&gt; rbp = 0x00007ffeefbff4a0
</span><span style="color:#75715e"></span>    <span style="color:#75715e">; (lldb) po withUnsafePointer(to: &amp;foo1) { print(&#34;\($0)&#34;) } =&gt; 0x00007ffeefbff490
</span><span style="color:#75715e"></span>    <span style="color:#75715e">; å°† rax å¯„å­˜å™¨å†…å®¹ï¼ˆ10ï¼‰ç§»åŠ¨åˆ° rbp - 0x10 åœ°å€ï¼ˆ0x7FFEEFBFF490ï¼Œå³ foo1 çš„å†…å­˜åœ°å€ï¼‰
</span><span style="color:#75715e"></span>    <span style="color:#ae81ff">0x100000b82</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">34</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">movq</span>   %rax, -<span style="color:#ae81ff">0x10</span>(%rbp)
    <span style="color:#75715e">; å°† rdx å¯„å­˜å™¨å†…å®¹ï¼ˆ11ï¼‰ç§»åŠ¨åˆ° rbp - 0x8 åœ°å€ï¼ˆ0x7FFEEFBFF498ï¼‰
</span><span style="color:#75715e"></span>    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000b86</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">38</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">movq</span>   %rdx, -<span style="color:#ae81ff">0x8</span>(%rbp)
    <span style="color:#75715e">; (lldb) po withUnsafePointer(to: &amp;foo2) { print(&#34;\($0)&#34;) } =&gt; 0x00007ffeefbff480
</span><span style="color:#75715e"></span>    <span style="color:#75715e">; å°† rax å¯„å­˜å™¨å†…å®¹ï¼ˆ10ï¼‰ç§»åŠ¨åˆ° rbp - 0x20 åœ°å€ï¼ˆ0x7FFEEFBFF480ï¼Œå³ foo2 çš„å†…å­˜åœ°å€ï¼‰
</span><span style="color:#75715e"></span>    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000b8a</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">42</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">movq</span>   %rax, -<span style="color:#ae81ff">0x20</span>(%rbp)
    <span style="color:#75715e">; å°† rdx å¯„å­˜å™¨å†…å®¹ï¼ˆ11ï¼‰ç§»åŠ¨åˆ° rbp - 0x18 åœ°å€ï¼ˆ0x7FFEEFBFF488ï¼‰
</span><span style="color:#75715e"></span>    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000b8e</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">46</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">movq</span>   %rdx, -<span style="color:#ae81ff">0x18</span>(%rbp)
    <span style="color:#75715e">; å°†ç«‹å³æ•° 20 ç§»åŠ¨åˆ° rbp - 0x20 å¯„å­˜å™¨ï¼ˆfoo2.aï¼‰
</span><span style="color:#75715e"></span>    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000b92</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">50</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">movq</span>   <span style="color:#66d9ef">$0x14</span>, -<span style="color:#ae81ff">0x20</span>(%rbp)
    <span style="color:#75715e">; å°†ç«‹å³æ•° 22 ç§»åŠ¨åˆ° rbp - 0x18 å¯„å­˜å™¨ï¼ˆfoo2.bï¼‰
</span><span style="color:#75715e"></span>    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000b9a</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">58</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">movq</span>   <span style="color:#66d9ef">$0x16</span>, -<span style="color:#ae81ff">0x18</span>(%rbp)
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000ba2</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">66</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">addq</span>   <span style="color:#66d9ef">$0x20</span>, %rsp
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000ba6</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">70</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">popq</span>   %rbp
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000ba7</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">71</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">retq</span>

<span style="color:#75715e">; æ–­ç‚¹å¤„æ‰§è¡Œ LLDB å‘½ä»¤ siï¼š
</span><span style="color:#75715e"></span><span style="color:#a6e22e">demo</span><span style="color:#960050;background-color:#1e0010">`</span><span style="color:#66d9ef">Foo.init</span>(<span style="color:#66d9ef">a</span>:<span style="color:#66d9ef">b</span>:):
<span style="color:#960050;background-color:#1e0010">-&gt;</span>  <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000b50</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">0</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">pushq</span>  %rbp
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000b51</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">1</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   %rsp, %rbp
    <span style="color:#75715e">; å°†å‚æ•°æ”¾åœ¨å‡½æ•°å†…éƒ¨çš„æ ˆç©ºé—´ï¼š
</span><span style="color:#75715e"></span>    <span style="color:#75715e">; å°† rdi å¯„å­˜å™¨å†…å®¹ï¼ˆ10ï¼‰ç§»åŠ¨åˆ° rax å¯„å­˜å™¨
</span><span style="color:#75715e"></span>    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000b54</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">4</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   %rdi, %rax
    <span style="color:#75715e">; å°† rsi å¯„å­˜å™¨å†…å®¹ï¼ˆ11ï¼‰ç§»åŠ¨åˆ° rdx å¯„å­˜å™¨
</span><span style="color:#75715e"></span>    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000b57</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">7</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   %rsi, %rdx
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000b5a</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">10</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">popq</span>   %rbp
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000b5b</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">11</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">retq</span>
</code></pre></div><p>ç»¼ä¸Šï¼Œå˜é‡çš„å†…å­˜åœ°å€æ ¼å¼ä¸ºï¼š<code>-0x10(%rbp)</code> ä¸€èˆ¬æ˜¯æ ˆç©ºé—´çš„å±€éƒ¨å˜é‡ã€‚è¿™æ˜¯å› ä¸º <code>rbp</code> ä¼šæ ¹æ®æ¯æ¬¡å‡½æ•°è°ƒç”¨è€Œæœ‰ä¸ä¸€æ ·çš„å€¼ï¼Œå±€éƒ¨å˜é‡çš„å†…å­˜åœ°å€ä¹Ÿåœ¨æ¯æ¬¡è°ƒç”¨æ—¶ä¼šé‡æ–°åˆ†é…ã€‚</p>
<h4 id="å…¨å±€åŒº">å…¨å±€åŒº</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#75715e">// main.swift</span>

<span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">Foo</span> {
    <span style="color:#66d9ef">var</span> a: Int
    <span style="color:#66d9ef">var</span> b: Int
}

<span style="color:#66d9ef">var</span> foo1 = Foo(a: <span style="color:#ae81ff">10</span>, b: <span style="color:#ae81ff">11</span>) <span style="color:#75715e">// BREAKPOINT ğŸ”´</span>
<span style="color:#66d9ef">var</span> foo2 = foo1

foo2.a = <span style="color:#ae81ff">20</span>
foo2.b = <span style="color:#ae81ff">22</span>
</code></pre></div><p>å½“ <code>foo1</code> å’Œ <code>foo2</code> åœ¨å…¨å±€åŒºæ—¶åˆ™åˆæœ‰äº›ä¸ä¸€æ ·ï¼š</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-asm" data-lang="asm"><span style="color:#a6e22e">demo</span><span style="color:#960050;background-color:#1e0010">`</span><span style="color:#66d9ef">main</span>:
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000a80</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">0</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:   <span style="color:#66d9ef">pushq</span>  %rbp
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000a81</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">1</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:   <span style="color:#66d9ef">movq</span>   %rsp, %rbp
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000a84</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">4</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:   <span style="color:#66d9ef">subq</span>   <span style="color:#66d9ef">$0x60</span>, %rsp
    <span style="color:#75715e">; å‡½æ•°è°ƒç”¨å‰è¦å…ˆä¼ é€’å‚æ•°ï¼š
</span><span style="color:#75715e"></span>    <span style="color:#75715e">; å°†ç«‹å³æ•° 10 ç§»åŠ¨åˆ° eax å¯„å­˜å™¨ï¼ˆå³ rax å¯„å­˜å™¨ä½ 32 ä½ï¼‰
</span><span style="color:#75715e"></span><span style="color:#960050;background-color:#1e0010">-&gt;</span>  <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000a88</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">8</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:   <span style="color:#66d9ef">movl</span>   <span style="color:#66d9ef">$0xa</span>, %eax
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000a8d</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">13</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movl</span>   %edi, -<span style="color:#ae81ff">0x4c</span>(%rbp)
    <span style="color:#75715e">; å°† rax å¯„å­˜å™¨å†…å®¹ï¼ˆ10ï¼‰ç§»åŠ¨åˆ° rdi å¯„å­˜å™¨
</span><span style="color:#75715e"></span>    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000a90</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">16</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   %rax, %rdi
    <span style="color:#75715e">; å°†ç«‹å³æ•° 11 ç§»åŠ¨åˆ° eax å¯„å­˜å™¨ï¼ˆå³ rax å¯„å­˜å™¨ä½ 32 ä½ï¼‰
</span><span style="color:#75715e"></span>    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000a93</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">19</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movl</span>   <span style="color:#66d9ef">$0xb</span>, %eax
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000a98</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">24</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   %rsi, -<span style="color:#ae81ff">0x58</span>(%rbp)
    <span style="color:#75715e">; å°† rax å¯„å­˜å™¨å†…å®¹ï¼ˆ11ï¼‰ç§»åŠ¨åˆ° rsi å¯„å­˜å™¨
</span><span style="color:#75715e"></span>    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000a9c</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">28</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   %rax, %rsi
    <span style="color:#75715e">; æ„é€ å‡½æ•°è°ƒç”¨ï¼š
</span><span style="color:#75715e"></span>    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000a9f</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">31</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">callq</span>  <span style="color:#ae81ff">0x100000c00</span>               <span style="color:#75715e">; demo.Foo.init(a: Swift.Int, b: Swift.Int) -&gt; demo.Foo at main.swift:3
</span><span style="color:#75715e"></span>    <span style="color:#75715e">; ç»æ„é€ å‡½æ•°è°ƒç”¨åï¼Œæ­¤æ—¶ 10 ä½äº raxï¼Œ11 ä½äº rdxï¼ˆè¯¦è§ä¸‹æ–¹ init å†…æ±‡ç¼–ï¼‰
</span><span style="color:#75715e"></span>    <span style="color:#75715e">; (lldb) register read rax =&gt; rax = 0x000000000000000a
</span><span style="color:#75715e"></span>    <span style="color:#75715e">; (lldb) register read rdx =&gt; rdx = 0x000000000000000b
</span><span style="color:#75715e"></span>    <span style="color:#ae81ff">0x100000aa4</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">36</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">leaq</span>   <span style="color:#ae81ff">0x156d</span>(%rip), %rcx        <span style="color:#75715e">; demo.foo1 : demo.Foo
</span><span style="color:#75715e"></span>    <span style="color:#ae81ff">0x100000aab</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">43</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">xorl</span>   %r8d, %r8d
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000aae</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">46</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movl</span>   %r8d, %esi
    <span style="color:#75715e">; (lldb) po withUnsafePointer(to: &amp;foo1) { print(&#34;\($0)&#34;) } =&gt; 0x0000000100002018
</span><span style="color:#75715e"></span>    <span style="color:#75715e">; å°† rax å¯„å­˜å™¨å†…å®¹ï¼ˆ10ï¼‰ç§»åŠ¨åˆ° rip + 0x1560 åœ°å€ï¼ˆ0x100002018ï¼Œå³ foo1 çš„å†…å­˜åœ°å€ï¼‰
</span><span style="color:#75715e"></span>    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000ab1</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">49</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   %rax, <span style="color:#ae81ff">0x1560</span>(%rip)        <span style="color:#75715e">; demo.foo1 : demo.Foo
</span><span style="color:#75715e"></span>    <span style="color:#75715e">; å°† rdx å¯„å­˜å™¨å†…å®¹ï¼ˆ11ï¼‰ç§»åŠ¨åˆ° rip + 0x1561 åœ°å€ï¼ˆ0x100002020ï¼‰
</span><span style="color:#75715e"></span>    <span style="color:#ae81ff">0x100000ab8</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">56</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   %rdx, <span style="color:#ae81ff">0x1561</span>(%rip)        <span style="color:#75715e">; demo.foo1 : demo.Foo + 8
</span><span style="color:#75715e"></span>    <span style="color:#ae81ff">0x100000abf</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">63</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   %rcx, %rdi
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000ac2</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">66</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">leaq</span>   -<span style="color:#ae81ff">0x18</span>(%rbp), %rax
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000ac6</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">70</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   %rsi, -<span style="color:#ae81ff">0x60</span>(%rbp)
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000aca</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">74</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   %rax, %rsi
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000acd</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">77</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movl</span>   <span style="color:#66d9ef">$0x20</span>, %edx
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000ad2</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">82</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   -<span style="color:#ae81ff">0x60</span>(%rbp), %rcx
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000ad6</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">86</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">callq</span>  <span style="color:#ae81ff">0x100000e42</span>               <span style="color:#75715e">; symbol stub for: swift_beginAccess
</span><span style="color:#75715e"></span>    <span style="color:#75715e">; (lldb) po withUnsafePointer(to: &amp;foo2) { print(&#34;\($0)&#34;) } =&gt; 0x0000000100002028
</span><span style="color:#75715e"></span>    <span style="color:#75715e">; å°† rip + 0x1536 åœ°å€ï¼ˆ0x100002018ï¼Œå³ foo1ï¼‰å†…å®¹ï¼ˆ10ï¼‰ç§»åŠ¨åˆ° rax
</span><span style="color:#75715e"></span>    <span style="color:#ae81ff">0x100000adb</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">91</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   <span style="color:#ae81ff">0x1536</span>(%rip), %rax        <span style="color:#75715e">; demo.foo1 : demo.Foo
</span><span style="color:#75715e"></span>    <span style="color:#75715e">; å°† rax å¯„å­˜å™¨å†…å®¹ï¼ˆ10ï¼‰ç§»åŠ¨åˆ° rip + 0x153f åœ°å€ï¼ˆ00x100002028ï¼Œå³ foo2 çš„å†…å­˜åœ°å€ï¼‰
</span><span style="color:#75715e"></span>    <span style="color:#ae81ff">0x100000ae2</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">98</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   %rax, <span style="color:#ae81ff">0x153f</span>(%rip)        <span style="color:#75715e">; demo.foo2 : demo.Foo
</span><span style="color:#75715e"></span>    <span style="color:#75715e">; å°† rip + 0x1530 åœ°å€ï¼ˆ0x100002020ï¼‰å†…å®¹ï¼ˆ11ï¼‰ç§»åŠ¨åˆ° rax
</span><span style="color:#75715e"></span>    <span style="color:#ae81ff">0x100000ae9</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">105</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">movq</span>   <span style="color:#ae81ff">0x1530</span>(%rip), %rax        <span style="color:#75715e">; demo.foo1 : demo.Foo + 8
</span><span style="color:#75715e"></span>    <span style="color:#75715e">; å°† rax å¯„å­˜å™¨å†…å®¹ï¼ˆ11ï¼‰ç§»åŠ¨åˆ° rip + 0x1539 åœ°å€ï¼ˆ0x100002030ï¼‰
</span><span style="color:#75715e"></span>    <span style="color:#ae81ff">0x100000af0</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">112</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">movq</span>   %rax, <span style="color:#ae81ff">0x1539</span>(%rip)        <span style="color:#75715e">; demo.foo2 : demo.Foo + 8
</span><span style="color:#75715e"></span>    <span style="color:#ae81ff">0x100000af7</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">119</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">leaq</span>   -<span style="color:#ae81ff">0x18</span>(%rbp), %rdi
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000afb</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">123</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">callq</span>  <span style="color:#ae81ff">0x100000e48</span>               <span style="color:#75715e">; symbol stub for: swift_endAccess
</span><span style="color:#75715e"></span>    <span style="color:#ae81ff">0x100000b00</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">128</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">leaq</span>   <span style="color:#ae81ff">0x1521</span>(%rip), %rax        <span style="color:#75715e">; demo.foo2 : demo.Foo
</span><span style="color:#75715e"></span>    <span style="color:#ae81ff">0x100000b07</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">135</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">xorl</span>   %r8d, %r8d
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000b0a</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">138</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">movl</span>   %r8d, %ecx
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000b0d</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">141</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">movq</span>   %rax, %rdi
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000b10</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">144</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">leaq</span>   -<span style="color:#ae81ff">0x30</span>(%rbp), %rsi
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000b14</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">148</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">movl</span>   <span style="color:#66d9ef">$0x21</span>, %edx
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000b19</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">153</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">callq</span>  <span style="color:#ae81ff">0x100000e42</span>               <span style="color:#75715e">; symbol stub for: swift_beginAccess
</span><span style="color:#75715e"></span>    <span style="color:#75715e">; å°†ç«‹å³æ•° 20 ç§»åŠ¨åˆ° rip + 0x14ff å¯„å­˜å™¨ï¼ˆ0x100002028ï¼Œfoo2.aï¼‰
</span><span style="color:#75715e"></span>    <span style="color:#ae81ff">0x100000b1e</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">158</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">movq</span>   <span style="color:#66d9ef">$0x14</span>, <span style="color:#ae81ff">0x14ff</span>(%rip)       <span style="color:#75715e">; demo.foo1 : demo.Foo + 12
</span><span style="color:#75715e"></span>    <span style="color:#ae81ff">0x100000b29</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">169</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">leaq</span>   -<span style="color:#ae81ff">0x30</span>(%rbp), %rdi
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000b2d</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">173</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">callq</span>  <span style="color:#ae81ff">0x100000e48</span>               <span style="color:#75715e">; symbol stub for: swift_endAccess
</span><span style="color:#75715e"></span>    <span style="color:#ae81ff">0x100000b32</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">178</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">leaq</span>   <span style="color:#ae81ff">0x14ef</span>(%rip), %rax        <span style="color:#75715e">; demo.foo2 : demo.Foo
</span><span style="color:#75715e"></span>    <span style="color:#ae81ff">0x100000b39</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">185</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">xorl</span>   %r8d, %r8d
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000b3c</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">188</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">movl</span>   %r8d, %ecx
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000b3f</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">191</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">movq</span>   %rax, %rdi
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000b42</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">194</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">leaq</span>   -<span style="color:#ae81ff">0x48</span>(%rbp), %rsi
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000b46</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">198</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">movl</span>   <span style="color:#66d9ef">$0x21</span>, %edx
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000b4b</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">203</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">callq</span>  <span style="color:#ae81ff">0x100000e42</span>               <span style="color:#75715e">; symbol stub for: swift_beginAccess
</span><span style="color:#75715e"></span>     <span style="color:#75715e">; å°†ç«‹å³æ•° 22 ç§»åŠ¨åˆ° rip + 0x14d5 å¯„å­˜å™¨ï¼ˆ0x100002030ï¼Œfoo2.bï¼‰
</span><span style="color:#75715e"></span>    <span style="color:#ae81ff">0x100000b50</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">208</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">movq</span>   <span style="color:#66d9ef">$0x16</span>, <span style="color:#ae81ff">0x14d5</span>(%rip)       <span style="color:#75715e">; demo.foo2 : demo.Foo + 4
</span><span style="color:#75715e"></span>    <span style="color:#ae81ff">0x100000b5b</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">219</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">leaq</span>   -<span style="color:#ae81ff">0x48</span>(%rbp), %rdi
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000b5f</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">223</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">callq</span>  <span style="color:#ae81ff">0x100000e48</span>               <span style="color:#75715e">; symbol stub for: swift_endAccess
</span><span style="color:#75715e"></span>    <span style="color:#ae81ff">0x100000b64</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">228</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">xorl</span>   %eax, %eax
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000b66</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">230</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">addq</span>   <span style="color:#66d9ef">$0x60</span>, %rsp
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000b6a</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">234</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">popq</span>   %rbp
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000b6b</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">235</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">retq</span>

<span style="color:#75715e">; å°†æ–­ç‚¹åŠ åœ¨ `0x100000a9f &lt;+31&gt;: callq 0x100000c00` ä¸€è¡Œï¼Œå¹¶æ‰§è¡Œ `si`ï¼Œè¿›å…¥å‡½æ•°å†…éƒ¨ï¼›
</span><span style="color:#75715e">; å› ä¸º `init` å‡½æ•°æ˜¯ç»“æ„ä½“æœ¬èº«çš„å‡½æ•°ï¼Œä¸ç»“æ„ä½“å˜é‡æ‰€åœ¨çš„å†…å­˜åŒºåŸŸæ— å…³ï¼Œå› æ­¤è¿™éƒ¨åˆ†çš„æ±‡ç¼–ä¸ä¹‹å‰å®Œå…¨ç›¸åŒã€‚
</span><span style="color:#75715e"></span><span style="color:#a6e22e">demo</span><span style="color:#960050;background-color:#1e0010">`</span><span style="color:#66d9ef">Foo.init</span>(<span style="color:#66d9ef">a</span>:<span style="color:#66d9ef">b</span>:):
<span style="color:#960050;background-color:#1e0010">-&gt;</span>  <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000c00</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">0</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">pushq</span>  %rbp
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000c01</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">1</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   %rsp, %rbp
    <span style="color:#75715e">; å°†å‚æ•°æ”¾åœ¨å‡½æ•°å†…éƒ¨çš„æ ˆç©ºé—´ï¼š
</span><span style="color:#75715e"></span>    <span style="color:#75715e">; å°† rdi å¯„å­˜å™¨å†…å®¹ï¼ˆ10ï¼‰ç§»åŠ¨åˆ° rax å¯„å­˜å™¨
</span><span style="color:#75715e"></span>    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000c04</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">4</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   %rdi, %rax
    <span style="color:#75715e">; å°† rsi å¯„å­˜å™¨å†…å®¹ï¼ˆ11ï¼‰ç§»åŠ¨åˆ° rdx å¯„å­˜å™¨
</span><span style="color:#75715e"></span>    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000c07</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">7</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   %rsi, %rdx
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000c0a</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">10</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">popq</span>   %rbp
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000c0b</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">11</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">retq</span>
</code></pre></div><p>ä¸åˆšæ‰åœ¨å‡½æ•°ä½“å†…çš„æ ˆåŒºä¸åŒçš„æ˜¯ï¼Œå…¨å±€åŒºï¼ˆæ•°æ®æ®µï¼‰å¤§é‡ä½¿ç”¨äº† <code>rip</code> å¯„å­˜å™¨ã€‚<code>rip</code> ä½œä¸ºæŒ‡ä»¤æŒ‡é’ˆå¯„å­˜å™¨ï¼Œå­˜å‚¨ç€ CPU ä¸‹ä¸€æ¡è¦æ‰§è¡Œçš„æŒ‡ä»¤çš„åœ°å€ï¼Œä¸€æ—¦ CPU è¯»å–ä¸€æ¡æŒ‡ä»¤ï¼Œ<code>rip</code> ä¼šè‡ªåŠ¨æŒ‡å‘ä¸‹ä¸€æ¡æŒ‡ä»¤ã€‚è€Œä»£ç ä¸€æ—¦è£…è½½ï¼Œæ¯æ¡æŒ‡ä»¤çš„åœ°å€å°±ä¼šå¾—ä»¥ç¡®è®¤ï¼Œå› æ­¤é€šå¸¸ä½¿ç”¨ <code>rip</code> åŠ åç§»çš„åœ°å€æ¥å­˜æ”¾å…¨å±€å˜é‡ã€‚</p>
<h3 id="class">class</h3>
<h4 id="æ ˆåŒº-1">æ ˆåŒº</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#75715e">// main.swift</span>

<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Foo</span> {
    <span style="color:#66d9ef">var</span> a: Int
    <span style="color:#66d9ef">var</span> b: Int

    <span style="color:#66d9ef">init</span>(a: Int, b: Int) {
        <span style="color:#66d9ef">self</span>.a = a
        <span style="color:#66d9ef">self</span>.b = b
    }
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">bar</span>() {
    <span style="color:#66d9ef">var</span> foo1 = Foo(a: <span style="color:#ae81ff">10</span>, b: <span style="color:#ae81ff">11</span>)
    <span style="color:#66d9ef">var</span> foo2 = foo1 <span style="color:#75715e">// BREAKPOINT ğŸ”´</span>

    foo2.a = <span style="color:#ae81ff">20</span>
    foo2.b = <span style="color:#ae81ff">22</span>
}

bar()
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-asm" data-lang="asm"><span style="color:#a6e22e">demo</span><span style="color:#960050;background-color:#1e0010">`</span><span style="color:#66d9ef">bar</span>():
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100001cc0</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">0</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:   <span style="color:#66d9ef">pushq</span>  %rbp
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100001cc1</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">1</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:   <span style="color:#66d9ef">movq</span>   %rsp, %rbp
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100001cc4</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">4</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:   <span style="color:#66d9ef">pushq</span>  %r13
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100001cc6</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">6</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:   <span style="color:#66d9ef">subq</span>   <span style="color:#66d9ef">$0x38</span>, %rsp
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100001cca</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">10</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   <span style="color:#66d9ef">$0x0</span>, -<span style="color:#ae81ff">0x10</span>(%rbp)
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100001cd2</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">18</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   <span style="color:#66d9ef">$0x0</span>, -<span style="color:#ae81ff">0x18</span>(%rbp)
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100001cda</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">26</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">xorl</span>   %eax, %eax
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100001cdc</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">28</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movl</span>   %eax, %edi
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100001cde</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">30</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">callq</span>  <span style="color:#ae81ff">0x100001d90</span>               <span style="color:#75715e">; type metadata accessor for demo.Foo at &lt;compiler-generated&gt;
</span><span style="color:#75715e"></span>    <span style="color:#75715e">; å‡½æ•°è°ƒç”¨å‰è¦å…ˆä¼ é€’å‚æ•°ï¼š
</span><span style="color:#75715e"></span>    <span style="color:#75715e">; å°†ç«‹å³æ•° 10 ç§»åŠ¨åˆ° edi å¯„å­˜å™¨ï¼ˆå³ rdi å¯„å­˜å™¨ä½ 32 ä½ï¼‰
</span><span style="color:#75715e"></span>    <span style="color:#ae81ff">0x100001ce3</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">35</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movl</span>   <span style="color:#66d9ef">$0xa</span>, %edi
    <span style="color:#75715e">; å°†ç«‹å³æ•° 11 ç§»åŠ¨åˆ° esi å¯„å­˜å™¨ï¼ˆå³ rsi å¯„å­˜å™¨ä½ 32 ä½ï¼‰
</span><span style="color:#75715e"></span>    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100001ce8</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">40</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movl</span>   <span style="color:#66d9ef">$0xb</span>, %esi
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100001ced</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">45</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   %rax, %r13
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100001cf0</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">48</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   %rdx, -<span style="color:#ae81ff">0x20</span>(%rbp)
    <span style="color:#75715e">; æ„é€ å‡½æ•°è°ƒç”¨ï¼š
</span><span style="color:#75715e"></span>    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100001cf4</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">52</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">callq</span>  <span style="color:#ae81ff">0x100001b50</span>               <span style="color:#75715e">; demo.Foo.__allocating_init(a: Swift.Int, b: Swift.Int) -&gt; demo.Foo at main.swift:7
</span><span style="color:#75715e"></span>    <span style="color:#75715e">; rax å¯„å­˜å™¨é€šå¸¸æ”¾ç½®å‡½æ•°è¿”å›å€¼ï¼ˆè¯¦è§ä¸‹æ–‡ï¼‰ï¼Œè¿™é‡Œå³ foo1 æŒ‡é’ˆæ‰€æŒ‡å‘çš„å †ç©ºé—´å†…å­˜åœ°å€
</span><span style="color:#75715e"></span>    <span style="color:#75715e">; (lldb) register read rax =&gt; rax = 0x000000010046d080
</span><span style="color:#75715e"></span>    <span style="color:#75715e">; (lldb) x --size 8 --format x --count 4 0x000000010046d080
</span><span style="color:#75715e"></span>    <span style="color:#75715e">; 0x10046d080: 0x0000000100003150 0x0000000000000002
</span><span style="color:#75715e"></span>    <span style="color:#75715e">; 0x10046d090: 0x000000000000000a 0x000000000000000b
</span><span style="color:#75715e"></span>    <span style="color:#75715e">; æ­¤æ—¶å¯ä»¥å°è¯•è¯»å– foo1 çš„å†…å­˜åœ°å€ï¼ˆæŒ‡é’ˆæœ¬èº«çš„å†…å­˜åœ°å€ï¼Œä½äºæ ˆç©ºé—´ï¼‰
</span><span style="color:#75715e"></span>    <span style="color:#75715e">; (lldb) po withUnsafeMutablePointer(to: &amp;foo1) { print(&#34;\($0)&#34;) } =&gt; 0x00007ffeefbff510
</span><span style="color:#75715e"></span>    <span style="color:#75715e">; (lldb) po withUnsafeMutablePointer(to: &amp;foo2) { print(&#34;\($0)&#34;) } =&gt; 0x00007ffeefbff508
</span><span style="color:#75715e"></span>    <span style="color:#ae81ff">0x100001cf9</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">57</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   %rax, %rdi
    <span style="color:#75715e">; å°† rax å¯„å­˜å™¨å†…å®¹ï¼ˆ0x000000010046d080ï¼‰ç§»åŠ¨åˆ° rbp - 0x28 åœ°å€
</span><span style="color:#75715e"></span>    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100001cfc</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">60</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   %rax, -<span style="color:#ae81ff">0x28</span>(%rbp)
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100001d00</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">64</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">callq</span>  <span style="color:#ae81ff">0x100001df6</span>               <span style="color:#75715e">; symbol stub for: swift_retain
</span><span style="color:#75715e"></span>    <span style="color:#75715e">; å°† rbp - 0x28 åœ°å€å†…å®¹ï¼ˆ0x000000010046d080ï¼‰ç§»åŠ¨åˆ° rcx å¯„å­˜å™¨
</span><span style="color:#75715e"></span>    <span style="color:#ae81ff">0x100001d05</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">69</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   -<span style="color:#ae81ff">0x28</span>(%rbp), %rcx
    <span style="color:#75715e">; (lldb) register read rbp =&gt; rbp = 0x00007ffeefbff520
</span><span style="color:#75715e"></span>    <span style="color:#75715e">; å°† rcx å¯„å­˜å™¨å†…å®¹ï¼ˆ0x000000010046d080ï¼‰ç§»åŠ¨åˆ° rbp - 0x10 åœ°å€ï¼ˆ0x7FFEEFBFF510ï¼Œå³ foo1ï¼‰
</span><span style="color:#75715e"></span>    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100001d09</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">73</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   %rcx, -<span style="color:#ae81ff">0x10</span>(%rbp)
    <span style="color:#75715e">; (lldb) x --size 8 --format x --count 4 0x7FFEEFBFF510
</span><span style="color:#75715e"></span>    <span style="color:#75715e">; 0x7ffeefbff510: 0x000000010046d080 0x0000000000000000
</span><span style="color:#75715e"></span>    <span style="color:#75715e">; 0x7ffeefbff520: 0x00007ffeefbff540 0x00000001000017a4
</span><span style="color:#75715e"></span><span style="color:#960050;background-color:#1e0010">-&gt;</span>  <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100001d0d</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">77</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   %rcx, %rdi
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100001d10</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">80</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   %rax, -<span style="color:#ae81ff">0x30</span>(%rbp)
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100001d14</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">84</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">callq</span>  <span style="color:#ae81ff">0x100001df6</span>               <span style="color:#75715e">; symbol stub for: swift_retain
</span><span style="color:#75715e"></span>    <span style="color:#ae81ff">0x100001d19</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">89</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   -<span style="color:#ae81ff">0x28</span>(%rbp), %rdi
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100001d1d</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">93</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   %rax, -<span style="color:#ae81ff">0x38</span>(%rbp)
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100001d21</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">97</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">callq</span>  <span style="color:#ae81ff">0x100001df6</span>               <span style="color:#75715e">; symbol stub for: swift_retain
</span><span style="color:#75715e"></span>    <span style="color:#75715e">; å°† rbp - 0x28 åœ°å€å†…å®¹ï¼ˆ0x000000010046d080ï¼‰ç§»åŠ¨åˆ° rcx å¯„å­˜å™¨
</span><span style="color:#75715e"></span>    <span style="color:#ae81ff">0x100001d26</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">102</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">movq</span>   -<span style="color:#ae81ff">0x28</span>(%rbp), %rcx
    <span style="color:#75715e">; å°† rcx å¯„å­˜å™¨å†…å®¹ï¼ˆ0x000000010046d080ï¼‰ç§»åŠ¨åˆ° rbp - 0x18 åœ°å€ï¼ˆ0x7FFEEFBFF508ï¼Œå³ foo2ï¼‰
</span><span style="color:#75715e"></span>    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100001d2a</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">106</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">movq</span>   %rcx, -<span style="color:#ae81ff">0x18</span>(%rbp)
    <span style="color:#75715e">; (lldb) x --size 8 --format x --count 4 0x7FFEEFBFF508
</span><span style="color:#75715e"></span>    <span style="color:#75715e">; 0x7ffeefbff508: 0x000000010046d080 0x000000010046d080
</span><span style="color:#75715e"></span>    <span style="color:#75715e">; 0x7ffeefbff518: 0x0000000000000000 0x00007ffeefbff540
</span><span style="color:#75715e"></span>    <span style="color:#75715e">; å› æ­¤æ­¤æ—¶ï¼Œfoo1 å’Œ foo2 ä¸­å­˜å‚¨äº†ç›¸åŒçš„å†…å­˜åœ°å€
</span><span style="color:#75715e"></span>    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100001d2e</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">110</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">movq</span>   (%rcx), %rdx
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100001d31</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">113</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">movq</span>   <span style="color:#ae81ff">0x68</span>(%rdx), %rdx
    <span style="color:#75715e">; å°†ç«‹å³æ•° 20 ç§»åŠ¨åˆ° edi å¯„å­˜å™¨
</span><span style="color:#75715e"></span>    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100001d35</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">117</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">movl</span>   <span style="color:#66d9ef">$0x14</span>, %edi
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100001d3a</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">122</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">movq</span>   %rcx, %r13
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100001d3d</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">125</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">movq</span>   %rax, -<span style="color:#ae81ff">0x40</span>(%rbp)
    <span style="color:#75715e">; è§ä¸‹æ–‡
</span><span style="color:#75715e"></span>    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100001d41</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">129</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">callq</span>  *%rdx
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100001d43</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">131</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">movq</span>   -<span style="color:#ae81ff">0x28</span>(%rbp), %rdi
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100001d47</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">135</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">callq</span>  <span style="color:#ae81ff">0x100001df0</span>               <span style="color:#75715e">; symbol stub for: swift_release
</span><span style="color:#75715e"></span>    <span style="color:#ae81ff">0x100001d4c</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">140</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">movq</span>   -<span style="color:#ae81ff">0x28</span>(%rbp), %rax
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100001d50</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">144</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">movq</span>   (%rax), %rcx
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100001d53</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">147</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">movq</span>   <span style="color:#ae81ff">0x80</span>(%rcx), %rcx
    <span style="color:#75715e">; å°†ç«‹å³æ•° 22 ç§»åŠ¨åˆ° edi å¯„å­˜å™¨ï¼ˆåŒç†ï¼‰
</span><span style="color:#75715e"></span>    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100001d5a</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">154</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">movl</span>   <span style="color:#66d9ef">$0x16</span>, %edi
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100001d5f</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">159</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">movq</span>   %rax, %r13
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100001d62</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">162</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">callq</span>  *%rcx
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100001d64</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">164</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">movq</span>   -<span style="color:#ae81ff">0x28</span>(%rbp), %rdi
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100001d68</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">168</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">callq</span>  <span style="color:#ae81ff">0x100001df0</span>               <span style="color:#75715e">; symbol stub for: swift_release
</span><span style="color:#75715e"></span>    <span style="color:#ae81ff">0x100001d6d</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">173</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">movq</span>   -<span style="color:#ae81ff">0x18</span>(%rbp), %rdi
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100001d71</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">177</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">callq</span>  <span style="color:#ae81ff">0x100001df0</span>               <span style="color:#75715e">; symbol stub for: swift_release
</span><span style="color:#75715e"></span>    <span style="color:#ae81ff">0x100001d76</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">182</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">movq</span>   -<span style="color:#ae81ff">0x10</span>(%rbp), %rdi
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100001d7a</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">186</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">callq</span>  <span style="color:#ae81ff">0x100001df0</span>               <span style="color:#75715e">; symbol stub for: swift_release
</span><span style="color:#75715e"></span>    <span style="color:#ae81ff">0x100001d7f</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">191</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">addq</span>   <span style="color:#66d9ef">$0x38</span>, %rsp
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100001d83</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">195</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">popq</span>   %r13
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100001d85</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">197</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">popq</span>   %rbp
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100001d86</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">198</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">retq</span>

<span style="color:#75715e">; å°†æ–­ç‚¹åŠ åœ¨ `0x100000a9f &lt;+31&gt;: callq 0x100000c00` ä¸€è¡Œï¼Œå¹¶æ‰§è¡Œ `si`ï¼Œè¿›å…¥å‡½æ•°å†…éƒ¨ï¼š
</span><span style="color:#75715e"></span><span style="color:#a6e22e">demo</span><span style="color:#960050;background-color:#1e0010">`</span><span style="color:#66d9ef">Foo.__allocating_init</span>(<span style="color:#66d9ef">a</span>:<span style="color:#66d9ef">b</span>:):
<span style="color:#960050;background-color:#1e0010">-&gt;</span>  <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100001b50</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">0</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">pushq</span>  %rbp
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100001b51</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">1</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   %rsp, %rbp
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100001b54</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">4</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">pushq</span>  %r13
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100001b56</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">6</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">subq</span>   <span style="color:#66d9ef">$0x18</span>, %rsp
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100001b5a</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">10</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">movl</span>   <span style="color:#66d9ef">$0x20</span>, %eax
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100001b5f</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">15</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">movl</span>   <span style="color:#66d9ef">$0x7</span>, %edx
    <span style="color:#75715e">; (lldb) register read rdi =&gt; rdi = 0x000000000000000a
</span><span style="color:#75715e"></span>    <span style="color:#75715e">; (lldb) register read rsi =&gt; rsi = 0x000000000000000b
</span><span style="color:#75715e"></span>    <span style="color:#75715e">; (lldb) register read rbp =&gt; rbp = 0x00007ffeefbff4d0
</span><span style="color:#75715e"></span>    <span style="color:#75715e">; å°† rdi å¯„å­˜å™¨å†…å®¹ï¼ˆ10ï¼‰ç§»åŠ¨åˆ° rbp - 0x10 åœ°å€ï¼ˆ0x7FFEEFBFF4C0ï¼‰
</span><span style="color:#75715e"></span>    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100001b64</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">20</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">movq</span>   %rdi, -<span style="color:#ae81ff">0x10</span>(%rbp)
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100001b68</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">24</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">movq</span>   %r13, %rdi
    <span style="color:#75715e">; å°† rsi å¯„å­˜å™¨å†…å®¹ï¼ˆ11ï¼‰ç§»åŠ¨åˆ° rbp - 0x18 åœ°å€ï¼ˆ0x7FFEEFBFF4B8ï¼‰
</span><span style="color:#75715e"></span>    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100001b6b</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">27</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">movq</span>   %rsi, -<span style="color:#ae81ff">0x18</span>(%rbp)
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100001b6f</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">31</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">movq</span>   %rax, %rsi
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100001b72</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">34</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">callq</span>  <span style="color:#ae81ff">0x100001dd2</span>               <span style="color:#75715e">; symbol stub for: swift_allocObject
</span><span style="color:#75715e"></span>    <span style="color:#75715e">; å°† rbp - 0x10 åœ°å€å†…å®¹ï¼ˆ10ï¼‰ç§»åŠ¨åˆ° rdi
</span><span style="color:#75715e"></span>    <span style="color:#ae81ff">0x100001b77</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">39</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">movq</span>   -<span style="color:#ae81ff">0x10</span>(%rbp), %rdi
    <span style="color:#75715e">; å°† rbp - 0x18 åœ°å€å†…å®¹ï¼ˆ11ï¼‰ç§»åŠ¨åˆ° rsi
</span><span style="color:#75715e"></span>    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100001b7b</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">43</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">movq</span>   -<span style="color:#ae81ff">0x18</span>(%rbp), %rsi
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100001b7f</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">47</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">movq</span>   %rax, %r13
    <span style="color:#75715e">; æ„é€ å‡½æ•°è°ƒç”¨ï¼š
</span><span style="color:#75715e"></span>    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100001b82</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">50</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">callq</span>  <span style="color:#ae81ff">0x100001b90</span>               <span style="color:#75715e">; demo.Foo.init(a: Swift.Int, b: Swift.Int) -&gt; demo.Foo at main.swift:7
</span><span style="color:#75715e"></span>    <span style="color:#ae81ff">0x100001b87</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">55</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">addq</span>   <span style="color:#66d9ef">$0x18</span>, %rsp
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100001b8b</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">59</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">popq</span>   %r13
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100001b8d</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">61</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">popq</span>   %rbp
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100001b8e</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">62</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">retq</span>

<span style="color:#75715e">; å°†æ–­ç‚¹åŠ åœ¨ `0x100001b82 &lt;+50&gt;: callq  0x100001b90` ä¸€è¡Œï¼Œå¹¶æ‰§è¡Œ `si`ï¼Œè¿›å…¥å‡½æ•°å†…éƒ¨ï¼š
</span><span style="color:#75715e"></span><span style="color:#a6e22e">demo</span><span style="color:#960050;background-color:#1e0010">`</span><span style="color:#66d9ef">Foo.init</span>(<span style="color:#66d9ef">a</span>:<span style="color:#66d9ef">b</span>:):
<span style="color:#960050;background-color:#1e0010">-&gt;</span>  <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100001b90</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">0</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:   <span style="color:#66d9ef">pushq</span>  %rbp
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100001b91</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">1</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:   <span style="color:#66d9ef">movq</span>   %rsp, %rbp
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100001b94</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">4</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:   <span style="color:#66d9ef">subq</span>   <span style="color:#66d9ef">$0x80</span>, %rsp
    <span style="color:#75715e">; æ¸…é›¶ï¼š
</span><span style="color:#75715e"></span>    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100001b9b</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">11</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   <span style="color:#66d9ef">$0x0</span>, -<span style="color:#ae81ff">0x8</span>(%rbp)
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100001ba3</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">19</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   <span style="color:#66d9ef">$0x0</span>, -<span style="color:#ae81ff">0x10</span>(%rbp)
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100001bab</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">27</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   <span style="color:#66d9ef">$0x0</span>, -<span style="color:#ae81ff">0x18</span>(%rbp)
    <span style="color:#75715e">; å‚æ•°å±€éƒ¨å˜é‡åŒ–ï¼š
</span><span style="color:#75715e"></span>    <span style="color:#75715e">; ç¬¬ä¸€ä¸ªå‚æ•° 10 ä» rdi è½¬ç§»åˆ° rbp - 0x8 åœ°å€
</span><span style="color:#75715e"></span>    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100001bb3</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">35</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   %rdi, -<span style="color:#ae81ff">0x8</span>(%rbp)
    <span style="color:#75715e">; ç¬¬äºŒä¸ªå‚æ•° 11 ä» rsi è½¬ç§»åˆ° rbp - 0x10 åœ°å€
</span><span style="color:#75715e"></span>    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100001bb7</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">39</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   %rsi, -<span style="color:#ae81ff">0x10</span>(%rbp)
    <span style="color:#75715e">; ...
</span><span style="color:#75715e"></span>
<span style="color:#75715e">; å°†æ–­ç‚¹åŠ åœ¨ `0x100001d41 &lt;+129&gt;: callq  *%rdx` ä¸€è¡Œï¼Œå¹¶æ‰§è¡Œ `si`ï¼Œè¿›å…¥å‡½æ•°å†…éƒ¨ï¼š
</span><span style="color:#75715e"></span><span style="color:#a6e22e">demo</span><span style="color:#960050;background-color:#1e0010">`</span><span style="color:#66d9ef">Foo.a.setter</span>:
<span style="color:#960050;background-color:#1e0010">-&gt;</span>  <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x1000018d0</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">0</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">pushq</span>  %rbp
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x1000018d1</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">1</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   %rsp, %rbp
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x1000018d4</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">4</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">subq</span>   <span style="color:#66d9ef">$0x40</span>, %rsp
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x1000018d8</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">8</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   %r13, %rax
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x1000018db</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">11</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">addq</span>   <span style="color:#66d9ef">$0x10</span>, %rax
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x1000018df</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">15</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">xorl</span>   %ecx, %ecx
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x1000018e1</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">17</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">leaq</span>   -<span style="color:#ae81ff">0x18</span>(%rbp), %rdx
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x1000018e5</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">21</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">movl</span>   <span style="color:#66d9ef">$0x21</span>, %esi
    <span style="color:#75715e">; (lldb) register read rdi =&gt; rdi = 0x0000000000000014
</span><span style="color:#75715e"></span>    <span style="color:#75715e">; (lldb) register read rbp =&gt; rbp = 0x00007ffeefbff4d0
</span><span style="color:#75715e"></span>    <span style="color:#75715e">; å°† rdi å¯„å­˜å™¨å†…å®¹ï¼ˆ14ï¼‰ç§»åŠ¨åˆ° rbp - 0x20 åœ°å€
</span><span style="color:#75715e"></span>    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x1000018ea</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">26</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">movq</span>   %rdi, -<span style="color:#ae81ff">0x20</span>(%rbp)
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x1000018ee</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">30</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">movq</span>   %rax, %rdi
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x1000018f1</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">33</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">movq</span>   %rsi, -<span style="color:#ae81ff">0x28</span>(%rbp)
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x1000018f5</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">37</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">movq</span>   %rdx, %rsi
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x1000018f8</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">40</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">movq</span>   -<span style="color:#ae81ff">0x28</span>(%rbp), %rax
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x1000018fc</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">44</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">movq</span>   %rdx, -<span style="color:#ae81ff">0x30</span>(%rbp)
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100001900</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">48</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">movq</span>   %rax, %rdx
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100001903</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">51</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">movq</span>   %r13, -<span style="color:#ae81ff">0x38</span>(%rbp)
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100001907</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">55</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">callq</span>  <span style="color:#ae81ff">0x100001dd8</span>               <span style="color:#75715e">; symbol stub for: swift_beginAccess
</span><span style="color:#75715e"></span>    <span style="color:#75715e">; å°† rbp - 0x38 åœ°å€ï¼ˆ0x7FFEEFBFF498ï¼‰å†…å®¹ï¼ˆ0x000000010046d080ï¼Œfoo1 å’Œ foo2 æŒ‡å‘çš„å†…å­˜ç©ºé—´åœ°å€ï¼‰ç§»åŠ¨åˆ° rax å¯„å­˜å™¨
</span><span style="color:#75715e"></span>    <span style="color:#ae81ff">0x10000190c</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">60</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">movq</span>   -<span style="color:#ae81ff">0x38</span>(%rbp), %rax
    <span style="color:#75715e">; å°† rbp - 0x20 åœ°å€å†…å®¹ï¼ˆ14ï¼‰ç§»åŠ¨åˆ° rcx å¯„å­˜å™¨
</span><span style="color:#75715e"></span>    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100001910</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">64</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">movq</span>   -<span style="color:#ae81ff">0x20</span>(%rbp), %rcx
    <span style="color:#75715e">; å°† rcx å¯„å­˜å™¨å†…å®¹ï¼ˆ14ï¼‰ç§»åŠ¨åˆ° rax + 0x10ï¼ˆ0x10046D090ï¼‰
</span><span style="color:#75715e"></span>    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100001914</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">68</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">movq</span>   %rcx, <span style="color:#ae81ff">0x10</span>(%rax)
    <span style="color:#75715e">; (lldb) x --size 8 --format x --count 4 0x000000010046d080
</span><span style="color:#75715e"></span>    <span style="color:#75715e">; 0x10046d080: 0x0000000100003150 0x0000000600000002
</span><span style="color:#75715e"></span>    <span style="color:#75715e">; 0x10046d090: 0x0000000000000014 0x000000000000000b
</span><span style="color:#75715e"></span>    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100001918</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">72</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">movq</span>   -<span style="color:#ae81ff">0x30</span>(%rbp), %rdi
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x10000191c</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">76</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">callq</span>  <span style="color:#ae81ff">0x100001de4</span>               <span style="color:#75715e">; symbol stub for: swift_endAccess
</span><span style="color:#75715e"></span>    <span style="color:#ae81ff">0x100001921</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">81</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">addq</span>   <span style="color:#66d9ef">$0x40</span>, %rsp
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100001925</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">85</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">popq</span>   %rbp
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100001926</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">86</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">retq</span>
</code></pre></div><p>å½“å¯¹è±¡åˆå§‹åŒ–åå°†é€šè¿‡ <code>rax</code> è¿”å›ç»™æŒ‡é’ˆå˜é‡ï¼Œå†é€šè¿‡ <code>rax</code> åç§»å»æ”¹å˜å †ç©ºé—´ä¸­çš„å€¼ï¼Œå› æ­¤å†…å­˜åœ°å€æ ¼å¼ä¸ºï¼š<code>0x10(%rax)</code> çš„å˜é‡ä¸€èˆ¬æ˜¯å †ç©ºé—´ã€‚</p>
<h2 id="å‡½æ•°">å‡½æ•°</h2>
<h3 id="å‡½æ•°å‚æ•°">å‡½æ•°å‚æ•°</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#75715e">// main.swift</span>

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">baz</span>(<span style="color:#66d9ef">_</span> a: Int, <span style="color:#66d9ef">_</span> b: Int, <span style="color:#66d9ef">_</span> c: Int, <span style="color:#66d9ef">_</span> d: Int, <span style="color:#66d9ef">_</span> e: Int,
         <span style="color:#66d9ef">_</span> f: Int, <span style="color:#66d9ef">_</span> g: Int, <span style="color:#66d9ef">_</span> h: Int, <span style="color:#66d9ef">_</span> i: Int, <span style="color:#66d9ef">_</span> j: Int) {

}

baz(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">6</span>, <span style="color:#ae81ff">7</span>, <span style="color:#ae81ff">8</span>, <span style="color:#ae81ff">9</span>, <span style="color:#ae81ff">10</span>) <span style="color:#75715e">// BREAKPOINT ğŸ”´</span>
</code></pre></div><p>å®šä¹‰ä¸€ä¸ªéœ€è¦ 10 ä¸ªå‚æ•°çš„å‡½æ•°ï¼Œæˆ‘ä»¬å°è¯•ä»æ±‡ç¼–åº•å±‚çœ‹ä¸€ä¸‹è¿™ä¸ªè¿‡ç¨‹ï¼š</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-asm" data-lang="asm"><span style="color:#a6e22e">demo</span><span style="color:#960050;background-color:#1e0010">`</span><span style="color:#66d9ef">main</span>:
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000ea0</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">0</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:   <span style="color:#66d9ef">pushq</span>  %rbp
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000ea1</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">1</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:   <span style="color:#66d9ef">movq</span>   %rsp, %rbp
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000ea4</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">4</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:   <span style="color:#66d9ef">subq</span>   <span style="color:#66d9ef">$0x30</span>, %rsp
    <span style="color:#75715e">; ç¬¬ä¸€ä¸ªå‚æ•°å…ˆæ”¾åœ¨ eaxï¼ˆrax çš„ä½ 32 ä½ï¼‰
</span><span style="color:#75715e"></span><span style="color:#960050;background-color:#1e0010">-&gt;</span>  <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000ea8</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">8</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:   <span style="color:#66d9ef">movl</span>   <span style="color:#66d9ef">$0x1</span>, %eax
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000ead</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">13</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movl</span>   %edi, -<span style="color:#ae81ff">0x4</span>(%rbp)
    <span style="color:#75715e">; ç¬¬ä¸€ä¸ªå‚æ•°ä» rax è½¬ç§»åˆ° rdi
</span><span style="color:#75715e"></span>    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000eb0</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">16</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   %rax, %rdi
    <span style="color:#75715e">; ç¬¬äºŒä¸ªå‚æ•°å…ˆæ”¾åœ¨ eaxï¼ˆrax çš„ä½ 32 ä½ï¼‰
</span><span style="color:#75715e"></span>    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000eb3</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">19</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movl</span>   <span style="color:#66d9ef">$0x2</span>, %eax
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000eb8</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">24</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   %rsi, -<span style="color:#ae81ff">0x10</span>(%rbp)
    <span style="color:#75715e">; ç¬¬äºŒä¸ªå‚æ•°ä» rax è½¬ç§»åˆ° rsi
</span><span style="color:#75715e"></span>    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000ebc</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">28</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   %rax, %rsi
    <span style="color:#75715e">; ç¬¬ä¸‰ä¸ªå‚æ•°æ”¾åœ¨ edxï¼ˆrdx çš„ä½ 32 ä½ï¼‰
</span><span style="color:#75715e"></span>    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000ebf</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">31</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movl</span>   <span style="color:#66d9ef">$0x3</span>, %edx
    <span style="color:#75715e">; ç¬¬å››ä¸ªå‚æ•°æ”¾åœ¨ ecxï¼ˆrcx çš„ä½ 32 ä½ï¼‰
</span><span style="color:#75715e"></span>    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000ec4</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">36</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movl</span>   <span style="color:#66d9ef">$0x4</span>, %ecx
    <span style="color:#75715e">; ç¬¬äº”ä¸ªå‚æ•°æ”¾åœ¨ r8dï¼ˆr8 çš„ä½ 32 ä½ï¼‰
</span><span style="color:#75715e"></span>    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000ec9</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">41</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movl</span>   <span style="color:#66d9ef">$0x5</span>, %r8d
    <span style="color:#75715e">; ç¬¬å…­ä¸ªå‚æ•°æ”¾åœ¨ r9dï¼ˆr9 çš„ä½ 32 ä½ï¼‰
</span><span style="color:#75715e"></span>    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000ecf</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">47</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movl</span>   <span style="color:#66d9ef">$0x6</span>, %r9d
    <span style="color:#75715e">; ç¬¬ä¸ƒä¸ªå‚æ•°æ”¾åœ¨ rspï¼ˆ(lldb) register read rsp =&gt; rsp = 0x00007ffeefbff510ï¼‰
</span><span style="color:#75715e"></span>    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000ed5</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">53</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   <span style="color:#66d9ef">$0x7</span>, (%rsp)
    <span style="color:#75715e">; ç¬¬å…«ä¸ªå‚æ•°æ”¾åœ¨ rsp + 0x8 åœ°å€ï¼ˆ0x7FFEEFBFF518ï¼‰
</span><span style="color:#75715e"></span>    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000edd</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">61</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   <span style="color:#66d9ef">$0x8</span>, <span style="color:#ae81ff">0x8</span>(%rsp)
    <span style="color:#75715e">; ç¬¬ä¹ä¸ªå‚æ•°æ”¾åœ¨ rsp + 0x10 åœ°å€ï¼ˆ0x7FFEEFBFF520ï¼‰
</span><span style="color:#75715e"></span>    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000ee6</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">70</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   <span style="color:#66d9ef">$0x9</span>, <span style="color:#ae81ff">0x10</span>(%rsp)
    <span style="color:#75715e">; ç¬¬åä¸ªå‚æ•°æ”¾åœ¨ rsp + 0x18 åœ°å€ï¼ˆ0x7FFEEFBFF528ï¼‰
</span><span style="color:#75715e"></span>    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000eef</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">79</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   <span style="color:#66d9ef">$0xa</span>, <span style="color:#ae81ff">0x18</span>(%rsp)
    <span style="color:#75715e">; å‡½æ•°è°ƒç”¨
</span><span style="color:#75715e"></span>    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000ef8</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">88</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">callq</span>  <span style="color:#ae81ff">0x100000f10</span>               <span style="color:#75715e">; demo.baz(Swift.Int, Swift.Int, Swift.Int, Swift.Int, Swift.Int, Swift.Int, Swift.Int, Swift.Int, Swift.Int, Swift.Int) -&gt; () at main.swift:1
</span><span style="color:#75715e"></span>    <span style="color:#ae81ff">0x100000efd</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">93</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">xorl</span>   %eax, %eax
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000eff</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">95</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">addq</span>   <span style="color:#66d9ef">$0x30</span>, %rsp
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000f03</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">99</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">popq</span>   %rbp
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000f04</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">100</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">retq</span>
</code></pre></div><p>ç”±ä¸Šæˆ‘ä»¬å¯ä»¥å¾—å‡ºï¼š<code>rdi</code>ï¼ˆ<code>edi</code>ï¼‰ã€<code>rsi</code>ï¼ˆ<code>esi</code>ï¼‰ã€<code>rdx</code>ï¼ˆ<code>edx</code>ï¼‰ã€<code>rcx</code>ï¼ˆ<code>ecx</code>ï¼‰ã€<code>r8</code>ï¼ˆ<code>r8d</code>ï¼‰ã€<code>r9</code>ï¼ˆ<code>r9d</code>ï¼‰å¯„å­˜å™¨å°†ä¾æ¬¡å­˜æ”¾å‡½æ•°å‚æ•°ï¼Œå½“ä»¥ä¸Šå¯„å­˜å™¨ä¸ªæ•°ä»ä¸æ»¡è¶³å‡½æ•°å‚æ•°ä¸ªæ•°æ—¶ï¼Œå°†ä» <code>rsp</code> å¼€å§‹æ”¾ç½®å‡½æ•°å‚ï¼ˆå…¶å® <code>rsp</code> æ˜¯å‡½æ•°æ ˆç©ºé—´çš„æ ˆåº•ï¼Œè¯¦è§ä¸‹æ–‡ï¼‰ã€‚å°†æ–­ç‚¹åŠ åœ¨ <code>0x100000ef8 &lt;+88&gt;: callq 0x100000f10</code> ä¸€è¡Œï¼Œå¹¶æ‰§è¡Œ <code>si</code>ï¼Œè¿›å…¥å‡½æ•°å†…éƒ¨ï¼š</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-asm" data-lang="asm"><span style="color:#a6e22e">demo</span><span style="color:#960050;background-color:#1e0010">`</span><span style="color:#66d9ef">baz</span>(<span style="color:#66d9ef">_</span>:<span style="color:#66d9ef">_</span>:<span style="color:#66d9ef">_</span>:<span style="color:#66d9ef">_</span>:<span style="color:#66d9ef">_</span>:<span style="color:#66d9ef">_</span>:<span style="color:#66d9ef">_</span>:<span style="color:#66d9ef">_</span>:<span style="color:#66d9ef">_</span>:<span style="color:#66d9ef">_</span>:):
    <span style="color:#75715e">; è°ƒç”¨å¸§å…¥æ ˆ
</span><span style="color:#75715e"></span><span style="color:#960050;background-color:#1e0010">-&gt;</span>  <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000f10</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">0</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:   <span style="color:#66d9ef">pushq</span>  %rbp
    <span style="color:#75715e">; åˆ‡æ¢æ ˆå¸§åˆ°å½“å‰æ ˆå¸§
</span><span style="color:#75715e"></span>    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000f11</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">1</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:   <span style="color:#66d9ef">movq</span>   %rsp, %rbp
    <span style="color:#75715e">; (lldb) register read rbp =&gt; rbp = 0x00007ffeefbff500
</span><span style="color:#75715e"></span>    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000f14</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">4</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:   <span style="color:#66d9ef">pushq</span>  %rbx
    <span style="color:#75715e">; (lldb) register read rsp =&gt; rsp = 0x00007ffeefbff4f8
</span><span style="color:#75715e"></span>    <span style="color:#75715e">; rbp + 0x28ï¼ˆ0x7FFEEFBFF528ï¼Œå³ç¬¬åä¸ªå‚æ•° 10ï¼‰è½¬ç§»åˆ° rax
</span><span style="color:#75715e"></span>    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000f15</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">5</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:   <span style="color:#66d9ef">movq</span>   <span style="color:#ae81ff">0x28</span>(%rbp), %rax
    <span style="color:#75715e">; rbp + 0x20ï¼ˆ0x7FFEEFBFF520ï¼Œå³ç¬¬ä¹ä¸ªå‚æ•° 9ï¼‰è½¬ç§»åˆ° r10
</span><span style="color:#75715e"></span>    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000f19</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">9</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:   <span style="color:#66d9ef">movq</span>   <span style="color:#ae81ff">0x20</span>(%rbp), %r10
    <span style="color:#75715e">; rbp + 0x18ï¼ˆ0x7FFEEFBFF518ï¼Œå³ç¬¬å…«ä¸ªå‚æ•° 8ï¼‰è½¬ç§»åˆ° r11
</span><span style="color:#75715e"></span>    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000f1d</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">13</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   <span style="color:#ae81ff">0x18</span>(%rbp), %r11
    <span style="color:#75715e">; rbp + 0x10ï¼ˆ0x7FFEEFBFF510ï¼Œå³ç¬¬ä¸ƒä¸ªå‚æ•° 7ï¼‰è½¬ç§»åˆ° rbx
</span><span style="color:#75715e"></span>    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000f21</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">17</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   <span style="color:#ae81ff">0x10</span>(%rbp), %rbx
    <span style="color:#75715e">; æ¸…é›¶ï¼š
</span><span style="color:#75715e"></span>    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000f25</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">21</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   <span style="color:#66d9ef">$0x0</span>, -<span style="color:#ae81ff">0x10</span>(%rbp)
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000f2d</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">29</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   <span style="color:#66d9ef">$0x0</span>, -<span style="color:#ae81ff">0x18</span>(%rbp)
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000f35</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">37</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   <span style="color:#66d9ef">$0x0</span>, -<span style="color:#ae81ff">0x20</span>(%rbp)
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000f3d</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">45</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   <span style="color:#66d9ef">$0x0</span>, -<span style="color:#ae81ff">0x28</span>(%rbp)
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000f45</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">53</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   <span style="color:#66d9ef">$0x0</span>, -<span style="color:#ae81ff">0x30</span>(%rbp)
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000f4d</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">61</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   <span style="color:#66d9ef">$0x0</span>, -<span style="color:#ae81ff">0x38</span>(%rbp)
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000f55</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">69</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   <span style="color:#66d9ef">$0x0</span>, -<span style="color:#ae81ff">0x40</span>(%rbp)
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000f5d</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">77</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   <span style="color:#66d9ef">$0x0</span>, -<span style="color:#ae81ff">0x48</span>(%rbp)
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000f65</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">85</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   <span style="color:#66d9ef">$0x0</span>, -<span style="color:#ae81ff">0x50</span>(%rbp)
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000f6d</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">93</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   <span style="color:#66d9ef">$0x0</span>, -<span style="color:#ae81ff">0x58</span>(%rbp)
    <span style="color:#75715e">; å‚æ•°å±€éƒ¨å˜é‡åŒ–ï¼š
</span><span style="color:#75715e"></span>    <span style="color:#75715e">; ç¬¬ä¸€ä¸ªå‚æ•°ä» rdi è½¬ç§»åˆ° rbp - 0x10 åœ°å€ï¼ˆ0x7FFEEFBFF4F0ï¼Œé«˜åœ°å€ï¼‰
</span><span style="color:#75715e"></span>    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000f75</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">101</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">movq</span>   %rdi, -<span style="color:#ae81ff">0x10</span>(%rbp)
    <span style="color:#75715e">; ç¬¬äºŒä¸ªå‚æ•°ä» rsi è½¬ç§»åˆ° rbp - 0x18 åœ°å€ï¼ˆ0x7FFEEFBFF4E8ï¼‰
</span><span style="color:#75715e"></span>    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000f79</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">105</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">movq</span>   %rsi, -<span style="color:#ae81ff">0x18</span>(%rbp)
    <span style="color:#75715e">; ç¬¬ä¸‰ä¸ªå‚æ•°ä» rdx è½¬ç§»åˆ° rbp - 0x20 åœ°å€ï¼ˆ0x7FFEEFBFF4E0ï¼‰
</span><span style="color:#75715e"></span>    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000f7d</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">109</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">movq</span>   %rdx, -<span style="color:#ae81ff">0x20</span>(%rbp)
    <span style="color:#75715e">; ç¬¬å››ä¸ªå‚æ•°ä» rcx è½¬ç§»åˆ° rbp - 0x28 åœ°å€ï¼ˆ0x7FFEEFBFF4D8ï¼‰
</span><span style="color:#75715e"></span>    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000f81</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">113</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">movq</span>   %rcx, -<span style="color:#ae81ff">0x28</span>(%rbp)
    <span style="color:#75715e">; ç¬¬äº”ä¸ªå‚æ•°ä» r8 è½¬ç§»åˆ° rbp - 0x30 åœ°å€ï¼ˆ0x7FFEEFBFF4D0ï¼‰
</span><span style="color:#75715e"></span>    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000f85</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">117</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">movq</span>   %r8, -<span style="color:#ae81ff">0x30</span>(%rbp)
    <span style="color:#75715e">; ç¬¬å…­ä¸ªå‚æ•°ä» r9 è½¬ç§»åˆ° rbp - 0x38 åœ°å€ï¼ˆ0x7FFEEFBFF4C8ï¼‰
</span><span style="color:#75715e"></span>    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000f89</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">121</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">movq</span>   %r9, -<span style="color:#ae81ff">0x38</span>(%rbp)
    <span style="color:#75715e">; ç¬¬ä¸ƒä¸ªå‚æ•°ä» rbx è½¬ç§»åˆ° rbp - 0x40 åœ°å€ï¼ˆ0x7FFEEFBFF4C0ï¼‰
</span><span style="color:#75715e"></span>    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000f8d</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">125</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">movq</span>   %rbx, -<span style="color:#ae81ff">0x40</span>(%rbp)
    <span style="color:#75715e">; ç¬¬å…«ä¸ªå‚æ•°ä» r11 è½¬ç§»åˆ° rbp - 0x48 åœ°å€ï¼ˆ0x7FFEEFBFF4B8ï¼‰
</span><span style="color:#75715e"></span>    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000f91</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">129</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">movq</span>   %r11, -<span style="color:#ae81ff">0x48</span>(%rbp)
    <span style="color:#75715e">; ç¬¬ä¹ä¸ªå‚æ•°ä» r10 è½¬ç§»åˆ° rbp - 0x50 åœ°å€ï¼ˆ0x7FFEEFBFF4B0ï¼‰
</span><span style="color:#75715e"></span>    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000f95</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">133</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">movq</span>   %r10, -<span style="color:#ae81ff">0x50</span>(%rbp)
    <span style="color:#75715e">; ç¬¬åä¸ªå‚æ•°ä» rax è½¬ç§»åˆ° rbp - 0x58 åœ°å€ï¼ˆ0x7FFEEFBFF4A8ï¼Œä½åœ°å€ï¼‰
</span><span style="color:#75715e"></span>    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000f99</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">137</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">movq</span>   %rax, -<span style="color:#ae81ff">0x58</span>(%rbp)
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000f9d</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">141</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">popq</span>   %rbx
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000f9e</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">142</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">popq</span>   %rbp
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000f9f</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">143</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">retq</span>
</code></pre></div><p><code>rbp</code>ï¼ˆ<code>(lldb) register read rbp =&gt; rbp = 0x00007ffeefbff500</code>ï¼Œé«˜åœ°å€ï¼Œæ ˆåº•ï¼‰ä¸ <code>rsp</code>ï¼ˆ<code>(lldb) register read rsp =&gt; rsp = 0x00007ffeefbff4f8</code>ï¼Œä½åœ°å€ï¼Œæ ˆé¡¶ï¼‰å¯„å­˜å™¨ä¹‹é—´ä¸ºå‡½æ•°çš„æ ˆç©ºé—´ï¼Œå³æ ˆå¸§ã€‚å‡½æ•°å‚æ•°å±€éƒ¨å˜é‡åŒ–æ—¶ï¼Œå°†ä¾æ¬¡ä»é«˜åœ°å€æ’åˆ—è‡³ä½åœ°å€ï¼Œå³å…¥æ ˆã€‚</p>
<h3 id="å‡½æ•°è¿”å›å€¼">å‡½æ•°è¿”å›å€¼</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#75715e">// main.swift</span>

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">baz</span>() -&gt; Int {
    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">10</span>
}

<span style="color:#66d9ef">_</span> = baz()
</code></pre></div><p>å®šä¹‰ä¸€ä¸ªéœ€è¦è¿”å›å€¼çš„å‡½æ•°ï¼Œæˆ‘ä»¬å°è¯•ä»æ±‡ç¼–åº•å±‚çœ‹ä¸€ä¸‹è¿™ä¸ªè¿‡ç¨‹ï¼š</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-asm" data-lang="asm"><span style="color:#a6e22e">demo</span><span style="color:#960050;background-color:#1e0010">`</span><span style="color:#66d9ef">baz</span>():
<span style="color:#960050;background-color:#1e0010">-&gt;</span>  <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000fa0</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">0</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">pushq</span>  %rbp
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000fa1</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">1</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   %rsp, %rbp
    <span style="color:#75715e">; å°†ç«‹å³æ•° 10 ç§»åŠ¨åˆ° eax å¯„å­˜å™¨ï¼ˆå³ rax å¯„å­˜å™¨ä½ 32 ä½ï¼‰
</span><span style="color:#75715e"></span>    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000fa4</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">4</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movl</span>   <span style="color:#66d9ef">$0xa</span>, %eax
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000fa9</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">9</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">popq</span>   %rbp
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000faa</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">10</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">retq</span>
</code></pre></div><p>æ­¤æ—¶è¿”å›å€¼å°†ç§»åŠ¨åˆ° <code>rax</code> å¯„å­˜å™¨ä¾›å‡½æ•°å¤–éƒ¨ä½¿ç”¨ã€‚é€šå¸¸æ¥è¯´ï¼Œä¸€ä¸ªå‡½æ•°åªæœ‰ä¸€ä¸ªè¿”å›å€¼ï¼Œä½† Swift ä¸­æ”¯æŒå…ƒç»„ç±»å‹ï¼Œå¯ä»¥å°†å¤šä¸ªå…ƒç´ åŒæ—¶è¿”å›ï¼Œé‚£ä¹ˆæ­¤æ—¶è¿”å›å€¼å­˜åœ¨å“ªé‡Œå‘¢ï¼Ÿ</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#75715e">// main.swift</span>

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">baz</span>() -&gt; (Int, Int, Int, Int, Int) {
    <span style="color:#66d9ef">return</span> (<span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">11</span>, <span style="color:#ae81ff">12</span>, <span style="color:#ae81ff">13</span>, <span style="color:#ae81ff">14</span>)
}

<span style="color:#66d9ef">var</span> t = baz()
<span style="color:#66d9ef">var</span> a = t.<span style="color:#ae81ff">0</span>
<span style="color:#66d9ef">var</span> b = t.<span style="color:#ae81ff">1</span>
<span style="color:#66d9ef">var</span> c = t.<span style="color:#ae81ff">2</span>
<span style="color:#66d9ef">var</span> d = t.<span style="color:#ae81ff">3</span>
<span style="color:#66d9ef">var</span> e = t.<span style="color:#ae81ff">4</span>
</code></pre></div><p>è½¬æ¢ä¸ºæ±‡ç¼–ä»£ç ï¼š</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-asm" data-lang="asm"><span style="color:#a6e22e">demo</span><span style="color:#960050;background-color:#1e0010">`</span><span style="color:#66d9ef">baz</span>():
<span style="color:#960050;background-color:#1e0010">-&gt;</span>  <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000f50</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">0</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">pushq</span>  %rbp
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000f51</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">1</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   %rsp, %rbp
    <span style="color:#75715e">; è¿”å›å€¼å…ƒç»„ç¬¬ä¸€ä¸ªå…ƒç´ æ”¾åœ¨ rax
</span><span style="color:#75715e"></span>    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000f54</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">4</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   <span style="color:#66d9ef">$0xa</span>, (%rax)
    <span style="color:#75715e">; è¿”å›å€¼å…ƒç»„ç¬¬äºŒä¸ªå…ƒç´ æ”¾åœ¨ rax + 0x8
</span><span style="color:#75715e"></span>    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000f5b</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">11</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">movq</span>   <span style="color:#66d9ef">$0xb</span>, <span style="color:#ae81ff">0x8</span>(%rax)
    <span style="color:#75715e">; è¿”å›å€¼å…ƒç»„ç¬¬ä¸‰ä¸ªå…ƒç´ æ”¾åœ¨ rax + 0x10
</span><span style="color:#75715e"></span>    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000f63</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">19</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">movq</span>   <span style="color:#66d9ef">$0xc</span>, <span style="color:#ae81ff">0x10</span>(%rax)
    <span style="color:#75715e">; è¿”å›å€¼å…ƒç»„ç¬¬å››ä¸ªå…ƒç´ æ”¾åœ¨ rax + 0x18
</span><span style="color:#75715e"></span>    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000f6b</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">27</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">movq</span>   <span style="color:#66d9ef">$0xd</span>, <span style="color:#ae81ff">0x18</span>(%rax)
    <span style="color:#75715e">; è¿”å›å€¼å…ƒç»„ç¬¬äº”ä¸ªå…ƒç´ æ”¾åœ¨ rax + 0x20
</span><span style="color:#75715e"></span>    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000f73</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">35</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">movq</span>   <span style="color:#66d9ef">$0xe</span>, <span style="color:#ae81ff">0x20</span>(%rax)
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000f7b</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">43</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">popq</span>   %rbp
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000f7c</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">44</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">retq</span>

<span style="color:#a6e22e">demo</span><span style="color:#960050;background-color:#1e0010">`</span><span style="color:#66d9ef">main</span>:
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000dd0</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">0</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:   <span style="color:#66d9ef">pushq</span>  %rbp
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000dd1</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">1</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:   <span style="color:#66d9ef">movq</span>   %rsp, %rbp
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000dd4</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">4</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:   <span style="color:#66d9ef">subq</span>   <span style="color:#66d9ef">$0xb0</span>, %rsp
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000ddb</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">11</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">leaq</span>   -<span style="color:#ae81ff">0x28</span>(%rbp), %rax
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000ddf</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">15</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movl</span>   %edi, -<span style="color:#ae81ff">0xa4</span>(%rbp)
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000de5</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">21</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   %rsi, -<span style="color:#ae81ff">0xb0</span>(%rbp)
<span style="color:#960050;background-color:#1e0010">-&gt;</span>  <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000dec</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">28</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">callq</span>  <span style="color:#ae81ff">0x100000f50</span>               <span style="color:#75715e">; demo.baz() -&gt; (Swift.Int, Swift.Int, Swift.Int, Swift.Int, Swift.Int) at main.swift:3
</span><span style="color:#75715e"></span>    <span style="color:#75715e">; (lldb) register read rax =&gt; rax = 0x00007ffeefbff518
</span><span style="color:#75715e"></span>    <span style="color:#75715e">; (lldb) x --size 8 --format x --count 6 0x00007ffeefbff518
</span><span style="color:#75715e"></span>    <span style="color:#75715e">; 0x7ffeefbff518: 0x000000000000000a 0x000000000000000b
</span><span style="color:#75715e"></span>    <span style="color:#75715e">; 0x7ffeefbff528: 0x000000000000000c 0x000000000000000d
</span><span style="color:#75715e"></span>    <span style="color:#75715e">; 0x7ffeefbff538: 0x000000000000000e 0x00007ffeefbff550
</span><span style="color:#75715e"></span>    <span style="color:#ae81ff">0x100000df1</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">33</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">leaq</span>   <span style="color:#ae81ff">0x1220</span>(%rip), %rax        <span style="color:#75715e">; demo.t : (Swift.Int, Swift.Int, Swift.Int, Swift.Int, Swift.Int)
</span><span style="color:#75715e"></span>    <span style="color:#ae81ff">0x100000df8</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">40</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">xorl</span>   %ecx, %ecx
    <span style="color:#75715e">; (lldb) register read rbp =&gt; rbp = 0x00007ffeefbff540
</span><span style="color:#75715e"></span>    <span style="color:#75715e">; å°† rbp - 0x28 åœ°å€ï¼ˆ0x7FFEEFBFF518ï¼‰å†…å®¹ï¼ˆ10ï¼‰ç§»åŠ¨åˆ° rdx
</span><span style="color:#75715e"></span>    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000dfa</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">42</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   -<span style="color:#ae81ff">0x28</span>(%rbp), %rdx
    <span style="color:#75715e">; å°† rbp - 0x20 åœ°å€ï¼ˆ0x7FFEEFBFF518ï¼‰å†…å®¹ï¼ˆ11ï¼‰ç§»åŠ¨åˆ° rsi
</span><span style="color:#75715e"></span>    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000dfe</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">46</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   -<span style="color:#ae81ff">0x20</span>(%rbp), %rsi
    <span style="color:#75715e">; å°† rbp - 0x18 åœ°å€ï¼ˆ0x7FFEEFBFF518ï¼‰å†…å®¹ï¼ˆ12ï¼‰ç§»åŠ¨åˆ° r8
</span><span style="color:#75715e"></span>    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000e02</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">50</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   -<span style="color:#ae81ff">0x18</span>(%rbp), %r8
    <span style="color:#75715e">; å°† rbp - 0x10 åœ°å€ï¼ˆ0x7FFEEFBFF518ï¼‰å†…å®¹ï¼ˆ13ï¼‰ç§»åŠ¨åˆ° r9
</span><span style="color:#75715e"></span>    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000e06</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">54</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   -<span style="color:#ae81ff">0x10</span>(%rbp), %r9
    <span style="color:#75715e">; å°† rbp - 0x8 åœ°å€ï¼ˆ0x7FFEEFBFF518ï¼‰å†…å®¹ï¼ˆ14ï¼‰ç§»åŠ¨åˆ° r10
</span><span style="color:#75715e"></span>    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000e0a</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">58</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   -<span style="color:#ae81ff">0x8</span>(%rbp), %r10
    <span style="color:#75715e">; ...
</span></code></pre></div><p>æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œå½“å…ƒç»„ä½œä¸ºè¿”å›å€¼æ—¶ï¼Œå°†ä» <code>rax</code> å¼€å§‹åç§»ä¾æ¬¡å­˜æ”¾ã€‚</p>
<!--

- å¯„å­˜å™¨ï¼š
  - 16 ä¸ªå¸¸ç”¨å¯„å­˜å™¨ï¼š
    - `rax`ã€`rbx`ã€`rcx`ã€`rdx`ã€`rsi`ã€`rdi`ã€`rbp`ã€`rsp`
    - `r8`ã€`r9`ã€`r10`ã€`r11`ã€`r12`ã€`r13`ã€`r14`ã€`r15`
    - `r` å¼€å¤´çš„å¯„å­˜å™¨å‡ä¸º 64 ä½(8 å­—èŠ‚ï¼‰å¯„å­˜å™¨ï¼Œ`e` å¼€å¤´ä¸º 32 ä½ï¼Œ`ax`ã€`bx`ã€`cx` ä¸º 16 ä½ï¼Œ`ah`ã€`al` ä¸º 8 ä½ã€‚
  - ç”¨é€”
    - `rax`ã€`rdx` å¸¸ä½œä¸ºå‡½æ•°è¿”å›å€¼ä½¿ç”¨
  - ç»“æ„ä½“å’Œå¯¹è±¡ç­‰å‡å­˜å‚¨åœ¨å†…å­˜ï¼ˆéå¯„å­˜å™¨ï¼‰



## æ±‡ç¼–è¯­è¨€

- æ±‡ç¼–è¯­è¨€åˆ†ç±»ï¼š
  - 8086 æ±‡ç¼–ï¼ˆ16 ä½ï¼ˆBitï¼‰ï¼Œå³æ¯ä¸ªå¯„å­˜å™¨çš„å¤§å°ä¸º 16 ä½ï¼Œ2 å­—èŠ‚ï¼‰
  - x86 æ±‡ç¼–ï¼ˆ32 ä½ï¼‰
  - x64 æ±‡ç¼–ï¼ˆ64 ä½ï¼‰
  - ARM æ±‡ç¼–ç­‰
- AT&T æ±‡ç¼–ç”¨äº iOS æ¨¡æ‹Ÿå™¨ï¼ŒARM æ±‡ç¼–ç”¨äº iOS çœŸæœº

|    é¡¹ç›®     |                                AT&T                                 |                           Intel                           |                                                                                                                   è¯´æ˜                                                                                                                   |
| :---------: | :-----------------------------------------------------------------: | :-------------------------------------------------------: | :--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------: |
| å¯„å­˜å™¨å‘½å  |                               `%rax`                                |                           `rax`                           |                                                                                                                    -                                                                                                                     |
| æ“ä½œæ•°é¡ºåº  |                          `movq %rax, %rdx`                          |                      `mov rdx, rax`                       |                                                                                                        å°† `rax` çš„å€¼èµ‹å€¼ç»™ `rdx`                                                                                                         |
| å¸¸æ•°/ç«‹å³æ•° |                `movq $3, %rax`<br>`movq $0x10, %rax`                |              `mov rax, 3`<br>`mov rax, 0x10`              |                                                                                                å°† `3` èµ‹å€¼ç»™ `rax` å°† `0x10` èµ‹å€¼ç»™ `rax`                                                                                                |
|  å†…å­˜èµ‹å€¼   |                      `movq $0xa, 0x1ff7(%rip)`                      |             `mov qword ptr [rip+0x1ff7], 0xa`             |                                                                                            å°† `0xa` èµ‹å€¼ç»™åœ°å€ä¸º `rip` + `0x1ff7` çš„å†…å­˜ç©ºé—´                                                                                             |
| å–å†…å­˜åœ°å€  |                      `leaq -0x18(%rbp), %rax`                       |                  `lea rax, [rbp â€“ 0x18]`                  |                                                                                                  å°† `rbp â€“ 0x18` è¿™ä¸ªåœ°å€å€¼èµ‹å€¼ç»™ `rax`                                                                                                  |
| `jmp` æŒ‡ä»¤  | `jmp *%rdx`<br>`jmp 0x4001002`<br>`jmp *(%rax)`ï¼ˆ`*` ä»£è¡¨é—´æ¥è·³è½¬ï¼‰ |        `jmp rdx`<br>`jmp 0x4001002`<br>`jmp [rax]`        |                                                                                  `call` å’Œ `jmp` å†™æ³•ç±»ä¼¼ï¼ˆ`call` åé€šå¸¸ä¸ºå‡½æ•°åœ°å€ï¼Œå¯é…åˆ `ret` ä½¿ç”¨ï¼‰                                                                                  |
| æ“ä½œæ•°é•¿åº¦  |   `movl %eax, %edx`<br>`movb $0x10, %al`<br>`leaw 0x10(%dx), %ax`   | `mov edx, eax`<br>`mov al, 0x10`<br>`lea ax, [dx + 0x10]` | **b** = byte (8-bit)<br>**s** = short (16-bit integer or 32-bit floating point)<br>**w** = word (16-bit)<br>**l** = long (32-bit integer or 64-bit floating point)<br>**q** = quad (64 bit)<br>**t** = ten bytes (80-bit floating point) |

- `movq -0x18(%rbp), %rax` & `leaq -0x18(%rbp), %rax` çš„åŒºåˆ«ï¼š
  - å‰è€…ä¸ºå°† `%rbp - 0x18` å¾—åˆ°çš„åœ°å€å¯¹åº”å­˜å‚¨ç©ºé—´çš„æ•°æ®ï¼Œå­˜å‚¨åˆ° `rax` å¯„å­˜å™¨ï¼›
  - åè€…ä¸ºå°† `%rbp - 0x18` å¾—åˆ°çš„åœ°å€ï¼Œå­˜å‚¨åˆ° `rax` å¯„å­˜å™¨ã€‚
- `call 0x10`ï¼šè·³è½¬è‡³ `0x10` å‡½æ•°åœ°å€å¤„ï¼›
- `call *%rax`ï¼šè·³è½¬è‡³ `rax` å¯„å­˜å™¨å­˜å‚¨çš„å‡½æ•°åœ°å€å¤„ã€‚

## LLDB

|            æ“ä½œ            |                                            æŒ‡ä»¤                                             |
| :------------------------: | :-----------------------------------------------------------------------------------------: |
|       åˆ—å‡ºæ‰€æœ‰å¯„å­˜å™¨       |                                       `register read`                                       |
|       è¯»å–å¯„å­˜å™¨çš„å€¼       |                  `register read/æ ¼å¼ å¯„å­˜å™¨åç§°`<br>`register read/x rax`                   |
|       ä¿®æ”¹å¯„å­˜å™¨çš„å€¼       |                 `register write å¯„å­˜å™¨åç§° æ•°å€¼`<br>`register write rax 0`                  |
|       è¯»å–å†…å­˜ä¸­çš„å€¼       |                    `x/æ•°é‡-æ ¼å¼-å­—èŠ‚å¤§å° å†…å­˜åœ°å€`<br>`x/3xw 0x0000010`                     |
|       ä¿®æ”¹å†…å­˜ä¸­çš„å€¼       |                 `memory write å†…å­˜åœ°å€ æ•°å€¼`<br>`memory write 0x0000010 10`                 |
|            æ ¼å¼            |                          `x` æ˜¯åå…­è¿›åˆ¶ï¼Œ`f` æ˜¯æµ®ç‚¹ï¼Œ`d` æ˜¯åè¿›åˆ¶                           |
|          å­—èŠ‚å¤§å°          | `b` â€“ byte 1 å­—èŠ‚<br>`h` â€“ half word 2 å­—èŠ‚<br>`w` â€“ word 4 å­—èŠ‚<br>`g` â€“ giant word 8 å­—èŠ‚ |
|     expression è¡¨è¾¾å¼      |           å¯ä»¥ç®€å†™ä¸ºï¼š`expr è¡¨è¾¾å¼`<br>`expression $rax`<br>`expression $rax = 1`           |
| `po` è¡¨è¾¾å¼ `print` è¡¨è¾¾å¼ |                                `po/x $rax`<br>`po (int)$rax`                                |

```swift
func foo() {
    let a = 10
    let b = a + 1

    print(b) // BREAKPOINT âš ï¸
}

foo()

// LLDB:
//    (lldb) register read // è¯»å–æ‰€æœ‰å¯„å­˜å™¨
//    General Purpose Registers:
//           rax = 0x000000010313e1d0
//           rbx = 0x000000010313e1d0
//           rcx = 0x0000000000000000
//           rdx = 0x0000000000000004
//           rdi = 0x00000000000003e3
//           rsi = 0x000000010045d080
//           rbp = 0x00007ffeefbff4c0
//           rsp = 0x00007ffeefbff4b0
//            r8 = 0x0000000010313e1e
//            r9 = 0x0000000010313e21
//           r10 = 0x00000000fffffffe
//           r11 = 0x0000000000000000
//           r12 = 0x0000000000000000
//           r13 = 0x0000000000000000
//           r14 = 0x0000000000000000
//           r15 = 0x0000000000000000
//           rip = 0x0000000100000a59  demo`main + 41 [inlined] demo.foo() -> () + 37 at main.swift:8
//      demo`main + 4 at main.swift:8
//        rflags = 0x0000000000000202
//            cs = 0x000000000000002b
//            fs = 0x0000000000000000
//            gs = 0x0000000000000000
//
//    (lldb) register read rax // è¯»å– rax å¯„å­˜å™¨
//         rax = 0x000000010313e1d0
//    (lldb) register read/x rax // ä»¥åå…­è¿›åˆ¶è¯»å– rax å¯„å­˜å™¨
//         rax = 0x000000010313e1d0
//    (lldb) register write rax 10 // å†™å…¥ rax å¯„å­˜å™¨ 10
//    (lldb) register read/d rax // ä»¥åè¿›åˆ¶è¯»å– rax å¯„å­˜å™¨
//         rax = 10
//    (lldb) x 0x000000010313e1d0 // è¯»å–å†…å­˜çš„å€¼
//    0x10313e1d0: 60 52 a3 93 ff 7f 00 00 02 00 00 00 00 00 00 00  `R..............
//    0x10313e1e0: 01 00 00 00 00 00 00 00 02 00 00 00 00 00 00 00  ................
//    (lldb) x/3xw 0x000000010313e1d0 // ä»¥ä¸€ä¸ªå­—ï¼ˆ4 å­—èŠ‚ï¼‰è¯»å–ï¼Œè¯»å–ä¸‰æ®µï¼Œåå…­è¿›åˆ¶è¡¨ç¤º
//    0x10313e1d0: 0x93a35260 0x00007fff 0x00000002
//    (lldb) x/4xg 0x000000010313e1d0  // ä»¥ 8 å­—èŠ‚è¯»å–ï¼Œè¯»å–å››æ®µï¼Œåå…­è¿›åˆ¶è¡¨ç¤º
//    0x10313e1d0: 0x00007fff93a35260 0x0000000000000002
//    0x10313e1e0: 0x0000000000000001 0x0000000000000002
```

|                  æŒ‡ä»¤                  |                               è§£é‡Š                               |
| :------------------------------------: | :--------------------------------------------------------------: |
|    `thread step-over`ã€`next`ã€`n`     |          å•æ­¥è¿â¾ï¼ŒæŠŠå­å‡½æ•°å½“åšæ•´ä½“â¼€æ­¥æ‰§è¡Œï¼ˆæºç çº§åˆ«ï¼‰          |
|     `thread step-in`ã€`step`ã€`s`      |           å•æ­¥è¿è¡Œï¼Œé‡åˆ°å­å‡½æ•°ä¼šè¿›â¼Šå­å‡½æ•°ï¼ˆæºç çº§åˆ«ï¼‰           |
| `thread step-inst-over`ã€`nexti`ã€`ni` |          å•æ­¥è¿è¡Œï¼ŒæŠŠå­å‡½æ•°å½“åšæ•´ä½“â¼€æ­¥æ‰§â¾ï¼ˆæ±‡ç¼–çº§åˆ«ï¼‰          |
|   `thread step-inst`ã€`stepi`ã€`si`    |           å•æ­¥è¿è¡Œï¼Œé‡åˆ°å­å‡½æ•°ä¼šè¿›å…¥å­å‡½æ•°ï¼ˆæ±‡ç¼–çº§åˆ«ï¼‰           |
|      `thread step-out`ã€`finish`       | ç›´æ¥æ‰§è¡Œå®Œå½“å‰å‡½æ•°çš„æ‰€æœ‰ä»£ç ï¼Œè¿”å›åˆ°ä¸Šä¸€ä¸ªå‡½æ•°ï¼ˆé‡åˆ°æ–­ç‚¹ä¼šå¡ä½ï¼‰ |



## enum & switch-case

 -->
<h2 id="reference">Reference</h2>
<ul>
<li><a href="https://docs.microsoft.com/en-us/windows-hardware/drivers/debugger/x64-architecture?view=drivers-server-ver15">x64 Architecture - Microsoft</a></li>
</ul>

    </div>
    
      <div class="pagination">
        <div class="pagination__title">
          <span class="pagination__title-h">Read other posts</span>
          <hr />
        </div>
        <div class="pagination__buttons">
          
          
            <span class="button next">
              <a href="/posts/2020/swift_struct_and_class/">
                <span class="button__text">Swift æ‹¾é— - struct &amp; class</span>
                <span class="button__icon">â†’</span>
              </a>
            </span>
          
        </div>
      </div>
    

    

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<table style="border: 0;">
  <tr>
  <td style="border: 0; width: 30%;">
    <img src='/img/about/1.jpg'>
  </td>
  <td style="border: 0;">
    <ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-9925978992661955"
     data-ad-slot="3213735320"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
  </td>
  </tr>
</table>



<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>


    
    
    <div>
      <div id="github-comment">
      </div>

      <script type="text/javascript">
        function getUtterances(isDark) {
          var utterances = document.createElement('script');
          utterances.type = 'text/javascript';
          utterances.async = true;
          utterances.setAttribute('issue-term', "pathname")
          utterances.setAttribute('repo', "kingcos\/kingcos.github.io")
          utterances.setAttribute('label', "comments")
          isDark ? utterances.setAttribute('theme', "github-dark") : utterances.setAttribute('theme', "github-light")
          utterances.crossorigin = 'anonymous';
          utterances.src = 'https://utteranc.es/client.js';

          return utterances
        }

        var themeToggle = document.querySelector(".theme-toggle")
        themeToggle.addEventListener("click", function () {
          var getTheme = window.localStorage && window.localStorage.getItem("theme")
          var divNode = document.getElementById('github-comment')
          while(divNode.hasChildNodes()) {
            divNode.removeChild(divNode.firstChild);
          }
          
          
          

          
          
          
          
          
          
          document.getElementById('github-comment').appendChild(getUtterances(getTheme !== "dark"))
        })

        var getTheme = window.localStorage && window.localStorage.getItem("theme")
        document.getElementById('github-comment').appendChild(getUtterances(getTheme === "dark"))
      </script>
    </div>
    

    </div>

      </div>

      
        <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright copyright--user">All rights reserved by kingcos.me</div>
    
  </div>
</footer>

<script src="/assets/main.js"></script>
<script src="/assets/prism.js"></script>



      
    </div>

    
      
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-138311951-1', 'auto');
	
	ga('send', 'pageview');
}
</script>

    
  </body>
</html>

<!DOCTYPE html>
<html lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="author" content="kingcos" />
	
	
	
	<title>Swift æ‹¾é— - æ±‡ç¼– ï½œ èŒé¢å¤§é“</title>
	
    
    
    <meta name="description" content="ã€ŠSwift æ‹¾é—ã€‹æ˜¯ä¸€ä¸ªå…³äº Swift çš„æ–°æ–‡ç« ä¸“è¾‘ï¼Œè¿™ä¸ªç³»åˆ—çš„æ–‡ç« å°†ä¸ä¼šæ¶‰åŠåŸºæœ¬è¯­æ³•çš„å±‚é¢ï¼Œè€Œæ˜¯å°è¯•ä»åº•å±‚ã€Œæ‹¾ã€èµ·ä¹‹å‰æ‰€å¿½è§†çš„å†…å®¹ã€‚æœ¬æ–‡æ¶‰åŠäº†å„ä¸ªéƒ¨åˆ†å…³äºæ±‡ç¼–çš„å†…å®¹ã€‚" />
    

    
    
    <meta name="keywords" content="Hugo, theme, zozo" />
    

	
    
    <link rel="shortcut icon" href="https://kingcos.me/images/favicon.png" />

    <link rel="stylesheet" type="text/css" media="screen" href="https://kingcos.me/css/normalize.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.0/animate.min.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="https://kingcos.me/css/zozo.css" />
	<link rel="stylesheet" type="text/css" media="screen" href="https://cdn.jsdelivr.net/npm/remixicon@2.5.0/fonts/remixicon.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="https://kingcos.me/css/highlight.css" />

    
    
</head>

<script data-ad-client="ca-pub-9925978992661955" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<body>
    <div class="main animate__animated animate__fadeInDown">
        <div class="nav_container animated fadeInDown">
    <div class="site_nav" id="site_nav">
        <ul>
            
            <li>
                <a href="/">Home</a>
            </li>
            
            <li>
                <a href="/posts/">Archive</a>
            </li>
            
            <li>
                <a href="/tags/">Tags</a>
            </li>
            
            <li>
                <a href="/about/">About</a>
            </li>
            
        </ul>
    </div>
    <div class="menu_icon">
        <a id="menu_icon"><i class="ri-menu-line"></i></a>
    </div>
</div>

<style>
.nav_container {
  height: 1rem;
}
table {
    width: 100%;
    table-layout: fixed;
}
.markdown code {
    white-space: normal;
    word-wrap: break-word;
     
}

.menu_icon a {
    font-size: 20px;
}

 

body {
    font-family: 'Hiragino Sans GB', 'SFMono', 'Lato';
    -webkit-font-smoothing: 'antialiased';
}

.markdown strong, .markdown b, .markdown em {
    font-weight: bold;
}

.markdown .book-hint.info {
    border-left-color:#6bf;
    background-color:rgba(102,187,255,.1);
    font-weight: bold;
}

.markdown .book-hint.warning{
    border-left-color:#fd6;
    background-color:rgba(255,221,102,.1);
    font-weight: bold;
}

.markdown .book-hint.danger{
    border-left-color:#f66;
    background-color:rgba(255,102,102,.1);
    font-weight: bold;
}

</style>

        <div class="header animated fadeInDown">
    <div class="site_title_container">
        <div class="site_title">
            <h1>
                <a href="https://kingcos.me/">
                    <span>èŒé¢å¤§é“</span>
                </a>
            </h1>
        </div>
        <div class="description">
            <p class="sub_title">ä¸“æ³¨ã€åšæŒ</p>
            <div class="my_socials">
                
                
                <a href="https://github.com/kingcos" title="github" target="_blank"><i class="ri-github-fill"></i></a>
                
                
                
                <a href="https://www.instagram.com/kingcos_v/" title="instagram" target="_blank"><i class="ri-instagram-fill"></i></a>
                
                
                
                <a href="https://twitter.com/kingcos_v" title="twitter" target="_blank"><i class="ri-twitter-fill"></i></a>
                
                
                
                <a href="https://weibo.com/u/1798410923" title="weibo" target="_blank"><i class="ri-weibo-fill"></i></a>
                
                
                <a href="https://kingcos.me/index.xml" type="application/rss+xml" title="rss" target="_blank"><i
                        class="ri-rss-fill"></i></a>
            </div>
        </div>
    </div>
</div>
        <div class="content">
            <div class="post_page">
                <div class="post animate__animated animate__fadeInDown">
                    <div class="post_title post_detail_title">
                        <h2><a href='/posts/2020/swift_with_asm/'>Swift æ‹¾é— - æ±‡ç¼–</a></h2>
                        <span class="date">2020.08.10</span>
                    </div>
                    <div class="post_content markdown"><table>
<thead>
<tr>
<th style="text-align:center">Date</th>
<th style="text-align:center">Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">2020-08-10</td>
<td style="text-align:center">é¦–æ¬¡æäº¤</td>
</tr>
</tbody>
</table>
<h2 id="preface">Preface</h2>
<p>ã€ŠSwift æ‹¾é—ã€‹æ˜¯ä¸€ä¸ªå…³äº Swift çš„æ–°æ–‡ç« ä¸“è¾‘ï¼Œè¿™ä¸ªç³»åˆ—çš„æ–‡ç« å°†ä¸ä¼šæ¶‰åŠåŸºæœ¬è¯­æ³•çš„å±‚é¢ï¼Œè€Œæ˜¯å°è¯•ä»åº•å±‚ã€Œæ‹¾ã€èµ·ä¹‹å‰æ‰€å¿½è§†çš„å†…å®¹ã€‚æœ¬æ–‡æ¶‰åŠäº†å„ä¸ªéƒ¨åˆ†å…³äºæ±‡ç¼–çš„å†…å®¹ã€‚</p>
<!-- - 16 ä¸ªå¸¸ç”¨å¯„å­˜å™¨ï¼š
  - `rax`ã€`rbx`ã€`rcx`ã€`rdx`ã€`rsi`ã€`rdi`ã€`rbp`ã€`rsp`
  - `r8`ã€`r9`ã€`r10`ã€`r11`ã€`r12`ã€`r13`ã€`r14`ã€`r15`
  - `r` å¼€å¤´çš„å¯„å­˜å™¨å‡ä¸º 64 ä½(8 å­—èŠ‚ï¼‰å¯„å­˜å™¨ï¼Œ`e` å¼€å¤´ä¸º 32 ä½ï¼Œ`ax`ã€`bx`ã€`cx` ä¸º 16 ä½ï¼Œ`ah`ã€`al` ä¸º 8 ä½ã€‚

  - ç»“æ„ä½“å’Œå¯¹è±¡ç­‰å‡å­˜å‚¨åœ¨å†…å­˜ï¼ˆéå¯„å­˜å™¨ï¼‰ -->
<h2 id="struct--class">struct &amp; class</h2>
<h3 id="struct">struct</h3>
<h4 id="åˆ†é…åœ¨æ ˆåŒº">åˆ†é…åœ¨æ ˆåŒº</h4>
<div class="highlight"><pre class="chroma"><code class="language-swift" data-lang="swift"><span class="c1">// main.swift</span>

<span class="kd">struct</span> <span class="nc">Foo</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nv">a</span><span class="p">:</span> <span class="nb">Int</span>
    <span class="kd">var</span> <span class="nv">b</span><span class="p">:</span> <span class="nb">Int</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">bar</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nv">foo1</span> <span class="p">=</span> <span class="n">Foo</span><span class="p">(</span><span class="n">a</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="mi">11</span><span class="p">)</span> <span class="c1">// BREAKPOINT ğŸ”´</span>
    <span class="kd">var</span> <span class="nv">foo2</span> <span class="p">=</span> <span class="n">foo1</span>

    <span class="n">foo2</span><span class="p">.</span><span class="n">a</span> <span class="p">=</span> <span class="mi">20</span>
    <span class="n">foo2</span><span class="p">.</span><span class="n">b</span> <span class="p">=</span> <span class="mi">22</span>
<span class="p">}</span>

<span class="n">bar</span><span class="p">()</span>
</code></pre></div><p>æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªç»“æ„ä½“ <code>Foo</code>ï¼Œå¹¶åœ¨å‡½æ•° <code>bar</code> ä¸­å£°æ˜å’Œæ„é€ åèµ‹å€¼äº <code>foo1</code>ï¼Œä¹‹åå°† <code>foo1</code> èµ‹å€¼ç»™æ–°å˜é‡ <code>foo2</code>ï¼›æ­¤æ—¶æ”¹å˜ <code>foo2</code> ä¸­çš„å€¼ï¼Œç”±äºç»“æ„ä½“æ˜¯å€¼ç±»å‹ï¼Œå› æ­¤å¯¹äº <code>foo2</code> çš„æ”¹å˜å°†ä¸ä¼šå½±å“ <code>foo1</code>ï¼Œæˆ‘ä»¬å°è¯•ä»æ±‡ç¼–åº•å±‚çœ‹ä¸€ä¸‹è¿™ä¸ªè¿‡ç¨‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-asm" data-lang="asm"><span class="nf">demo</span><span class="err">`</span><span class="no">bar</span><span class="p">():</span>
    <span class="c">; ...
</span><span class="c"></span>    <span class="c">; å‡½æ•°è°ƒç”¨å‰è¦å…ˆä¼ é€’å‚æ•°ï¼š
</span><span class="c"></span>    <span class="c">; å°†ç«‹å³æ•° 10 ç§»åŠ¨åˆ° edi å¯„å­˜å™¨ï¼ˆå³ rdi å¯„å­˜å™¨ä½ 32 ä½ï¼‰
</span><span class="c"></span>    <span class="err">0</span><span class="nf">x100000b73</span> <span class="err">&lt;+</span><span class="mi">19</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">movl</span>   <span class="no">$0xa</span><span class="p">,</span> <span class="nv">%edi</span>
    <span class="c">; å°†ç«‹å³æ•° 11 ç§»åŠ¨åˆ° esi å¯„å­˜å™¨ï¼ˆå³ rsi å¯„å­˜å™¨ä½ 32 ä½ï¼‰
</span><span class="c"></span>    <span class="err">0</span><span class="nf">x100000b78</span> <span class="err">&lt;+</span><span class="mi">24</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">movl</span>   <span class="no">$0xb</span><span class="p">,</span> <span class="nv">%esi</span>
    <span class="c">; æ„é€ å‡½æ•°è°ƒç”¨ï¼š
</span><span class="c"></span><span class="err">-&gt;</span>  <span class="err">0</span><span class="nf">x100000b7d</span> <span class="err">&lt;+</span><span class="mi">29</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">callq</span>  <span class="mi">0x100000b50</span>               <span class="c">; demo.Foo.init(a: Swift.Int, b: Swift.Int) -&gt; demo.Foo at main.swift:1
</span><span class="c"></span>    <span class="c">; ç»æ„é€ å‡½æ•°è°ƒç”¨åï¼Œæ­¤æ—¶ 10 ä½äº raxï¼Œ11 ä½äº rdxï¼ˆè¯¦è§ä¸‹æ–¹ init å†…æ±‡ç¼–ï¼‰
</span><span class="c"></span>    <span class="c">; (lldb) register read rax =&gt; rax = 0x000000000000000a
</span><span class="c"></span>    <span class="c">; (lldb) register read rdx =&gt; rdx = 0x000000000000000b
</span><span class="c"></span>    <span class="c">; ---
</span><span class="c"></span>    <span class="c">; (lldb) register read rbp =&gt; rbp = 0x00007ffeefbff4a0
</span><span class="c"></span>    <span class="c">; (lldb) po withUnsafePointer(to: &amp;foo1) { print(&#34;\($0)&#34;) } =&gt; 0x00007ffeefbff490
</span><span class="c"></span>    <span class="c">; å°† rax å¯„å­˜å™¨å†…å®¹ï¼ˆ10ï¼‰ç§»åŠ¨åˆ° rbp - 0x10 åœ°å€ï¼ˆ0x7FFEEFBFF490ï¼Œå³ foo1 çš„å†…å­˜åœ°å€ï¼‰
</span><span class="c"></span>    <span class="mi">0x100000b82</span> <span class="err">&lt;+</span><span class="mi">34</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">movq</span>   <span class="nv">%rax</span><span class="p">,</span> <span class="p">-</span><span class="mi">0x10</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">)</span>
    <span class="c">; å°† rdx å¯„å­˜å™¨å†…å®¹ï¼ˆ11ï¼‰ç§»åŠ¨åˆ° rbp - 0x8 åœ°å€ï¼ˆ0x7FFEEFBFF498ï¼‰
</span><span class="c"></span>    <span class="err">0</span><span class="nf">x100000b86</span> <span class="err">&lt;+</span><span class="mi">38</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">movq</span>   <span class="nv">%rdx</span><span class="p">,</span> <span class="p">-</span><span class="mi">0x8</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">)</span>
    <span class="c">; (lldb) po withUnsafePointer(to: &amp;foo2) { print(&#34;\($0)&#34;) } =&gt; 0x00007ffeefbff480
</span><span class="c"></span>    <span class="c">; å°† rax å¯„å­˜å™¨å†…å®¹ï¼ˆ10ï¼‰ç§»åŠ¨åˆ° rbp - 0x20 åœ°å€ï¼ˆ0x7FFEEFBFF480ï¼Œå³ foo2 çš„å†…å­˜åœ°å€ï¼‰
</span><span class="c"></span>    <span class="err">0</span><span class="nf">x100000b8a</span> <span class="err">&lt;+</span><span class="mi">42</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">movq</span>   <span class="nv">%rax</span><span class="p">,</span> <span class="p">-</span><span class="mi">0x20</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">)</span>
    <span class="c">; å°† rdx å¯„å­˜å™¨å†…å®¹ï¼ˆ11ï¼‰ç§»åŠ¨åˆ° rbp - 0x18 åœ°å€ï¼ˆ0x7FFEEFBFF488ï¼‰
</span><span class="c"></span>    <span class="err">0</span><span class="nf">x100000b8e</span> <span class="err">&lt;+</span><span class="mi">46</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">movq</span>   <span class="nv">%rdx</span><span class="p">,</span> <span class="p">-</span><span class="mi">0x18</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">)</span>
    <span class="c">; å°†ç«‹å³æ•° 20 ç§»åŠ¨åˆ° rbp - 0x20 å¯„å­˜å™¨ï¼ˆfoo2.aï¼‰
</span><span class="c"></span>    <span class="err">0</span><span class="nf">x100000b92</span> <span class="err">&lt;+</span><span class="mi">50</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">movq</span>   <span class="no">$0x14</span><span class="p">,</span> <span class="p">-</span><span class="mi">0x20</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">)</span>
    <span class="c">; å°†ç«‹å³æ•° 22 ç§»åŠ¨åˆ° rbp - 0x18 å¯„å­˜å™¨ï¼ˆfoo2.bï¼‰
</span><span class="c"></span>    <span class="err">0</span><span class="nf">x100000b9a</span> <span class="err">&lt;+</span><span class="mi">58</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">movq</span>   <span class="no">$0x16</span><span class="p">,</span> <span class="p">-</span><span class="mi">0x18</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">)</span>
    <span class="err">0</span><span class="nf">x100000ba2</span> <span class="err">&lt;+</span><span class="mi">66</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">addq</span>   <span class="no">$0x20</span><span class="p">,</span> <span class="nv">%rsp</span>
    <span class="err">0</span><span class="nf">x100000ba6</span> <span class="err">&lt;+</span><span class="mi">70</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">popq</span>   <span class="nv">%rbp</span>
    <span class="err">0</span><span class="nf">x100000ba7</span> <span class="err">&lt;+</span><span class="mi">71</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">retq</span>

<span class="c">; æ–­ç‚¹å¤„æ‰§è¡Œ LLDB å‘½ä»¤ siï¼š
</span><span class="c"></span><span class="nf">demo</span><span class="err">`</span><span class="no">Foo.init</span><span class="p">(</span><span class="no">a</span><span class="err">ğŸ…±ï¸</span><span class="p">):</span>
<span class="err">-&gt;</span>  <span class="err">0</span><span class="nf">x100000b50</span> <span class="err">&lt;+</span><span class="mi">0</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">pushq</span>  <span class="nv">%rbp</span>
    <span class="err">0</span><span class="nf">x100000b51</span> <span class="err">&lt;+</span><span class="mi">1</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">movq</span>   <span class="nv">%rsp</span><span class="p">,</span> <span class="nv">%rbp</span>
    <span class="c">; å°†å‚æ•°æ”¾åœ¨å‡½æ•°å†…éƒ¨çš„æ ˆç©ºé—´ï¼š
</span><span class="c"></span>    <span class="c">; å°† rdi å¯„å­˜å™¨å†…å®¹ï¼ˆ10ï¼‰ç§»åŠ¨åˆ° rax å¯„å­˜å™¨
</span><span class="c"></span>    <span class="err">0</span><span class="nf">x100000b54</span> <span class="err">&lt;+</span><span class="mi">4</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">movq</span>   <span class="nv">%rdi</span><span class="p">,</span> <span class="nv">%rax</span>
    <span class="c">; å°† rsi å¯„å­˜å™¨å†…å®¹ï¼ˆ11ï¼‰ç§»åŠ¨åˆ° rdx å¯„å­˜å™¨
</span><span class="c"></span>    <span class="err">0</span><span class="nf">x100000b57</span> <span class="err">&lt;+</span><span class="mi">7</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">movq</span>   <span class="nv">%rsi</span><span class="p">,</span> <span class="nv">%rdx</span>
    <span class="err">0</span><span class="nf">x100000b5a</span> <span class="err">&lt;+</span><span class="mi">10</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">popq</span>   <span class="nv">%rbp</span>
    <span class="err">0</span><span class="nf">x100000b5b</span> <span class="err">&lt;+</span><span class="mi">11</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">retq</span>
</code></pre></div><p>ç»¼ä¸Šï¼Œå˜é‡çš„å†…å­˜åœ°å€æ ¼å¼ä¸ºï¼š<code>-0x10(%rbp)</code> ä¸€èˆ¬æ˜¯æ ˆç©ºé—´çš„å±€éƒ¨å˜é‡ã€‚è¿™æ˜¯å› ä¸º <code>rbp</code> ä¼šæ ¹æ®æ¯æ¬¡å‡½æ•°è°ƒç”¨è€Œæœ‰ä¸ä¸€æ ·çš„å€¼ï¼Œå±€éƒ¨å˜é‡çš„å†…å­˜åœ°å€ä¹Ÿåœ¨æ¯æ¬¡è°ƒç”¨æ—¶ä¼šé‡æ–°åˆ†é…ã€‚</p>
<h4 id="åˆ†é…åœ¨å…¨å±€åŒº">åˆ†é…åœ¨å…¨å±€åŒº</h4>
<div class="highlight"><pre class="chroma"><code class="language-swift" data-lang="swift"><span class="c1">// main.swift</span>

<span class="kd">struct</span> <span class="nc">Foo</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nv">a</span><span class="p">:</span> <span class="nb">Int</span>
    <span class="kd">var</span> <span class="nv">b</span><span class="p">:</span> <span class="nb">Int</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nv">foo1</span> <span class="p">=</span> <span class="n">Foo</span><span class="p">(</span><span class="n">a</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="mi">11</span><span class="p">)</span> <span class="c1">// BREAKPOINT ğŸ”´</span>
<span class="kd">var</span> <span class="nv">foo2</span> <span class="p">=</span> <span class="n">foo1</span>

<span class="n">foo2</span><span class="p">.</span><span class="n">a</span> <span class="p">=</span> <span class="mi">20</span>
<span class="n">foo2</span><span class="p">.</span><span class="n">b</span> <span class="p">=</span> <span class="mi">22</span>
</code></pre></div><p>å½“ <code>foo1</code> å’Œ <code>foo2</code> åœ¨å…¨å±€åŒºæ—¶åˆ™åˆæœ‰äº›ä¸ä¸€æ ·ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-asm" data-lang="asm"><span class="nf">demo</span><span class="err">`</span><span class="no">main</span><span class="p">:</span>
    <span class="err">0</span><span class="nf">x100000a80</span> <span class="err">&lt;+</span><span class="mi">0</span><span class="err">&gt;</span><span class="p">:</span>   <span class="no">pushq</span>  <span class="nv">%rbp</span>
    <span class="err">0</span><span class="nf">x100000a81</span> <span class="err">&lt;+</span><span class="mi">1</span><span class="err">&gt;</span><span class="p">:</span>   <span class="no">movq</span>   <span class="nv">%rsp</span><span class="p">,</span> <span class="nv">%rbp</span>
    <span class="err">0</span><span class="nf">x100000a84</span> <span class="err">&lt;+</span><span class="mi">4</span><span class="err">&gt;</span><span class="p">:</span>   <span class="no">subq</span>   <span class="no">$0x60</span><span class="p">,</span> <span class="nv">%rsp</span>
    <span class="c">; å‡½æ•°è°ƒç”¨å‰è¦å…ˆä¼ é€’å‚æ•°ï¼š
</span><span class="c"></span>    <span class="c">; å°†ç«‹å³æ•° 10 ç§»åŠ¨åˆ° eax å¯„å­˜å™¨ï¼ˆå³ rax å¯„å­˜å™¨ä½ 32 ä½ï¼‰
</span><span class="c"></span><span class="err">-&gt;</span>  <span class="err">0</span><span class="nf">x100000a88</span> <span class="err">&lt;+</span><span class="mi">8</span><span class="err">&gt;</span><span class="p">:</span>   <span class="no">movl</span>   <span class="no">$0xa</span><span class="p">,</span> <span class="nv">%eax</span>
    <span class="err">0</span><span class="nf">x100000a8d</span> <span class="err">&lt;+</span><span class="mi">13</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">movl</span>   <span class="nv">%edi</span><span class="p">,</span> <span class="p">-</span><span class="mi">0x4c</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">)</span>
    <span class="c">; å°† rax å¯„å­˜å™¨å†…å®¹ï¼ˆ10ï¼‰ç§»åŠ¨åˆ° rdi å¯„å­˜å™¨
</span><span class="c"></span>    <span class="err">0</span><span class="nf">x100000a90</span> <span class="err">&lt;+</span><span class="mi">16</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">movq</span>   <span class="nv">%rax</span><span class="p">,</span> <span class="nv">%rdi</span>
    <span class="c">; å°†ç«‹å³æ•° 11 ç§»åŠ¨åˆ° eax å¯„å­˜å™¨ï¼ˆå³ rax å¯„å­˜å™¨ä½ 32 ä½ï¼‰
</span><span class="c"></span>    <span class="err">0</span><span class="nf">x100000a93</span> <span class="err">&lt;+</span><span class="mi">19</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">movl</span>   <span class="no">$0xb</span><span class="p">,</span> <span class="nv">%eax</span>
    <span class="err">0</span><span class="nf">x100000a98</span> <span class="err">&lt;+</span><span class="mi">24</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">movq</span>   <span class="nv">%rsi</span><span class="p">,</span> <span class="p">-</span><span class="mi">0x58</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">)</span>
    <span class="c">; å°† rax å¯„å­˜å™¨å†…å®¹ï¼ˆ11ï¼‰ç§»åŠ¨åˆ° rsi å¯„å­˜å™¨
</span><span class="c"></span>    <span class="err">0</span><span class="nf">x100000a9c</span> <span class="err">&lt;+</span><span class="mi">28</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">movq</span>   <span class="nv">%rax</span><span class="p">,</span> <span class="nv">%rsi</span>
    <span class="c">; æ„é€ å‡½æ•°è°ƒç”¨ï¼š
</span><span class="c"></span>    <span class="err">0</span><span class="nf">x100000a9f</span> <span class="err">&lt;+</span><span class="mi">31</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">callq</span>  <span class="mi">0x100000c00</span>               <span class="c">; demo.Foo.init(a: Swift.Int, b: Swift.Int) -&gt; demo.Foo at main.swift:3
</span><span class="c"></span>    <span class="c">; ç»æ„é€ å‡½æ•°è°ƒç”¨åï¼Œæ­¤æ—¶ 10 ä½äº raxï¼Œ11 ä½äº rdxï¼ˆè¯¦è§ä¸‹æ–¹ init å†…æ±‡ç¼–ï¼‰
</span><span class="c"></span>    <span class="c">; (lldb) register read rax =&gt; rax = 0x000000000000000a
</span><span class="c"></span>    <span class="c">; (lldb) register read rdx =&gt; rdx = 0x000000000000000b
</span><span class="c"></span>    <span class="mi">0x100000aa4</span> <span class="err">&lt;+</span><span class="mi">36</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">leaq</span>   <span class="mi">0x156d</span><span class="p">(</span><span class="nv">%rip</span><span class="p">),</span> <span class="nv">%rcx</span>        <span class="c">; demo.foo1 : demo.Foo
</span><span class="c"></span>    <span class="mi">0x100000aab</span> <span class="err">&lt;+</span><span class="mi">43</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">xorl</span>   <span class="nv">%r8d</span><span class="p">,</span> <span class="nv">%r8d</span>
    <span class="err">0</span><span class="nf">x100000aae</span> <span class="err">&lt;+</span><span class="mi">46</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">movl</span>   <span class="nv">%r8d</span><span class="p">,</span> <span class="nv">%esi</span>
    <span class="c">; (lldb) po withUnsafePointer(to: &amp;foo1) { print(&#34;\($0)&#34;) } =&gt; 0x0000000100002018
</span><span class="c"></span>    <span class="c">; å°† rax å¯„å­˜å™¨å†…å®¹ï¼ˆ10ï¼‰ç§»åŠ¨åˆ° rip + 0x1560 åœ°å€ï¼ˆ0x100002018ï¼Œå³ foo1 çš„å†…å­˜åœ°å€ï¼‰
</span><span class="c"></span>    <span class="err">0</span><span class="nf">x100000ab1</span> <span class="err">&lt;+</span><span class="mi">49</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">movq</span>   <span class="nv">%rax</span><span class="p">,</span> <span class="mi">0x1560</span><span class="p">(</span><span class="nv">%rip</span><span class="p">)</span>        <span class="c">; demo.foo1 : demo.Foo
</span><span class="c"></span>    <span class="c">; å°† rdx å¯„å­˜å™¨å†…å®¹ï¼ˆ11ï¼‰ç§»åŠ¨åˆ° rip + 0x1561 åœ°å€ï¼ˆ0x100002020ï¼‰
</span><span class="c"></span>    <span class="mi">0x100000ab8</span> <span class="err">&lt;+</span><span class="mi">56</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">movq</span>   <span class="nv">%rdx</span><span class="p">,</span> <span class="mi">0x1561</span><span class="p">(</span><span class="nv">%rip</span><span class="p">)</span>        <span class="c">; demo.foo1 : demo.Foo + 8
</span><span class="c"></span>    <span class="mi">0x100000abf</span> <span class="err">&lt;+</span><span class="mi">63</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">movq</span>   <span class="nv">%rcx</span><span class="p">,</span> <span class="nv">%rdi</span>
    <span class="err">0</span><span class="nf">x100000ac2</span> <span class="err">&lt;+</span><span class="mi">66</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">leaq</span>   <span class="p">-</span><span class="mi">0x18</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">),</span> <span class="nv">%rax</span>
    <span class="err">0</span><span class="nf">x100000ac6</span> <span class="err">&lt;+</span><span class="mi">70</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">movq</span>   <span class="nv">%rsi</span><span class="p">,</span> <span class="p">-</span><span class="mi">0x60</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">)</span>
    <span class="err">0</span><span class="nf">x100000aca</span> <span class="err">&lt;+</span><span class="mi">74</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">movq</span>   <span class="nv">%rax</span><span class="p">,</span> <span class="nv">%rsi</span>
    <span class="err">0</span><span class="nf">x100000acd</span> <span class="err">&lt;+</span><span class="mi">77</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">movl</span>   <span class="no">$0x20</span><span class="p">,</span> <span class="nv">%edx</span>
    <span class="err">0</span><span class="nf">x100000ad2</span> <span class="err">&lt;+</span><span class="mi">82</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">movq</span>   <span class="p">-</span><span class="mi">0x60</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">),</span> <span class="nv">%rcx</span>
    <span class="err">0</span><span class="nf">x100000ad6</span> <span class="err">&lt;+</span><span class="mi">86</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">callq</span>  <span class="mi">0x100000e42</span>               <span class="c">; symbol stub for: swift_beginAccess
</span><span class="c"></span>    <span class="c">; (lldb) po withUnsafePointer(to: &amp;foo2) { print(&#34;\($0)&#34;) } =&gt; 0x0000000100002028
</span><span class="c"></span>    <span class="c">; å°† rip + 0x1536 åœ°å€ï¼ˆ0x100002018ï¼Œå³ foo1ï¼‰å†…å®¹ï¼ˆ10ï¼‰ç§»åŠ¨åˆ° rax
</span><span class="c"></span>    <span class="mi">0x100000adb</span> <span class="err">&lt;+</span><span class="mi">91</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">movq</span>   <span class="mi">0x1536</span><span class="p">(</span><span class="nv">%rip</span><span class="p">),</span> <span class="nv">%rax</span>        <span class="c">; demo.foo1 : demo.Foo
</span><span class="c"></span>    <span class="c">; å°† rax å¯„å­˜å™¨å†…å®¹ï¼ˆ10ï¼‰ç§»åŠ¨åˆ° rip + 0x153f åœ°å€ï¼ˆ00x100002028ï¼Œå³ foo2 çš„å†…å­˜åœ°å€ï¼‰
</span><span class="c"></span>    <span class="mi">0x100000ae2</span> <span class="err">&lt;+</span><span class="mi">98</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">movq</span>   <span class="nv">%rax</span><span class="p">,</span> <span class="mi">0x153f</span><span class="p">(</span><span class="nv">%rip</span><span class="p">)</span>        <span class="c">; demo.foo2 : demo.Foo
</span><span class="c"></span>    <span class="c">; å°† rip + 0x1530 åœ°å€ï¼ˆ0x100002020ï¼‰å†…å®¹ï¼ˆ11ï¼‰ç§»åŠ¨åˆ° rax
</span><span class="c"></span>    <span class="mi">0x100000ae9</span> <span class="err">&lt;+</span><span class="mi">105</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">movq</span>   <span class="mi">0x1530</span><span class="p">(</span><span class="nv">%rip</span><span class="p">),</span> <span class="nv">%rax</span>        <span class="c">; demo.foo1 : demo.Foo + 8
</span><span class="c"></span>    <span class="c">; å°† rax å¯„å­˜å™¨å†…å®¹ï¼ˆ11ï¼‰ç§»åŠ¨åˆ° rip + 0x1539 åœ°å€ï¼ˆ0x100002030ï¼‰
</span><span class="c"></span>    <span class="mi">0x100000af0</span> <span class="err">&lt;+</span><span class="mi">112</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">movq</span>   <span class="nv">%rax</span><span class="p">,</span> <span class="mi">0x1539</span><span class="p">(</span><span class="nv">%rip</span><span class="p">)</span>        <span class="c">; demo.foo2 : demo.Foo + 8
</span><span class="c"></span>    <span class="mi">0x100000af7</span> <span class="err">&lt;+</span><span class="mi">119</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">leaq</span>   <span class="p">-</span><span class="mi">0x18</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">),</span> <span class="nv">%rdi</span>
    <span class="err">0</span><span class="nf">x100000afb</span> <span class="err">&lt;+</span><span class="mi">123</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">callq</span>  <span class="mi">0x100000e48</span>               <span class="c">; symbol stub for: swift_endAccess
</span><span class="c"></span>    <span class="mi">0x100000b00</span> <span class="err">&lt;+</span><span class="mi">128</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">leaq</span>   <span class="mi">0x1521</span><span class="p">(</span><span class="nv">%rip</span><span class="p">),</span> <span class="nv">%rax</span>        <span class="c">; demo.foo2 : demo.Foo
</span><span class="c"></span>    <span class="mi">0x100000b07</span> <span class="err">&lt;+</span><span class="mi">135</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">xorl</span>   <span class="nv">%r8d</span><span class="p">,</span> <span class="nv">%r8d</span>
    <span class="err">0</span><span class="nf">x100000b0a</span> <span class="err">&lt;+</span><span class="mi">138</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">movl</span>   <span class="nv">%r8d</span><span class="p">,</span> <span class="nv">%ecx</span>
    <span class="err">0</span><span class="nf">x100000b0d</span> <span class="err">&lt;+</span><span class="mi">141</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">movq</span>   <span class="nv">%rax</span><span class="p">,</span> <span class="nv">%rdi</span>
    <span class="err">0</span><span class="nf">x100000b10</span> <span class="err">&lt;+</span><span class="mi">144</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">leaq</span>   <span class="p">-</span><span class="mi">0x30</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">),</span> <span class="nv">%rsi</span>
    <span class="err">0</span><span class="nf">x100000b14</span> <span class="err">&lt;+</span><span class="mi">148</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">movl</span>   <span class="no">$0x21</span><span class="p">,</span> <span class="nv">%edx</span>
    <span class="err">0</span><span class="nf">x100000b19</span> <span class="err">&lt;+</span><span class="mi">153</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">callq</span>  <span class="mi">0x100000e42</span>               <span class="c">; symbol stub for: swift_beginAccess
</span><span class="c"></span>    <span class="c">; å°†ç«‹å³æ•° 20 ç§»åŠ¨åˆ° rip + 0x14ff å¯„å­˜å™¨ï¼ˆ0x100002028ï¼Œfoo2.aï¼‰
</span><span class="c"></span>    <span class="mi">0x100000b1e</span> <span class="err">&lt;+</span><span class="mi">158</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">movq</span>   <span class="no">$0x14</span><span class="p">,</span> <span class="mi">0x14ff</span><span class="p">(</span><span class="nv">%rip</span><span class="p">)</span>       <span class="c">; demo.foo1 : demo.Foo + 12
</span><span class="c"></span>    <span class="mi">0x100000b29</span> <span class="err">&lt;+</span><span class="mi">169</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">leaq</span>   <span class="p">-</span><span class="mi">0x30</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">),</span> <span class="nv">%rdi</span>
    <span class="err">0</span><span class="nf">x100000b2d</span> <span class="err">&lt;+</span><span class="mi">173</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">callq</span>  <span class="mi">0x100000e48</span>               <span class="c">; symbol stub for: swift_endAccess
</span><span class="c"></span>    <span class="mi">0x100000b32</span> <span class="err">&lt;+</span><span class="mi">178</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">leaq</span>   <span class="mi">0x14ef</span><span class="p">(</span><span class="nv">%rip</span><span class="p">),</span> <span class="nv">%rax</span>        <span class="c">; demo.foo2 : demo.Foo
</span><span class="c"></span>    <span class="mi">0x100000b39</span> <span class="err">&lt;+</span><span class="mi">185</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">xorl</span>   <span class="nv">%r8d</span><span class="p">,</span> <span class="nv">%r8d</span>
    <span class="err">0</span><span class="nf">x100000b3c</span> <span class="err">&lt;+</span><span class="mi">188</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">movl</span>   <span class="nv">%r8d</span><span class="p">,</span> <span class="nv">%ecx</span>
    <span class="err">0</span><span class="nf">x100000b3f</span> <span class="err">&lt;+</span><span class="mi">191</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">movq</span>   <span class="nv">%rax</span><span class="p">,</span> <span class="nv">%rdi</span>
    <span class="err">0</span><span class="nf">x100000b42</span> <span class="err">&lt;+</span><span class="mi">194</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">leaq</span>   <span class="p">-</span><span class="mi">0x48</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">),</span> <span class="nv">%rsi</span>
    <span class="err">0</span><span class="nf">x100000b46</span> <span class="err">&lt;+</span><span class="mi">198</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">movl</span>   <span class="no">$0x21</span><span class="p">,</span> <span class="nv">%edx</span>
    <span class="err">0</span><span class="nf">x100000b4b</span> <span class="err">&lt;+</span><span class="mi">203</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">callq</span>  <span class="mi">0x100000e42</span>               <span class="c">; symbol stub for: swift_beginAccess
</span><span class="c"></span>     <span class="c">; å°†ç«‹å³æ•° 22 ç§»åŠ¨åˆ° rip + 0x14d5 å¯„å­˜å™¨ï¼ˆ0x100002030ï¼Œfoo2.bï¼‰
</span><span class="c"></span>    <span class="mi">0x100000b50</span> <span class="err">&lt;+</span><span class="mi">208</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">movq</span>   <span class="no">$0x16</span><span class="p">,</span> <span class="mi">0x14d5</span><span class="p">(</span><span class="nv">%rip</span><span class="p">)</span>       <span class="c">; demo.foo2 : demo.Foo + 4
</span><span class="c"></span>    <span class="mi">0x100000b5b</span> <span class="err">&lt;+</span><span class="mi">219</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">leaq</span>   <span class="p">-</span><span class="mi">0x48</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">),</span> <span class="nv">%rdi</span>
    <span class="err">0</span><span class="nf">x100000b5f</span> <span class="err">&lt;+</span><span class="mi">223</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">callq</span>  <span class="mi">0x100000e48</span>               <span class="c">; symbol stub for: swift_endAccess
</span><span class="c"></span>    <span class="mi">0x100000b64</span> <span class="err">&lt;+</span><span class="mi">228</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">xorl</span>   <span class="nv">%eax</span><span class="p">,</span> <span class="nv">%eax</span>
    <span class="err">0</span><span class="nf">x100000b66</span> <span class="err">&lt;+</span><span class="mi">230</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">addq</span>   <span class="no">$0x60</span><span class="p">,</span> <span class="nv">%rsp</span>
    <span class="err">0</span><span class="nf">x100000b6a</span> <span class="err">&lt;+</span><span class="mi">234</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">popq</span>   <span class="nv">%rbp</span>
    <span class="err">0</span><span class="nf">x100000b6b</span> <span class="err">&lt;+</span><span class="mi">235</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">retq</span>

<span class="c">; å°†æ–­ç‚¹åŠ åœ¨ `0x100000a9f &lt;+31&gt;: callq 0x100000c00` ä¸€è¡Œï¼Œå¹¶æ‰§è¡Œ `si`ï¼Œè¿›å…¥å‡½æ•°å†…éƒ¨ï¼›
</span><span class="c">; å› ä¸º `init` å‡½æ•°æ˜¯ç»“æ„ä½“æœ¬èº«çš„å‡½æ•°ï¼Œä¸ç»“æ„ä½“å˜é‡æ‰€åœ¨çš„å†…å­˜åŒºåŸŸæ— å…³ï¼Œå› æ­¤è¿™éƒ¨åˆ†çš„æ±‡ç¼–ä¸ä¹‹å‰å®Œå…¨ç›¸åŒã€‚
</span><span class="c"></span><span class="nf">demo</span><span class="err">`</span><span class="no">Foo.init</span><span class="p">(</span><span class="no">a</span><span class="err">ğŸ…±ï¸</span><span class="p">):</span>
<span class="err">-&gt;</span>  <span class="err">0</span><span class="nf">x100000c00</span> <span class="err">&lt;+</span><span class="mi">0</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">pushq</span>  <span class="nv">%rbp</span>
    <span class="err">0</span><span class="nf">x100000c01</span> <span class="err">&lt;+</span><span class="mi">1</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">movq</span>   <span class="nv">%rsp</span><span class="p">,</span> <span class="nv">%rbp</span>
    <span class="c">; å°†å‚æ•°æ”¾åœ¨å‡½æ•°å†…éƒ¨çš„æ ˆç©ºé—´ï¼š
</span><span class="c"></span>    <span class="c">; å°† rdi å¯„å­˜å™¨å†…å®¹ï¼ˆ10ï¼‰ç§»åŠ¨åˆ° rax å¯„å­˜å™¨
</span><span class="c"></span>    <span class="err">0</span><span class="nf">x100000c04</span> <span class="err">&lt;+</span><span class="mi">4</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">movq</span>   <span class="nv">%rdi</span><span class="p">,</span> <span class="nv">%rax</span>
    <span class="c">; å°† rsi å¯„å­˜å™¨å†…å®¹ï¼ˆ11ï¼‰ç§»åŠ¨åˆ° rdx å¯„å­˜å™¨
</span><span class="c"></span>    <span class="err">0</span><span class="nf">x100000c07</span> <span class="err">&lt;+</span><span class="mi">7</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">movq</span>   <span class="nv">%rsi</span><span class="p">,</span> <span class="nv">%rdx</span>
    <span class="err">0</span><span class="nf">x100000c0a</span> <span class="err">&lt;+</span><span class="mi">10</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">popq</span>   <span class="nv">%rbp</span>
    <span class="err">0</span><span class="nf">x100000c0b</span> <span class="err">&lt;+</span><span class="mi">11</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">retq</span>
</code></pre></div><p>ä¸åˆšæ‰åœ¨å‡½æ•°ä½“å†…çš„æ ˆåŒºä¸åŒçš„æ˜¯ï¼Œå…¨å±€åŒºï¼ˆæ•°æ®æ®µï¼‰å¤§é‡ä½¿ç”¨äº† <code>rip</code> å¯„å­˜å™¨ã€‚<code>rip</code> ä½œä¸ºæŒ‡ä»¤æŒ‡é’ˆå¯„å­˜å™¨ï¼Œå­˜å‚¨ç€ CPU ä¸‹ä¸€æ¡è¦æ‰§è¡Œçš„æŒ‡ä»¤çš„åœ°å€ï¼Œä¸€æ—¦ CPU è¯»å–ä¸€æ¡æŒ‡ä»¤ï¼Œ<code>rip</code> ä¼šè‡ªåŠ¨æŒ‡å‘ä¸‹ä¸€æ¡æŒ‡ä»¤ã€‚è€Œä»£ç ä¸€æ—¦è£…è½½ï¼Œæ¯æ¡æŒ‡ä»¤çš„åœ°å€å°±ä¼šå¾—ä»¥ç¡®è®¤ï¼Œå› æ­¤é€šå¸¸ä½¿ç”¨ <code>rip</code> åŠ åç§»çš„åœ°å€æ¥å­˜æ”¾å…¨å±€å˜é‡ã€‚</p>
<h3 id="class">class</h3>
<h4 id="åˆ†é…åœ¨æ ˆåŒº-1">åˆ†é…åœ¨æ ˆåŒº</h4>
<div class="highlight"><pre class="chroma"><code class="language-swift" data-lang="swift"><span class="c1">// main.swift</span>

<span class="kd">class</span> <span class="nc">Foo</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nv">a</span><span class="p">:</span> <span class="nb">Int</span>
    <span class="kd">var</span> <span class="nv">b</span><span class="p">:</span> <span class="nb">Int</span>

    <span class="kd">init</span><span class="p">(</span><span class="n">a</span><span class="p">:</span> <span class="nb">Int</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="nb">Int</span><span class="p">)</span> <span class="p">{</span>
        <span class="kc">self</span><span class="p">.</span><span class="n">a</span> <span class="p">=</span> <span class="n">a</span>
        <span class="kc">self</span><span class="p">.</span><span class="n">b</span> <span class="p">=</span> <span class="n">b</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">bar</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nv">foo1</span> <span class="p">=</span> <span class="n">Foo</span><span class="p">(</span><span class="n">a</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="mi">11</span><span class="p">)</span>
    <span class="kd">var</span> <span class="nv">foo2</span> <span class="p">=</span> <span class="n">foo1</span> <span class="c1">// BREAKPOINT ğŸ”´</span>

    <span class="n">foo2</span><span class="p">.</span><span class="n">a</span> <span class="p">=</span> <span class="mi">20</span>
    <span class="n">foo2</span><span class="p">.</span><span class="n">b</span> <span class="p">=</span> <span class="mi">22</span>
<span class="p">}</span>

<span class="n">bar</span><span class="p">()</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-asm" data-lang="asm"><span class="nf">demo</span><span class="err">`</span><span class="no">bar</span><span class="p">():</span>
    <span class="err">0</span><span class="nf">x100001cc0</span> <span class="err">&lt;+</span><span class="mi">0</span><span class="err">&gt;</span><span class="p">:</span>   <span class="no">pushq</span>  <span class="nv">%rbp</span>
    <span class="err">0</span><span class="nf">x100001cc1</span> <span class="err">&lt;+</span><span class="mi">1</span><span class="err">&gt;</span><span class="p">:</span>   <span class="no">movq</span>   <span class="nv">%rsp</span><span class="p">,</span> <span class="nv">%rbp</span>
    <span class="err">0</span><span class="nf">x100001cc4</span> <span class="err">&lt;+</span><span class="mi">4</span><span class="err">&gt;</span><span class="p">:</span>   <span class="no">pushq</span>  <span class="nv">%r13</span>
    <span class="err">0</span><span class="nf">x100001cc6</span> <span class="err">&lt;+</span><span class="mi">6</span><span class="err">&gt;</span><span class="p">:</span>   <span class="no">subq</span>   <span class="no">$0x38</span><span class="p">,</span> <span class="nv">%rsp</span>
    <span class="err">0</span><span class="nf">x100001cca</span> <span class="err">&lt;+</span><span class="mi">10</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">movq</span>   <span class="no">$0x0</span><span class="p">,</span> <span class="p">-</span><span class="mi">0x10</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">)</span>
    <span class="err">0</span><span class="nf">x100001cd2</span> <span class="err">&lt;+</span><span class="mi">18</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">movq</span>   <span class="no">$0x0</span><span class="p">,</span> <span class="p">-</span><span class="mi">0x18</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">)</span>
    <span class="err">0</span><span class="nf">x100001cda</span> <span class="err">&lt;+</span><span class="mi">26</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">xorl</span>   <span class="nv">%eax</span><span class="p">,</span> <span class="nv">%eax</span>
    <span class="err">0</span><span class="nf">x100001cdc</span> <span class="err">&lt;+</span><span class="mi">28</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">movl</span>   <span class="nv">%eax</span><span class="p">,</span> <span class="nv">%edi</span>
    <span class="err">0</span><span class="nf">x100001cde</span> <span class="err">&lt;+</span><span class="mi">30</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">callq</span>  <span class="mi">0x100001d90</span>               <span class="c">; type metadata accessor for demo.Foo at &lt;compiler-generated&gt;
</span><span class="c"></span>    <span class="c">; å‡½æ•°è°ƒç”¨å‰è¦å…ˆä¼ é€’å‚æ•°ï¼š
</span><span class="c"></span>    <span class="c">; å°†ç«‹å³æ•° 10 ç§»åŠ¨åˆ° edi å¯„å­˜å™¨ï¼ˆå³ rdi å¯„å­˜å™¨ä½ 32 ä½ï¼‰
</span><span class="c"></span>    <span class="mi">0x100001ce3</span> <span class="err">&lt;+</span><span class="mi">35</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">movl</span>   <span class="no">$0xa</span><span class="p">,</span> <span class="nv">%edi</span>
    <span class="c">; å°†ç«‹å³æ•° 11 ç§»åŠ¨åˆ° esi å¯„å­˜å™¨ï¼ˆå³ rsi å¯„å­˜å™¨ä½ 32 ä½ï¼‰
</span><span class="c"></span>    <span class="err">0</span><span class="nf">x100001ce8</span> <span class="err">&lt;+</span><span class="mi">40</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">movl</span>   <span class="no">$0xb</span><span class="p">,</span> <span class="nv">%esi</span>
    <span class="err">0</span><span class="nf">x100001ced</span> <span class="err">&lt;+</span><span class="mi">45</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">movq</span>   <span class="nv">%rax</span><span class="p">,</span> <span class="nv">%r13</span>
    <span class="err">0</span><span class="nf">x100001cf0</span> <span class="err">&lt;+</span><span class="mi">48</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">movq</span>   <span class="nv">%rdx</span><span class="p">,</span> <span class="p">-</span><span class="mi">0x20</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">)</span>
    <span class="c">; æ„é€ å‡½æ•°è°ƒç”¨ï¼š
</span><span class="c"></span>    <span class="err">0</span><span class="nf">x100001cf4</span> <span class="err">&lt;+</span><span class="mi">52</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">callq</span>  <span class="mi">0x100001b50</span>               <span class="c">; demo.Foo.__allocating_init(a: Swift.Int, b: Swift.Int) -&gt; demo.Foo at main.swift:7
</span><span class="c"></span>    <span class="c">; rax å¯„å­˜å™¨é€šå¸¸æ”¾ç½®å‡½æ•°è¿”å›å€¼ï¼ˆè¯¦è§ä¸‹æ–‡ï¼‰ï¼Œè¿™é‡Œå³ foo1 æŒ‡é’ˆæ‰€æŒ‡å‘çš„å †ç©ºé—´å†…å­˜åœ°å€
</span><span class="c"></span>    <span class="c">; (lldb) register read rax =&gt; rax = 0x000000010046d080
</span><span class="c"></span>    <span class="c">; (lldb) x --size 8 --format x --count 4 0x000000010046d080
</span><span class="c"></span>    <span class="c">; 0x10046d080: 0x0000000100003150 0x0000000000000002
</span><span class="c"></span>    <span class="c">; 0x10046d090: 0x000000000000000a 0x000000000000000b
</span><span class="c"></span>    <span class="c">; æ­¤æ—¶å¯ä»¥å°è¯•è¯»å– foo1 çš„å†…å­˜åœ°å€ï¼ˆæŒ‡é’ˆæœ¬èº«çš„å†…å­˜åœ°å€ï¼Œä½äºæ ˆç©ºé—´ï¼‰
</span><span class="c"></span>    <span class="c">; (lldb) po withUnsafeMutablePointer(to: &amp;foo1) { print(&#34;\($0)&#34;) } =&gt; 0x00007ffeefbff510
</span><span class="c"></span>    <span class="c">; (lldb) po withUnsafeMutablePointer(to: &amp;foo2) { print(&#34;\($0)&#34;) } =&gt; 0x00007ffeefbff508
</span><span class="c"></span>    <span class="mi">0x100001cf9</span> <span class="err">&lt;+</span><span class="mi">57</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">movq</span>   <span class="nv">%rax</span><span class="p">,</span> <span class="nv">%rdi</span>
    <span class="c">; å°† rax å¯„å­˜å™¨å†…å®¹ï¼ˆ0x000000010046d080ï¼‰ç§»åŠ¨åˆ° rbp - 0x28 åœ°å€
</span><span class="c"></span>    <span class="err">0</span><span class="nf">x100001cfc</span> <span class="err">&lt;+</span><span class="mi">60</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">movq</span>   <span class="nv">%rax</span><span class="p">,</span> <span class="p">-</span><span class="mi">0x28</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">)</span>
    <span class="err">0</span><span class="nf">x100001d00</span> <span class="err">&lt;+</span><span class="mi">64</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">callq</span>  <span class="mi">0x100001df6</span>               <span class="c">; symbol stub for: swift_retain
</span><span class="c"></span>    <span class="c">; å°† rbp - 0x28 åœ°å€å†…å®¹ï¼ˆ0x000000010046d080ï¼‰ç§»åŠ¨åˆ° rcx å¯„å­˜å™¨
</span><span class="c"></span>    <span class="mi">0x100001d05</span> <span class="err">&lt;+</span><span class="mi">69</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">movq</span>   <span class="p">-</span><span class="mi">0x28</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">),</span> <span class="nv">%rcx</span>
    <span class="c">; (lldb) register read rbp =&gt; rbp = 0x00007ffeefbff520
</span><span class="c"></span>    <span class="c">; å°† rcx å¯„å­˜å™¨å†…å®¹ï¼ˆ0x000000010046d080ï¼‰ç§»åŠ¨åˆ° rbp - 0x10 åœ°å€ï¼ˆ0x7FFEEFBFF510ï¼Œå³ foo1ï¼‰
</span><span class="c"></span>    <span class="err">0</span><span class="nf">x100001d09</span> <span class="err">&lt;+</span><span class="mi">73</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">movq</span>   <span class="nv">%rcx</span><span class="p">,</span> <span class="p">-</span><span class="mi">0x10</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">)</span>
    <span class="c">; (lldb) x --size 8 --format x --count 4 0x7FFEEFBFF510
</span><span class="c"></span>    <span class="c">; 0x7ffeefbff510: 0x000000010046d080 0x0000000000000000
</span><span class="c"></span>    <span class="c">; 0x7ffeefbff520: 0x00007ffeefbff540 0x00000001000017a4
</span><span class="c"></span><span class="err">-&gt;</span>  <span class="err">0</span><span class="nf">x100001d0d</span> <span class="err">&lt;+</span><span class="mi">77</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">movq</span>   <span class="nv">%rcx</span><span class="p">,</span> <span class="nv">%rdi</span>
    <span class="err">0</span><span class="nf">x100001d10</span> <span class="err">&lt;+</span><span class="mi">80</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">movq</span>   <span class="nv">%rax</span><span class="p">,</span> <span class="p">-</span><span class="mi">0x30</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">)</span>
    <span class="err">0</span><span class="nf">x100001d14</span> <span class="err">&lt;+</span><span class="mi">84</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">callq</span>  <span class="mi">0x100001df6</span>               <span class="c">; symbol stub for: swift_retain
</span><span class="c"></span>    <span class="mi">0x100001d19</span> <span class="err">&lt;+</span><span class="mi">89</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">movq</span>   <span class="p">-</span><span class="mi">0x28</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">),</span> <span class="nv">%rdi</span>
    <span class="err">0</span><span class="nf">x100001d1d</span> <span class="err">&lt;+</span><span class="mi">93</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">movq</span>   <span class="nv">%rax</span><span class="p">,</span> <span class="p">-</span><span class="mi">0x38</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">)</span>
    <span class="err">0</span><span class="nf">x100001d21</span> <span class="err">&lt;+</span><span class="mi">97</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">callq</span>  <span class="mi">0x100001df6</span>               <span class="c">; symbol stub for: swift_retain
</span><span class="c"></span>    <span class="c">; å°† rbp - 0x28 åœ°å€å†…å®¹ï¼ˆ0x000000010046d080ï¼‰ç§»åŠ¨åˆ° rcx å¯„å­˜å™¨
</span><span class="c"></span>    <span class="mi">0x100001d26</span> <span class="err">&lt;+</span><span class="mi">102</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">movq</span>   <span class="p">-</span><span class="mi">0x28</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">),</span> <span class="nv">%rcx</span>
    <span class="c">; å°† rcx å¯„å­˜å™¨å†…å®¹ï¼ˆ0x000000010046d080ï¼‰ç§»åŠ¨åˆ° rbp - 0x18 åœ°å€ï¼ˆ0x7FFEEFBFF508ï¼Œå³ foo2ï¼‰
</span><span class="c"></span>    <span class="err">0</span><span class="nf">x100001d2a</span> <span class="err">&lt;+</span><span class="mi">106</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">movq</span>   <span class="nv">%rcx</span><span class="p">,</span> <span class="p">-</span><span class="mi">0x18</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">)</span>
    <span class="c">; (lldb) x --size 8 --format x --count 4 0x7FFEEFBFF508
</span><span class="c"></span>    <span class="c">; 0x7ffeefbff508: 0x000000010046d080 0x000000010046d080
</span><span class="c"></span>    <span class="c">; 0x7ffeefbff518: 0x0000000000000000 0x00007ffeefbff540
</span><span class="c"></span>    <span class="c">; å› æ­¤æ­¤æ—¶ï¼Œfoo1 å’Œ foo2 ä¸­å­˜å‚¨äº†ç›¸åŒçš„å†…å­˜åœ°å€
</span><span class="c"></span>    <span class="err">0</span><span class="nf">x100001d2e</span> <span class="err">&lt;+</span><span class="mi">110</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">movq</span>   <span class="p">(</span><span class="nv">%rcx</span><span class="p">),</span> <span class="nv">%rdx</span>
    <span class="err">0</span><span class="nf">x100001d31</span> <span class="err">&lt;+</span><span class="mi">113</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">movq</span>   <span class="mi">0x68</span><span class="p">(</span><span class="nv">%rdx</span><span class="p">),</span> <span class="nv">%rdx</span>
    <span class="c">; å°†ç«‹å³æ•° 20 ç§»åŠ¨åˆ° edi å¯„å­˜å™¨
</span><span class="c"></span>    <span class="err">0</span><span class="nf">x100001d35</span> <span class="err">&lt;+</span><span class="mi">117</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">movl</span>   <span class="no">$0x14</span><span class="p">,</span> <span class="nv">%edi</span>
    <span class="err">0</span><span class="nf">x100001d3a</span> <span class="err">&lt;+</span><span class="mi">122</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">movq</span>   <span class="nv">%rcx</span><span class="p">,</span> <span class="nv">%r13</span>
    <span class="err">0</span><span class="nf">x100001d3d</span> <span class="err">&lt;+</span><span class="mi">125</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">movq</span>   <span class="nv">%rax</span><span class="p">,</span> <span class="p">-</span><span class="mi">0x40</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">)</span>
    <span class="c">; è§ä¸‹æ–‡
</span><span class="c"></span>    <span class="err">0</span><span class="nf">x100001d41</span> <span class="err">&lt;+</span><span class="mi">129</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">callq</span>  <span class="p">*</span><span class="nv">%rdx</span>
    <span class="err">0</span><span class="nf">x100001d43</span> <span class="err">&lt;+</span><span class="mi">131</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">movq</span>   <span class="p">-</span><span class="mi">0x28</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">),</span> <span class="nv">%rdi</span>
    <span class="err">0</span><span class="nf">x100001d47</span> <span class="err">&lt;+</span><span class="mi">135</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">callq</span>  <span class="mi">0x100001df0</span>               <span class="c">; symbol stub for: swift_release
</span><span class="c"></span>    <span class="mi">0x100001d4c</span> <span class="err">&lt;+</span><span class="mi">140</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">movq</span>   <span class="p">-</span><span class="mi">0x28</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">),</span> <span class="nv">%rax</span>
    <span class="err">0</span><span class="nf">x100001d50</span> <span class="err">&lt;+</span><span class="mi">144</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">movq</span>   <span class="p">(</span><span class="nv">%rax</span><span class="p">),</span> <span class="nv">%rcx</span>
    <span class="err">0</span><span class="nf">x100001d53</span> <span class="err">&lt;+</span><span class="mi">147</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">movq</span>   <span class="mi">0x80</span><span class="p">(</span><span class="nv">%rcx</span><span class="p">),</span> <span class="nv">%rcx</span>
    <span class="c">; å°†ç«‹å³æ•° 22 ç§»åŠ¨åˆ° edi å¯„å­˜å™¨ï¼ˆåŒç†ï¼‰
</span><span class="c"></span>    <span class="err">0</span><span class="nf">x100001d5a</span> <span class="err">&lt;+</span><span class="mi">154</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">movl</span>   <span class="no">$0x16</span><span class="p">,</span> <span class="nv">%edi</span>
    <span class="err">0</span><span class="nf">x100001d5f</span> <span class="err">&lt;+</span><span class="mi">159</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">movq</span>   <span class="nv">%rax</span><span class="p">,</span> <span class="nv">%r13</span>
    <span class="err">0</span><span class="nf">x100001d62</span> <span class="err">&lt;+</span><span class="mi">162</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">callq</span>  <span class="p">*</span><span class="nv">%rcx</span>
    <span class="err">0</span><span class="nf">x100001d64</span> <span class="err">&lt;+</span><span class="mi">164</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">movq</span>   <span class="p">-</span><span class="mi">0x28</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">),</span> <span class="nv">%rdi</span>
    <span class="err">0</span><span class="nf">x100001d68</span> <span class="err">&lt;+</span><span class="mi">168</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">callq</span>  <span class="mi">0x100001df0</span>               <span class="c">; symbol stub for: swift_release
</span><span class="c"></span>    <span class="mi">0x100001d6d</span> <span class="err">&lt;+</span><span class="mi">173</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">movq</span>   <span class="p">-</span><span class="mi">0x18</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">),</span> <span class="nv">%rdi</span>
    <span class="err">0</span><span class="nf">x100001d71</span> <span class="err">&lt;+</span><span class="mi">177</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">callq</span>  <span class="mi">0x100001df0</span>               <span class="c">; symbol stub for: swift_release
</span><span class="c"></span>    <span class="mi">0x100001d76</span> <span class="err">&lt;+</span><span class="mi">182</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">movq</span>   <span class="p">-</span><span class="mi">0x10</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">),</span> <span class="nv">%rdi</span>
    <span class="err">0</span><span class="nf">x100001d7a</span> <span class="err">&lt;+</span><span class="mi">186</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">callq</span>  <span class="mi">0x100001df0</span>               <span class="c">; symbol stub for: swift_release
</span><span class="c"></span>    <span class="mi">0x100001d7f</span> <span class="err">&lt;+</span><span class="mi">191</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">addq</span>   <span class="no">$0x38</span><span class="p">,</span> <span class="nv">%rsp</span>
    <span class="err">0</span><span class="nf">x100001d83</span> <span class="err">&lt;+</span><span class="mi">195</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">popq</span>   <span class="nv">%r13</span>
    <span class="err">0</span><span class="nf">x100001d85</span> <span class="err">&lt;+</span><span class="mi">197</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">popq</span>   <span class="nv">%rbp</span>
    <span class="err">0</span><span class="nf">x100001d86</span> <span class="err">&lt;+</span><span class="mi">198</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">retq</span>

<span class="c">; å°†æ–­ç‚¹åŠ åœ¨ `0x100000a9f &lt;+31&gt;: callq 0x100000c00` ä¸€è¡Œï¼Œå¹¶æ‰§è¡Œ `si`ï¼Œè¿›å…¥å‡½æ•°å†…éƒ¨ï¼š
</span><span class="c"></span><span class="nf">demo</span><span class="err">`</span><span class="no">Foo.__allocating_init</span><span class="p">(</span><span class="no">a</span><span class="err">ğŸ…±ï¸</span><span class="p">):</span>
<span class="err">-&gt;</span>  <span class="err">0</span><span class="nf">x100001b50</span> <span class="err">&lt;+</span><span class="mi">0</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">pushq</span>  <span class="nv">%rbp</span>
    <span class="err">0</span><span class="nf">x100001b51</span> <span class="err">&lt;+</span><span class="mi">1</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">movq</span>   <span class="nv">%rsp</span><span class="p">,</span> <span class="nv">%rbp</span>
    <span class="err">0</span><span class="nf">x100001b54</span> <span class="err">&lt;+</span><span class="mi">4</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">pushq</span>  <span class="nv">%r13</span>
    <span class="err">0</span><span class="nf">x100001b56</span> <span class="err">&lt;+</span><span class="mi">6</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">subq</span>   <span class="no">$0x18</span><span class="p">,</span> <span class="nv">%rsp</span>
    <span class="err">0</span><span class="nf">x100001b5a</span> <span class="err">&lt;+</span><span class="mi">10</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">movl</span>   <span class="no">$0x20</span><span class="p">,</span> <span class="nv">%eax</span>
    <span class="err">0</span><span class="nf">x100001b5f</span> <span class="err">&lt;+</span><span class="mi">15</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">movl</span>   <span class="no">$0x7</span><span class="p">,</span> <span class="nv">%edx</span>
    <span class="c">; (lldb) register read rdi =&gt; rdi = 0x000000000000000a
</span><span class="c"></span>    <span class="c">; (lldb) register read rsi =&gt; rsi = 0x000000000000000b
</span><span class="c"></span>    <span class="c">; (lldb) register read rbp =&gt; rbp = 0x00007ffeefbff4d0
</span><span class="c"></span>    <span class="c">; å°† rdi å¯„å­˜å™¨å†…å®¹ï¼ˆ10ï¼‰ç§»åŠ¨åˆ° rbp - 0x10 åœ°å€ï¼ˆ0x7FFEEFBFF4C0ï¼‰
</span><span class="c"></span>    <span class="err">0</span><span class="nf">x100001b64</span> <span class="err">&lt;+</span><span class="mi">20</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">movq</span>   <span class="nv">%rdi</span><span class="p">,</span> <span class="p">-</span><span class="mi">0x10</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">)</span>
    <span class="err">0</span><span class="nf">x100001b68</span> <span class="err">&lt;+</span><span class="mi">24</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">movq</span>   <span class="nv">%r13</span><span class="p">,</span> <span class="nv">%rdi</span>
    <span class="c">; å°† rsi å¯„å­˜å™¨å†…å®¹ï¼ˆ11ï¼‰ç§»åŠ¨åˆ° rbp - 0x18 åœ°å€ï¼ˆ0x7FFEEFBFF4B8ï¼‰
</span><span class="c"></span>    <span class="err">0</span><span class="nf">x100001b6b</span> <span class="err">&lt;+</span><span class="mi">27</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">movq</span>   <span class="nv">%rsi</span><span class="p">,</span> <span class="p">-</span><span class="mi">0x18</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">)</span>
    <span class="err">0</span><span class="nf">x100001b6f</span> <span class="err">&lt;+</span><span class="mi">31</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">movq</span>   <span class="nv">%rax</span><span class="p">,</span> <span class="nv">%rsi</span>
    <span class="err">0</span><span class="nf">x100001b72</span> <span class="err">&lt;+</span><span class="mi">34</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">callq</span>  <span class="mi">0x100001dd2</span>               <span class="c">; symbol stub for: swift_allocObject
</span><span class="c"></span>    <span class="c">; å°† rbp - 0x10 åœ°å€å†…å®¹ï¼ˆ10ï¼‰ç§»åŠ¨åˆ° rdi
</span><span class="c"></span>    <span class="mi">0x100001b77</span> <span class="err">&lt;+</span><span class="mi">39</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">movq</span>   <span class="p">-</span><span class="mi">0x10</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">),</span> <span class="nv">%rdi</span>
    <span class="c">; å°† rbp - 0x18 åœ°å€å†…å®¹ï¼ˆ11ï¼‰ç§»åŠ¨åˆ° rsi
</span><span class="c"></span>    <span class="err">0</span><span class="nf">x100001b7b</span> <span class="err">&lt;+</span><span class="mi">43</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">movq</span>   <span class="p">-</span><span class="mi">0x18</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">),</span> <span class="nv">%rsi</span>
    <span class="err">0</span><span class="nf">x100001b7f</span> <span class="err">&lt;+</span><span class="mi">47</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">movq</span>   <span class="nv">%rax</span><span class="p">,</span> <span class="nv">%r13</span>
    <span class="c">; æ„é€ å‡½æ•°è°ƒç”¨ï¼š
</span><span class="c"></span>    <span class="err">0</span><span class="nf">x100001b82</span> <span class="err">&lt;+</span><span class="mi">50</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">callq</span>  <span class="mi">0x100001b90</span>               <span class="c">; demo.Foo.init(a: Swift.Int, b: Swift.Int) -&gt; demo.Foo at main.swift:7
</span><span class="c"></span>    <span class="mi">0x100001b87</span> <span class="err">&lt;+</span><span class="mi">55</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">addq</span>   <span class="no">$0x18</span><span class="p">,</span> <span class="nv">%rsp</span>
    <span class="err">0</span><span class="nf">x100001b8b</span> <span class="err">&lt;+</span><span class="mi">59</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">popq</span>   <span class="nv">%r13</span>
    <span class="err">0</span><span class="nf">x100001b8d</span> <span class="err">&lt;+</span><span class="mi">61</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">popq</span>   <span class="nv">%rbp</span>
    <span class="err">0</span><span class="nf">x100001b8e</span> <span class="err">&lt;+</span><span class="mi">62</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">retq</span>

<span class="c">; å°†æ–­ç‚¹åŠ åœ¨ `0x100001b82 &lt;+50&gt;: callq  0x100001b90` ä¸€è¡Œï¼Œå¹¶æ‰§è¡Œ `si`ï¼Œè¿›å…¥å‡½æ•°å†…éƒ¨ï¼š
</span><span class="c"></span><span class="nf">demo</span><span class="err">`</span><span class="no">Foo.init</span><span class="p">(</span><span class="no">a</span><span class="err">ğŸ…±ï¸</span><span class="p">):</span>
<span class="err">-&gt;</span>  <span class="err">0</span><span class="nf">x100001b90</span> <span class="err">&lt;+</span><span class="mi">0</span><span class="err">&gt;</span><span class="p">:</span>   <span class="no">pushq</span>  <span class="nv">%rbp</span>
    <span class="err">0</span><span class="nf">x100001b91</span> <span class="err">&lt;+</span><span class="mi">1</span><span class="err">&gt;</span><span class="p">:</span>   <span class="no">movq</span>   <span class="nv">%rsp</span><span class="p">,</span> <span class="nv">%rbp</span>
    <span class="err">0</span><span class="nf">x100001b94</span> <span class="err">&lt;+</span><span class="mi">4</span><span class="err">&gt;</span><span class="p">:</span>   <span class="no">subq</span>   <span class="no">$0x80</span><span class="p">,</span> <span class="nv">%rsp</span>
    <span class="c">; æ¸…é›¶ï¼š
</span><span class="c"></span>    <span class="err">0</span><span class="nf">x100001b9b</span> <span class="err">&lt;+</span><span class="mi">11</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">movq</span>   <span class="no">$0x0</span><span class="p">,</span> <span class="p">-</span><span class="mi">0x8</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">)</span>
    <span class="err">0</span><span class="nf">x100001ba3</span> <span class="err">&lt;+</span><span class="mi">19</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">movq</span>   <span class="no">$0x0</span><span class="p">,</span> <span class="p">-</span><span class="mi">0x10</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">)</span>
    <span class="err">0</span><span class="nf">x100001bab</span> <span class="err">&lt;+</span><span class="mi">27</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">movq</span>   <span class="no">$0x0</span><span class="p">,</span> <span class="p">-</span><span class="mi">0x18</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">)</span>
    <span class="c">; å‚æ•°å±€éƒ¨å˜é‡åŒ–ï¼š
</span><span class="c"></span>    <span class="c">; ç¬¬ä¸€ä¸ªå‚æ•° 10 ä» rdi è½¬ç§»åˆ° rbp - 0x8 åœ°å€
</span><span class="c"></span>    <span class="err">0</span><span class="nf">x100001bb3</span> <span class="err">&lt;+</span><span class="mi">35</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">movq</span>   <span class="nv">%rdi</span><span class="p">,</span> <span class="p">-</span><span class="mi">0x8</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">)</span>
    <span class="c">; ç¬¬äºŒä¸ªå‚æ•° 11 ä» rsi è½¬ç§»åˆ° rbp - 0x10 åœ°å€
</span><span class="c"></span>    <span class="err">0</span><span class="nf">x100001bb7</span> <span class="err">&lt;+</span><span class="mi">39</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">movq</span>   <span class="nv">%rsi</span><span class="p">,</span> <span class="p">-</span><span class="mi">0x10</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">)</span>
    <span class="c">; ...
</span><span class="c"></span>
<span class="c">; å°†æ–­ç‚¹åŠ åœ¨ `0x100001d41 &lt;+129&gt;: callq  *%rdx` ä¸€è¡Œï¼Œå¹¶æ‰§è¡Œ `si`ï¼Œè¿›å…¥å‡½æ•°å†…éƒ¨ï¼š
</span><span class="c"></span><span class="nf">demo</span><span class="err">`</span><span class="no">Foo.a.setter</span><span class="p">:</span>
<span class="err">-&gt;</span>  <span class="err">0</span><span class="nf">x1000018d0</span> <span class="err">&lt;+</span><span class="mi">0</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">pushq</span>  <span class="nv">%rbp</span>
    <span class="err">0</span><span class="nf">x1000018d1</span> <span class="err">&lt;+</span><span class="mi">1</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">movq</span>   <span class="nv">%rsp</span><span class="p">,</span> <span class="nv">%rbp</span>
    <span class="err">0</span><span class="nf">x1000018d4</span> <span class="err">&lt;+</span><span class="mi">4</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">subq</span>   <span class="no">$0x40</span><span class="p">,</span> <span class="nv">%rsp</span>
    <span class="err">0</span><span class="nf">x1000018d8</span> <span class="err">&lt;+</span><span class="mi">8</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">movq</span>   <span class="nv">%r13</span><span class="p">,</span> <span class="nv">%rax</span>
    <span class="err">0</span><span class="nf">x1000018db</span> <span class="err">&lt;+</span><span class="mi">11</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">addq</span>   <span class="no">$0x10</span><span class="p">,</span> <span class="nv">%rax</span>
    <span class="err">0</span><span class="nf">x1000018df</span> <span class="err">&lt;+</span><span class="mi">15</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">xorl</span>   <span class="nv">%ecx</span><span class="p">,</span> <span class="nv">%ecx</span>
    <span class="err">0</span><span class="nf">x1000018e1</span> <span class="err">&lt;+</span><span class="mi">17</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">leaq</span>   <span class="p">-</span><span class="mi">0x18</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">),</span> <span class="nv">%rdx</span>
    <span class="err">0</span><span class="nf">x1000018e5</span> <span class="err">&lt;+</span><span class="mi">21</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">movl</span>   <span class="no">$0x21</span><span class="p">,</span> <span class="nv">%esi</span>
    <span class="c">; (lldb) register read rdi =&gt; rdi = 0x0000000000000014
</span><span class="c"></span>    <span class="c">; (lldb) register read rbp =&gt; rbp = 0x00007ffeefbff4d0
</span><span class="c"></span>    <span class="c">; å°† rdi å¯„å­˜å™¨å†…å®¹ï¼ˆ14ï¼‰ç§»åŠ¨åˆ° rbp - 0x20 åœ°å€
</span><span class="c"></span>    <span class="err">0</span><span class="nf">x1000018ea</span> <span class="err">&lt;+</span><span class="mi">26</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">movq</span>   <span class="nv">%rdi</span><span class="p">,</span> <span class="p">-</span><span class="mi">0x20</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">)</span>
    <span class="err">0</span><span class="nf">x1000018ee</span> <span class="err">&lt;+</span><span class="mi">30</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">movq</span>   <span class="nv">%rax</span><span class="p">,</span> <span class="nv">%rdi</span>
    <span class="err">0</span><span class="nf">x1000018f1</span> <span class="err">&lt;+</span><span class="mi">33</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">movq</span>   <span class="nv">%rsi</span><span class="p">,</span> <span class="p">-</span><span class="mi">0x28</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">)</span>
    <span class="err">0</span><span class="nf">x1000018f5</span> <span class="err">&lt;+</span><span class="mi">37</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">movq</span>   <span class="nv">%rdx</span><span class="p">,</span> <span class="nv">%rsi</span>
    <span class="err">0</span><span class="nf">x1000018f8</span> <span class="err">&lt;+</span><span class="mi">40</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">movq</span>   <span class="p">-</span><span class="mi">0x28</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">),</span> <span class="nv">%rax</span>
    <span class="err">0</span><span class="nf">x1000018fc</span> <span class="err">&lt;+</span><span class="mi">44</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">movq</span>   <span class="nv">%rdx</span><span class="p">,</span> <span class="p">-</span><span class="mi">0x30</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">)</span>
    <span class="err">0</span><span class="nf">x100001900</span> <span class="err">&lt;+</span><span class="mi">48</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">movq</span>   <span class="nv">%rax</span><span class="p">,</span> <span class="nv">%rdx</span>
    <span class="err">0</span><span class="nf">x100001903</span> <span class="err">&lt;+</span><span class="mi">51</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">movq</span>   <span class="nv">%r13</span><span class="p">,</span> <span class="p">-</span><span class="mi">0x38</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">)</span>
    <span class="err">0</span><span class="nf">x100001907</span> <span class="err">&lt;+</span><span class="mi">55</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">callq</span>  <span class="mi">0x100001dd8</span>               <span class="c">; symbol stub for: swift_beginAccess
</span><span class="c"></span>    <span class="c">; å°† rbp - 0x38 åœ°å€ï¼ˆ0x7FFEEFBFF498ï¼‰å†…å®¹ï¼ˆ0x000000010046d080ï¼Œfoo1 å’Œ foo2 æŒ‡å‘çš„å†…å­˜ç©ºé—´åœ°å€ï¼‰ç§»åŠ¨åˆ° rax å¯„å­˜å™¨
</span><span class="c"></span>    <span class="mi">0x10000190c</span> <span class="err">&lt;+</span><span class="mi">60</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">movq</span>   <span class="p">-</span><span class="mi">0x38</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">),</span> <span class="nv">%rax</span>
    <span class="c">; å°† rbp - 0x20 åœ°å€å†…å®¹ï¼ˆ14ï¼‰ç§»åŠ¨åˆ° rcx å¯„å­˜å™¨
</span><span class="c"></span>    <span class="err">0</span><span class="nf">x100001910</span> <span class="err">&lt;+</span><span class="mi">64</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">movq</span>   <span class="p">-</span><span class="mi">0x20</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">),</span> <span class="nv">%rcx</span>
    <span class="c">; å°† rcx å¯„å­˜å™¨å†…å®¹ï¼ˆ14ï¼‰ç§»åŠ¨åˆ° rax + 0x10ï¼ˆ0x10046D090ï¼‰
</span><span class="c"></span>    <span class="err">0</span><span class="nf">x100001914</span> <span class="err">&lt;+</span><span class="mi">68</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">movq</span>   <span class="nv">%rcx</span><span class="p">,</span> <span class="mi">0x10</span><span class="p">(</span><span class="nv">%rax</span><span class="p">)</span>
    <span class="c">; (lldb) x --size 8 --format x --count 4 0x000000010046d080
</span><span class="c"></span>    <span class="c">; 0x10046d080: 0x0000000100003150 0x0000000600000002
</span><span class="c"></span>    <span class="c">; 0x10046d090: 0x0000000000000014 0x000000000000000b
</span><span class="c"></span>    <span class="err">0</span><span class="nf">x100001918</span> <span class="err">&lt;+</span><span class="mi">72</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">movq</span>   <span class="p">-</span><span class="mi">0x30</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">),</span> <span class="nv">%rdi</span>
    <span class="err">0</span><span class="nf">x10000191c</span> <span class="err">&lt;+</span><span class="mi">76</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">callq</span>  <span class="mi">0x100001de4</span>               <span class="c">; symbol stub for: swift_endAccess
</span><span class="c"></span>    <span class="mi">0x100001921</span> <span class="err">&lt;+</span><span class="mi">81</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">addq</span>   <span class="no">$0x40</span><span class="p">,</span> <span class="nv">%rsp</span>
    <span class="err">0</span><span class="nf">x100001925</span> <span class="err">&lt;+</span><span class="mi">85</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">popq</span>   <span class="nv">%rbp</span>
    <span class="err">0</span><span class="nf">x100001926</span> <span class="err">&lt;+</span><span class="mi">86</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">retq</span>
</code></pre></div><p>å½“å¯¹è±¡åˆå§‹åŒ–åå°†é€šè¿‡ <code>rax</code> è¿”å›ç»™æŒ‡é’ˆå˜é‡ï¼Œå†é€šè¿‡ <code>rax</code> åç§»å»æ”¹å˜å †ç©ºé—´ä¸­çš„å€¼ï¼Œå› æ­¤å†…å­˜åœ°å€æ ¼å¼ä¸ºï¼š<code>0x10(%rax)</code> çš„å˜é‡ä¸€èˆ¬æ˜¯å †ç©ºé—´ã€‚</p>
<h2 id="å‡½æ•°">å‡½æ•°</h2>
<h3 id="å‡½æ•°å‚æ•°">å‡½æ•°å‚æ•°</h3>
<div class="highlight"><pre class="chroma"><code class="language-swift" data-lang="swift"><span class="c1">// main.swift</span>

<span class="kd">func</span> <span class="nf">baz</span><span class="p">(</span><span class="kc">_</span> <span class="n">a</span><span class="p">:</span> <span class="nb">Int</span><span class="p">,</span> <span class="kc">_</span> <span class="n">b</span><span class="p">:</span> <span class="nb">Int</span><span class="p">,</span> <span class="kc">_</span> <span class="n">c</span><span class="p">:</span> <span class="nb">Int</span><span class="p">,</span> <span class="kc">_</span> <span class="n">d</span><span class="p">:</span> <span class="nb">Int</span><span class="p">,</span> <span class="kc">_</span> <span class="n">e</span><span class="p">:</span> <span class="nb">Int</span><span class="p">,</span>
         <span class="kc">_</span> <span class="n">f</span><span class="p">:</span> <span class="nb">Int</span><span class="p">,</span> <span class="kc">_</span> <span class="n">g</span><span class="p">:</span> <span class="nb">Int</span><span class="p">,</span> <span class="kc">_</span> <span class="n">h</span><span class="p">:</span> <span class="nb">Int</span><span class="p">,</span> <span class="kc">_</span> <span class="n">i</span><span class="p">:</span> <span class="nb">Int</span><span class="p">,</span> <span class="kc">_</span> <span class="n">j</span><span class="p">:</span> <span class="nb">Int</span><span class="p">)</span> <span class="p">{</span>

<span class="p">}</span>

<span class="n">baz</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span> <span class="c1">// BREAKPOINT ğŸ”´</span>
</code></pre></div><p>å®šä¹‰ä¸€ä¸ªéœ€è¦ 10 ä¸ªå‚æ•°çš„å‡½æ•°ï¼Œæˆ‘ä»¬å°è¯•ä»æ±‡ç¼–åº•å±‚çœ‹ä¸€ä¸‹è¿™ä¸ªè¿‡ç¨‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-asm" data-lang="asm"><span class="nf">demo</span><span class="err">`</span><span class="no">main</span><span class="p">:</span>
    <span class="err">0</span><span class="nf">x100000ea0</span> <span class="err">&lt;+</span><span class="mi">0</span><span class="err">&gt;</span><span class="p">:</span>   <span class="no">pushq</span>  <span class="nv">%rbp</span>
    <span class="err">0</span><span class="nf">x100000ea1</span> <span class="err">&lt;+</span><span class="mi">1</span><span class="err">&gt;</span><span class="p">:</span>   <span class="no">movq</span>   <span class="nv">%rsp</span><span class="p">,</span> <span class="nv">%rbp</span>
    <span class="err">0</span><span class="nf">x100000ea4</span> <span class="err">&lt;+</span><span class="mi">4</span><span class="err">&gt;</span><span class="p">:</span>   <span class="no">subq</span>   <span class="no">$0x30</span><span class="p">,</span> <span class="nv">%rsp</span>
    <span class="c">; ç¬¬ä¸€ä¸ªå‚æ•°å…ˆæ”¾åœ¨ eaxï¼ˆrax çš„ä½ 32 ä½ï¼‰
</span><span class="c"></span><span class="err">-&gt;</span>  <span class="err">0</span><span class="nf">x100000ea8</span> <span class="err">&lt;+</span><span class="mi">8</span><span class="err">&gt;</span><span class="p">:</span>   <span class="no">movl</span>   <span class="no">$0x1</span><span class="p">,</span> <span class="nv">%eax</span>
    <span class="err">0</span><span class="nf">x100000ead</span> <span class="err">&lt;+</span><span class="mi">13</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">movl</span>   <span class="nv">%edi</span><span class="p">,</span> <span class="p">-</span><span class="mi">0x4</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">)</span>
    <span class="c">; ç¬¬ä¸€ä¸ªå‚æ•°ä» rax è½¬ç§»åˆ° rdi
</span><span class="c"></span>    <span class="err">0</span><span class="nf">x100000eb0</span> <span class="err">&lt;+</span><span class="mi">16</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">movq</span>   <span class="nv">%rax</span><span class="p">,</span> <span class="nv">%rdi</span>
    <span class="c">; ç¬¬äºŒä¸ªå‚æ•°å…ˆæ”¾åœ¨ eaxï¼ˆrax çš„ä½ 32 ä½ï¼‰
</span><span class="c"></span>    <span class="err">0</span><span class="nf">x100000eb3</span> <span class="err">&lt;+</span><span class="mi">19</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">movl</span>   <span class="no">$0x2</span><span class="p">,</span> <span class="nv">%eax</span>
    <span class="err">0</span><span class="nf">x100000eb8</span> <span class="err">&lt;+</span><span class="mi">24</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">movq</span>   <span class="nv">%rsi</span><span class="p">,</span> <span class="p">-</span><span class="mi">0x10</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">)</span>
    <span class="c">; ç¬¬äºŒä¸ªå‚æ•°ä» rax è½¬ç§»åˆ° rsi
</span><span class="c"></span>    <span class="err">0</span><span class="nf">x100000ebc</span> <span class="err">&lt;+</span><span class="mi">28</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">movq</span>   <span class="nv">%rax</span><span class="p">,</span> <span class="nv">%rsi</span>
    <span class="c">; ç¬¬ä¸‰ä¸ªå‚æ•°æ”¾åœ¨ edxï¼ˆrdx çš„ä½ 32 ä½ï¼‰
</span><span class="c"></span>    <span class="err">0</span><span class="nf">x100000ebf</span> <span class="err">&lt;+</span><span class="mi">31</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">movl</span>   <span class="no">$0x3</span><span class="p">,</span> <span class="nv">%edx</span>
    <span class="c">; ç¬¬å››ä¸ªå‚æ•°æ”¾åœ¨ ecxï¼ˆrcx çš„ä½ 32 ä½ï¼‰
</span><span class="c"></span>    <span class="err">0</span><span class="nf">x100000ec4</span> <span class="err">&lt;+</span><span class="mi">36</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">movl</span>   <span class="no">$0x4</span><span class="p">,</span> <span class="nv">%ecx</span>
    <span class="c">; ç¬¬äº”ä¸ªå‚æ•°æ”¾åœ¨ r8dï¼ˆr8 çš„ä½ 32 ä½ï¼‰
</span><span class="c"></span>    <span class="err">0</span><span class="nf">x100000ec9</span> <span class="err">&lt;+</span><span class="mi">41</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">movl</span>   <span class="no">$0x5</span><span class="p">,</span> <span class="nv">%r8d</span>
    <span class="c">; ç¬¬å…­ä¸ªå‚æ•°æ”¾åœ¨ r9dï¼ˆr9 çš„ä½ 32 ä½ï¼‰
</span><span class="c"></span>    <span class="err">0</span><span class="nf">x100000ecf</span> <span class="err">&lt;+</span><span class="mi">47</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">movl</span>   <span class="no">$0x6</span><span class="p">,</span> <span class="nv">%r9d</span>
    <span class="c">; ç¬¬ä¸ƒä¸ªå‚æ•°æ”¾åœ¨ rspï¼ˆ(lldb) register read rsp =&gt; rsp = 0x00007ffeefbff510ï¼‰
</span><span class="c"></span>    <span class="err">0</span><span class="nf">x100000ed5</span> <span class="err">&lt;+</span><span class="mi">53</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">movq</span>   <span class="no">$0x7</span><span class="p">,</span> <span class="p">(</span><span class="nv">%rsp</span><span class="p">)</span>
    <span class="c">; ç¬¬å…«ä¸ªå‚æ•°æ”¾åœ¨ rsp + 0x8 åœ°å€ï¼ˆ0x7FFEEFBFF518ï¼‰
</span><span class="c"></span>    <span class="err">0</span><span class="nf">x100000edd</span> <span class="err">&lt;+</span><span class="mi">61</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">movq</span>   <span class="no">$0x8</span><span class="p">,</span> <span class="mi">0x8</span><span class="p">(</span><span class="nv">%rsp</span><span class="p">)</span>
    <span class="c">; ç¬¬ä¹ä¸ªå‚æ•°æ”¾åœ¨ rsp + 0x10 åœ°å€ï¼ˆ0x7FFEEFBFF520ï¼‰
</span><span class="c"></span>    <span class="err">0</span><span class="nf">x100000ee6</span> <span class="err">&lt;+</span><span class="mi">70</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">movq</span>   <span class="no">$0x9</span><span class="p">,</span> <span class="mi">0x10</span><span class="p">(</span><span class="nv">%rsp</span><span class="p">)</span>
    <span class="c">; ç¬¬åä¸ªå‚æ•°æ”¾åœ¨ rsp + 0x18 åœ°å€ï¼ˆ0x7FFEEFBFF528ï¼‰
</span><span class="c"></span>    <span class="err">0</span><span class="nf">x100000eef</span> <span class="err">&lt;+</span><span class="mi">79</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">movq</span>   <span class="no">$0xa</span><span class="p">,</span> <span class="mi">0x18</span><span class="p">(</span><span class="nv">%rsp</span><span class="p">)</span>
    <span class="c">; å‡½æ•°è°ƒç”¨
</span><span class="c"></span>    <span class="err">0</span><span class="nf">x100000ef8</span> <span class="err">&lt;+</span><span class="mi">88</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">callq</span>  <span class="mi">0x100000f10</span>               <span class="c">; demo.baz(Swift.Int, Swift.Int, Swift.Int, Swift.Int, Swift.Int, Swift.Int, Swift.Int, Swift.Int, Swift.Int, Swift.Int) -&gt; () at main.swift:1
</span><span class="c"></span>    <span class="mi">0x100000efd</span> <span class="err">&lt;+</span><span class="mi">93</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">xorl</span>   <span class="nv">%eax</span><span class="p">,</span> <span class="nv">%eax</span>
    <span class="err">0</span><span class="nf">x100000eff</span> <span class="err">&lt;+</span><span class="mi">95</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">addq</span>   <span class="no">$0x30</span><span class="p">,</span> <span class="nv">%rsp</span>
    <span class="err">0</span><span class="nf">x100000f03</span> <span class="err">&lt;+</span><span class="mi">99</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">popq</span>   <span class="nv">%rbp</span>
    <span class="err">0</span><span class="nf">x100000f04</span> <span class="err">&lt;+</span><span class="mi">100</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">retq</span>
</code></pre></div><p>ç”±ä¸Šæˆ‘ä»¬å¯ä»¥å¾—å‡ºï¼š<code>rdi</code>ï¼ˆ<code>edi</code>ï¼‰ã€<code>rsi</code>ï¼ˆ<code>esi</code>ï¼‰ã€<code>rdx</code>ï¼ˆ<code>edx</code>ï¼‰ã€<code>rcx</code>ï¼ˆ<code>ecx</code>ï¼‰ã€<code>r8</code>ï¼ˆ<code>r8d</code>ï¼‰ã€<code>r9</code>ï¼ˆ<code>r9d</code>ï¼‰å¯„å­˜å™¨å°†ä¾æ¬¡å­˜æ”¾å‡½æ•°å‚æ•°ï¼Œå½“ä»¥ä¸Šå¯„å­˜å™¨ä¸ªæ•°ä»ä¸æ»¡è¶³å‡½æ•°å‚æ•°ä¸ªæ•°æ—¶ï¼Œå°†ä» <code>rsp</code> å¼€å§‹æ”¾ç½®å‡½æ•°å‚ï¼ˆå…¶å® <code>rsp</code> æ˜¯å‡½æ•°æ ˆç©ºé—´çš„æ ˆåº•ï¼Œè¯¦è§ä¸‹æ–‡ï¼‰ã€‚å°†æ–­ç‚¹åŠ åœ¨ <code>0x100000ef8 &lt;+88&gt;: callq 0x100000f10</code> ä¸€è¡Œï¼Œå¹¶æ‰§è¡Œ <code>si</code>ï¼Œè¿›å…¥å‡½æ•°å†…éƒ¨ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-asm" data-lang="asm"><span class="nf">demo</span><span class="err">`</span><span class="no">baz</span><span class="p">(</span><span class="no">_</span><span class="p">:</span><span class="no">_</span><span class="p">:</span><span class="no">_</span><span class="p">:</span><span class="no">_</span><span class="p">:</span><span class="no">_</span><span class="p">:</span><span class="no">_</span><span class="p">:</span><span class="no">_</span><span class="p">:</span><span class="no">_</span><span class="p">:</span><span class="no">_</span><span class="p">:</span><span class="no">_</span><span class="p">:):</span>
    <span class="c">; è°ƒç”¨å¸§å…¥æ ˆ
</span><span class="c"></span><span class="err">-&gt;</span>  <span class="err">0</span><span class="nf">x100000f10</span> <span class="err">&lt;+</span><span class="mi">0</span><span class="err">&gt;</span><span class="p">:</span>   <span class="no">pushq</span>  <span class="nv">%rbp</span>
    <span class="c">; åˆ‡æ¢æ ˆå¸§åˆ°å½“å‰æ ˆå¸§
</span><span class="c"></span>    <span class="err">0</span><span class="nf">x100000f11</span> <span class="err">&lt;+</span><span class="mi">1</span><span class="err">&gt;</span><span class="p">:</span>   <span class="no">movq</span>   <span class="nv">%rsp</span><span class="p">,</span> <span class="nv">%rbp</span>
    <span class="c">; (lldb) register read rbp =&gt; rbp = 0x00007ffeefbff500
</span><span class="c"></span>    <span class="err">0</span><span class="nf">x100000f14</span> <span class="err">&lt;+</span><span class="mi">4</span><span class="err">&gt;</span><span class="p">:</span>   <span class="no">pushq</span>  <span class="nv">%rbx</span>
    <span class="c">; (lldb) register read rsp =&gt; rsp = 0x00007ffeefbff4f8
</span><span class="c"></span>    <span class="c">; rbp + 0x28ï¼ˆ0x7FFEEFBFF528ï¼Œå³ç¬¬åä¸ªå‚æ•° 10ï¼‰è½¬ç§»åˆ° rax
</span><span class="c"></span>    <span class="err">0</span><span class="nf">x100000f15</span> <span class="err">&lt;+</span><span class="mi">5</span><span class="err">&gt;</span><span class="p">:</span>   <span class="no">movq</span>   <span class="mi">0x28</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">),</span> <span class="nv">%rax</span>
    <span class="c">; rbp + 0x20ï¼ˆ0x7FFEEFBFF520ï¼Œå³ç¬¬ä¹ä¸ªå‚æ•° 9ï¼‰è½¬ç§»åˆ° r10
</span><span class="c"></span>    <span class="err">0</span><span class="nf">x100000f19</span> <span class="err">&lt;+</span><span class="mi">9</span><span class="err">&gt;</span><span class="p">:</span>   <span class="no">movq</span>   <span class="mi">0x20</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">),</span> <span class="nv">%r10</span>
    <span class="c">; rbp + 0x18ï¼ˆ0x7FFEEFBFF518ï¼Œå³ç¬¬å…«ä¸ªå‚æ•° 8ï¼‰è½¬ç§»åˆ° r11
</span><span class="c"></span>    <span class="err">0</span><span class="nf">x100000f1d</span> <span class="err">&lt;+</span><span class="mi">13</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">movq</span>   <span class="mi">0x18</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">),</span> <span class="nv">%r11</span>
    <span class="c">; rbp + 0x10ï¼ˆ0x7FFEEFBFF510ï¼Œå³ç¬¬ä¸ƒä¸ªå‚æ•° 7ï¼‰è½¬ç§»åˆ° rbx
</span><span class="c"></span>    <span class="err">0</span><span class="nf">x100000f21</span> <span class="err">&lt;+</span><span class="mi">17</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">movq</span>   <span class="mi">0x10</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">),</span> <span class="nv">%rbx</span>
    <span class="c">; æ¸…é›¶ï¼š
</span><span class="c"></span>    <span class="err">0</span><span class="nf">x100000f25</span> <span class="err">&lt;+</span><span class="mi">21</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">movq</span>   <span class="no">$0x0</span><span class="p">,</span> <span class="p">-</span><span class="mi">0x10</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">)</span>
    <span class="err">0</span><span class="nf">x100000f2d</span> <span class="err">&lt;+</span><span class="mi">29</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">movq</span>   <span class="no">$0x0</span><span class="p">,</span> <span class="p">-</span><span class="mi">0x18</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">)</span>
    <span class="err">0</span><span class="nf">x100000f35</span> <span class="err">&lt;+</span><span class="mi">37</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">movq</span>   <span class="no">$0x0</span><span class="p">,</span> <span class="p">-</span><span class="mi">0x20</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">)</span>
    <span class="err">0</span><span class="nf">x100000f3d</span> <span class="err">&lt;+</span><span class="mi">45</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">movq</span>   <span class="no">$0x0</span><span class="p">,</span> <span class="p">-</span><span class="mi">0x28</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">)</span>
    <span class="err">0</span><span class="nf">x100000f45</span> <span class="err">&lt;+</span><span class="mi">53</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">movq</span>   <span class="no">$0x0</span><span class="p">,</span> <span class="p">-</span><span class="mi">0x30</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">)</span>
    <span class="err">0</span><span class="nf">x100000f4d</span> <span class="err">&lt;+</span><span class="mi">61</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">movq</span>   <span class="no">$0x0</span><span class="p">,</span> <span class="p">-</span><span class="mi">0x38</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">)</span>
    <span class="err">0</span><span class="nf">x100000f55</span> <span class="err">&lt;+</span><span class="mi">69</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">movq</span>   <span class="no">$0x0</span><span class="p">,</span> <span class="p">-</span><span class="mi">0x40</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">)</span>
    <span class="err">0</span><span class="nf">x100000f5d</span> <span class="err">&lt;+</span><span class="mi">77</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">movq</span>   <span class="no">$0x0</span><span class="p">,</span> <span class="p">-</span><span class="mi">0x48</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">)</span>
    <span class="err">0</span><span class="nf">x100000f65</span> <span class="err">&lt;+</span><span class="mi">85</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">movq</span>   <span class="no">$0x0</span><span class="p">,</span> <span class="p">-</span><span class="mi">0x50</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">)</span>
    <span class="err">0</span><span class="nf">x100000f6d</span> <span class="err">&lt;+</span><span class="mi">93</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">movq</span>   <span class="no">$0x0</span><span class="p">,</span> <span class="p">-</span><span class="mi">0x58</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">)</span>
    <span class="c">; å‚æ•°å±€éƒ¨å˜é‡åŒ–ï¼š
</span><span class="c"></span>    <span class="c">; ç¬¬ä¸€ä¸ªå‚æ•°ä» rdi è½¬ç§»åˆ° rbp - 0x10 åœ°å€ï¼ˆ0x7FFEEFBFF4F0ï¼Œé«˜åœ°å€ï¼‰
</span><span class="c"></span>    <span class="err">0</span><span class="nf">x100000f75</span> <span class="err">&lt;+</span><span class="mi">101</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">movq</span>   <span class="nv">%rdi</span><span class="p">,</span> <span class="p">-</span><span class="mi">0x10</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">)</span>
    <span class="c">; ç¬¬äºŒä¸ªå‚æ•°ä» rsi è½¬ç§»åˆ° rbp - 0x18 åœ°å€ï¼ˆ0x7FFEEFBFF4E8ï¼‰
</span><span class="c"></span>    <span class="err">0</span><span class="nf">x100000f79</span> <span class="err">&lt;+</span><span class="mi">105</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">movq</span>   <span class="nv">%rsi</span><span class="p">,</span> <span class="p">-</span><span class="mi">0x18</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">)</span>
    <span class="c">; ç¬¬ä¸‰ä¸ªå‚æ•°ä» rdx è½¬ç§»åˆ° rbp - 0x20 åœ°å€ï¼ˆ0x7FFEEFBFF4E0ï¼‰
</span><span class="c"></span>    <span class="err">0</span><span class="nf">x100000f7d</span> <span class="err">&lt;+</span><span class="mi">109</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">movq</span>   <span class="nv">%rdx</span><span class="p">,</span> <span class="p">-</span><span class="mi">0x20</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">)</span>
    <span class="c">; ç¬¬å››ä¸ªå‚æ•°ä» rcx è½¬ç§»åˆ° rbp - 0x28 åœ°å€ï¼ˆ0x7FFEEFBFF4D8ï¼‰
</span><span class="c"></span>    <span class="err">0</span><span class="nf">x100000f81</span> <span class="err">&lt;+</span><span class="mi">113</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">movq</span>   <span class="nv">%rcx</span><span class="p">,</span> <span class="p">-</span><span class="mi">0x28</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">)</span>
    <span class="c">; ç¬¬äº”ä¸ªå‚æ•°ä» r8 è½¬ç§»åˆ° rbp - 0x30 åœ°å€ï¼ˆ0x7FFEEFBFF4D0ï¼‰
</span><span class="c"></span>    <span class="err">0</span><span class="nf">x100000f85</span> <span class="err">&lt;+</span><span class="mi">117</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">movq</span>   <span class="nv">%r8</span><span class="p">,</span> <span class="p">-</span><span class="mi">0x30</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">)</span>
    <span class="c">; ç¬¬å…­ä¸ªå‚æ•°ä» r9 è½¬ç§»åˆ° rbp - 0x38 åœ°å€ï¼ˆ0x7FFEEFBFF4C8ï¼‰
</span><span class="c"></span>    <span class="err">0</span><span class="nf">x100000f89</span> <span class="err">&lt;+</span><span class="mi">121</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">movq</span>   <span class="nv">%r9</span><span class="p">,</span> <span class="p">-</span><span class="mi">0x38</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">)</span>
    <span class="c">; ç¬¬ä¸ƒä¸ªå‚æ•°ä» rbx è½¬ç§»åˆ° rbp - 0x40 åœ°å€ï¼ˆ0x7FFEEFBFF4C0ï¼‰
</span><span class="c"></span>    <span class="err">0</span><span class="nf">x100000f8d</span> <span class="err">&lt;+</span><span class="mi">125</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">movq</span>   <span class="nv">%rbx</span><span class="p">,</span> <span class="p">-</span><span class="mi">0x40</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">)</span>
    <span class="c">; ç¬¬å…«ä¸ªå‚æ•°ä» r11 è½¬ç§»åˆ° rbp - 0x48 åœ°å€ï¼ˆ0x7FFEEFBFF4B8ï¼‰
</span><span class="c"></span>    <span class="err">0</span><span class="nf">x100000f91</span> <span class="err">&lt;+</span><span class="mi">129</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">movq</span>   <span class="nv">%r11</span><span class="p">,</span> <span class="p">-</span><span class="mi">0x48</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">)</span>
    <span class="c">; ç¬¬ä¹ä¸ªå‚æ•°ä» r10 è½¬ç§»åˆ° rbp - 0x50 åœ°å€ï¼ˆ0x7FFEEFBFF4B0ï¼‰
</span><span class="c"></span>    <span class="err">0</span><span class="nf">x100000f95</span> <span class="err">&lt;+</span><span class="mi">133</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">movq</span>   <span class="nv">%r10</span><span class="p">,</span> <span class="p">-</span><span class="mi">0x50</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">)</span>
    <span class="c">; ç¬¬åä¸ªå‚æ•°ä» rax è½¬ç§»åˆ° rbp - 0x58 åœ°å€ï¼ˆ0x7FFEEFBFF4A8ï¼Œä½åœ°å€ï¼‰
</span><span class="c"></span>    <span class="err">0</span><span class="nf">x100000f99</span> <span class="err">&lt;+</span><span class="mi">137</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">movq</span>   <span class="nv">%rax</span><span class="p">,</span> <span class="p">-</span><span class="mi">0x58</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">)</span>
    <span class="err">0</span><span class="nf">x100000f9d</span> <span class="err">&lt;+</span><span class="mi">141</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">popq</span>   <span class="nv">%rbx</span>
    <span class="err">0</span><span class="nf">x100000f9e</span> <span class="err">&lt;+</span><span class="mi">142</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">popq</span>   <span class="nv">%rbp</span>
    <span class="err">0</span><span class="nf">x100000f9f</span> <span class="err">&lt;+</span><span class="mi">143</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">retq</span>
</code></pre></div><p><code>rbp</code>ï¼ˆ<code>(lldb) register read rbp =&gt; rbp = 0x00007ffeefbff500</code>ï¼Œé«˜åœ°å€ï¼Œæ ˆåº•ï¼‰ä¸ <code>rsp</code>ï¼ˆ<code>(lldb) register read rsp =&gt; rsp = 0x00007ffeefbff4f8</code>ï¼Œä½åœ°å€ï¼Œæ ˆé¡¶ï¼‰å¯„å­˜å™¨ä¹‹é—´ä¸ºå‡½æ•°çš„æ ˆç©ºé—´ï¼Œå³æ ˆå¸§ã€‚å‡½æ•°å‚æ•°å±€éƒ¨å˜é‡åŒ–æ—¶ï¼Œå°†ä¾æ¬¡ä»é«˜åœ°å€æ’åˆ—è‡³ä½åœ°å€ï¼Œå³å…¥æ ˆã€‚</p>
<h3 id="å‡½æ•°è¿”å›å€¼">å‡½æ•°è¿”å›å€¼</h3>
<div class="highlight"><pre class="chroma"><code class="language-swift" data-lang="swift"><span class="c1">// main.swift</span>

<span class="kd">func</span> <span class="nf">baz</span><span class="p">()</span> <span class="p">-&gt;</span> <span class="nb">Int</span> <span class="p">{</span>
    <span class="k">return</span> <span class="mi">10</span>
<span class="p">}</span>

<span class="kc">_</span> <span class="p">=</span> <span class="n">baz</span><span class="p">()</span>
</code></pre></div><p>å®šä¹‰ä¸€ä¸ªéœ€è¦è¿”å›å€¼çš„å‡½æ•°ï¼Œæˆ‘ä»¬å°è¯•ä»æ±‡ç¼–åº•å±‚çœ‹ä¸€ä¸‹è¿™ä¸ªè¿‡ç¨‹ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-asm" data-lang="asm"><span class="nf">demo</span><span class="err">`</span><span class="no">baz</span><span class="p">():</span>
<span class="err">-&gt;</span>  <span class="err">0</span><span class="nf">x100000fa0</span> <span class="err">&lt;+</span><span class="mi">0</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">pushq</span>  <span class="nv">%rbp</span>
    <span class="err">0</span><span class="nf">x100000fa1</span> <span class="err">&lt;+</span><span class="mi">1</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">movq</span>   <span class="nv">%rsp</span><span class="p">,</span> <span class="nv">%rbp</span>
    <span class="c">; å°†ç«‹å³æ•° 10 ç§»åŠ¨åˆ° eax å¯„å­˜å™¨ï¼ˆå³ rax å¯„å­˜å™¨ä½ 32 ä½ï¼‰
</span><span class="c"></span>    <span class="err">0</span><span class="nf">x100000fa4</span> <span class="err">&lt;+</span><span class="mi">4</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">movl</span>   <span class="no">$0xa</span><span class="p">,</span> <span class="nv">%eax</span>
    <span class="err">0</span><span class="nf">x100000fa9</span> <span class="err">&lt;+</span><span class="mi">9</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">popq</span>   <span class="nv">%rbp</span>
    <span class="err">0</span><span class="nf">x100000faa</span> <span class="err">&lt;+</span><span class="mi">10</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">retq</span>
</code></pre></div><p>æ­¤æ—¶è¿”å›å€¼å°†ç§»åŠ¨åˆ° <code>rax</code> å¯„å­˜å™¨ä¾›å‡½æ•°å¤–éƒ¨ä½¿ç”¨ã€‚é€šå¸¸æ¥è¯´ï¼Œä¸€ä¸ªå‡½æ•°åªæœ‰ä¸€ä¸ªè¿”å›å€¼ï¼Œä½† Swift ä¸­æ”¯æŒå…ƒç»„ç±»å‹ï¼Œå¯ä»¥å°†å¤šä¸ªå…ƒç´ åŒæ—¶è¿”å›ï¼Œé‚£ä¹ˆæ­¤æ—¶è¿”å›å€¼å­˜åœ¨å“ªé‡Œå‘¢ï¼Ÿ</p>
<div class="highlight"><pre class="chroma"><code class="language-swift" data-lang="swift"><span class="c1">// main.swift</span>

<span class="kd">func</span> <span class="nf">baz</span><span class="p">()</span> <span class="p">-&gt;</span> <span class="p">(</span><span class="nb">Int</span><span class="p">,</span> <span class="nb">Int</span><span class="p">,</span> <span class="nb">Int</span><span class="p">,</span> <span class="nb">Int</span><span class="p">,</span> <span class="nb">Int</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">14</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nv">t</span> <span class="p">=</span> <span class="n">baz</span><span class="p">()</span>
<span class="kd">var</span> <span class="nv">a</span> <span class="p">=</span> <span class="n">t</span><span class="p">.</span><span class="mi">0</span>
<span class="kd">var</span> <span class="nv">b</span> <span class="p">=</span> <span class="n">t</span><span class="p">.</span><span class="mi">1</span>
<span class="kd">var</span> <span class="nv">c</span> <span class="p">=</span> <span class="n">t</span><span class="p">.</span><span class="mi">2</span>
<span class="kd">var</span> <span class="nv">d</span> <span class="p">=</span> <span class="n">t</span><span class="p">.</span><span class="mi">3</span>
<span class="kd">var</span> <span class="nv">e</span> <span class="p">=</span> <span class="n">t</span><span class="p">.</span><span class="mi">4</span>
</code></pre></div><p>è½¬æ¢ä¸ºæ±‡ç¼–ä»£ç ï¼š</p>
<div class="highlight"><pre class="chroma"><code class="language-asm" data-lang="asm"><span class="nf">demo</span><span class="err">`</span><span class="no">baz</span><span class="p">():</span>
<span class="err">-&gt;</span>  <span class="err">0</span><span class="nf">x100000f50</span> <span class="err">&lt;+</span><span class="mi">0</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">pushq</span>  <span class="nv">%rbp</span>
    <span class="err">0</span><span class="nf">x100000f51</span> <span class="err">&lt;+</span><span class="mi">1</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">movq</span>   <span class="nv">%rsp</span><span class="p">,</span> <span class="nv">%rbp</span>
    <span class="c">; è¿”å›å€¼å…ƒç»„ç¬¬ä¸€ä¸ªå…ƒç´ æ”¾åœ¨ rax
</span><span class="c"></span>    <span class="err">0</span><span class="nf">x100000f54</span> <span class="err">&lt;+</span><span class="mi">4</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">movq</span>   <span class="no">$0xa</span><span class="p">,</span> <span class="p">(</span><span class="nv">%rax</span><span class="p">)</span>
    <span class="c">; è¿”å›å€¼å…ƒç»„ç¬¬äºŒä¸ªå…ƒç´ æ”¾åœ¨ rax + 0x8
</span><span class="c"></span>    <span class="err">0</span><span class="nf">x100000f5b</span> <span class="err">&lt;+</span><span class="mi">11</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">movq</span>   <span class="no">$0xb</span><span class="p">,</span> <span class="mi">0x8</span><span class="p">(</span><span class="nv">%rax</span><span class="p">)</span>
    <span class="c">; è¿”å›å€¼å…ƒç»„ç¬¬ä¸‰ä¸ªå…ƒç´ æ”¾åœ¨ rax + 0x10
</span><span class="c"></span>    <span class="err">0</span><span class="nf">x100000f63</span> <span class="err">&lt;+</span><span class="mi">19</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">movq</span>   <span class="no">$0xc</span><span class="p">,</span> <span class="mi">0x10</span><span class="p">(</span><span class="nv">%rax</span><span class="p">)</span>
    <span class="c">; è¿”å›å€¼å…ƒç»„ç¬¬å››ä¸ªå…ƒç´ æ”¾åœ¨ rax + 0x18
</span><span class="c"></span>    <span class="err">0</span><span class="nf">x100000f6b</span> <span class="err">&lt;+</span><span class="mi">27</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">movq</span>   <span class="no">$0xd</span><span class="p">,</span> <span class="mi">0x18</span><span class="p">(</span><span class="nv">%rax</span><span class="p">)</span>
    <span class="c">; è¿”å›å€¼å…ƒç»„ç¬¬äº”ä¸ªå…ƒç´ æ”¾åœ¨ rax + 0x20
</span><span class="c"></span>    <span class="err">0</span><span class="nf">x100000f73</span> <span class="err">&lt;+</span><span class="mi">35</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">movq</span>   <span class="no">$0xe</span><span class="p">,</span> <span class="mi">0x20</span><span class="p">(</span><span class="nv">%rax</span><span class="p">)</span>
    <span class="err">0</span><span class="nf">x100000f7b</span> <span class="err">&lt;+</span><span class="mi">43</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">popq</span>   <span class="nv">%rbp</span>
    <span class="err">0</span><span class="nf">x100000f7c</span> <span class="err">&lt;+</span><span class="mi">44</span><span class="err">&gt;</span><span class="p">:</span> <span class="no">retq</span>

<span class="nf">demo</span><span class="err">`</span><span class="no">main</span><span class="p">:</span>
    <span class="err">0</span><span class="nf">x100000dd0</span> <span class="err">&lt;+</span><span class="mi">0</span><span class="err">&gt;</span><span class="p">:</span>   <span class="no">pushq</span>  <span class="nv">%rbp</span>
    <span class="err">0</span><span class="nf">x100000dd1</span> <span class="err">&lt;+</span><span class="mi">1</span><span class="err">&gt;</span><span class="p">:</span>   <span class="no">movq</span>   <span class="nv">%rsp</span><span class="p">,</span> <span class="nv">%rbp</span>
    <span class="err">0</span><span class="nf">x100000dd4</span> <span class="err">&lt;+</span><span class="mi">4</span><span class="err">&gt;</span><span class="p">:</span>   <span class="no">subq</span>   <span class="no">$0xb0</span><span class="p">,</span> <span class="nv">%rsp</span>
    <span class="err">0</span><span class="nf">x100000ddb</span> <span class="err">&lt;+</span><span class="mi">11</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">leaq</span>   <span class="p">-</span><span class="mi">0x28</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">),</span> <span class="nv">%rax</span>
    <span class="err">0</span><span class="nf">x100000ddf</span> <span class="err">&lt;+</span><span class="mi">15</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">movl</span>   <span class="nv">%edi</span><span class="p">,</span> <span class="p">-</span><span class="mi">0xa4</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">)</span>
    <span class="err">0</span><span class="nf">x100000de5</span> <span class="err">&lt;+</span><span class="mi">21</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">movq</span>   <span class="nv">%rsi</span><span class="p">,</span> <span class="p">-</span><span class="mi">0xb0</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">)</span>
<span class="err">-&gt;</span>  <span class="err">0</span><span class="nf">x100000dec</span> <span class="err">&lt;+</span><span class="mi">28</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">callq</span>  <span class="mi">0x100000f50</span>               <span class="c">; demo.baz() -&gt; (Swift.Int, Swift.Int, Swift.Int, Swift.Int, Swift.Int) at main.swift:3
</span><span class="c"></span>    <span class="c">; (lldb) register read rax =&gt; rax = 0x00007ffeefbff518
</span><span class="c"></span>    <span class="c">; (lldb) x --size 8 --format x --count 6 0x00007ffeefbff518
</span><span class="c"></span>    <span class="c">; 0x7ffeefbff518: 0x000000000000000a 0x000000000000000b
</span><span class="c"></span>    <span class="c">; 0x7ffeefbff528: 0x000000000000000c 0x000000000000000d
</span><span class="c"></span>    <span class="c">; 0x7ffeefbff538: 0x000000000000000e 0x00007ffeefbff550
</span><span class="c"></span>    <span class="mi">0x100000df1</span> <span class="err">&lt;+</span><span class="mi">33</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">leaq</span>   <span class="mi">0x1220</span><span class="p">(</span><span class="nv">%rip</span><span class="p">),</span> <span class="nv">%rax</span>        <span class="c">; demo.t : (Swift.Int, Swift.Int, Swift.Int, Swift.Int, Swift.Int)
</span><span class="c"></span>    <span class="mi">0x100000df8</span> <span class="err">&lt;+</span><span class="mi">40</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">xorl</span>   <span class="nv">%ecx</span><span class="p">,</span> <span class="nv">%ecx</span>
    <span class="c">; (lldb) register read rbp =&gt; rbp = 0x00007ffeefbff540
</span><span class="c"></span>    <span class="c">; å°† rbp - 0x28 åœ°å€ï¼ˆ0x7FFEEFBFF518ï¼‰å†…å®¹ï¼ˆ10ï¼‰ç§»åŠ¨åˆ° rdx
</span><span class="c"></span>    <span class="err">0</span><span class="nf">x100000dfa</span> <span class="err">&lt;+</span><span class="mi">42</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">movq</span>   <span class="p">-</span><span class="mi">0x28</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">),</span> <span class="nv">%rdx</span>
    <span class="c">; å°† rbp - 0x20 åœ°å€ï¼ˆ0x7FFEEFBFF518ï¼‰å†…å®¹ï¼ˆ11ï¼‰ç§»åŠ¨åˆ° rsi
</span><span class="c"></span>    <span class="err">0</span><span class="nf">x100000dfe</span> <span class="err">&lt;+</span><span class="mi">46</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">movq</span>   <span class="p">-</span><span class="mi">0x20</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">),</span> <span class="nv">%rsi</span>
    <span class="c">; å°† rbp - 0x18 åœ°å€ï¼ˆ0x7FFEEFBFF518ï¼‰å†…å®¹ï¼ˆ12ï¼‰ç§»åŠ¨åˆ° r8
</span><span class="c"></span>    <span class="err">0</span><span class="nf">x100000e02</span> <span class="err">&lt;+</span><span class="mi">50</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">movq</span>   <span class="p">-</span><span class="mi">0x18</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">),</span> <span class="nv">%r8</span>
    <span class="c">; å°† rbp - 0x10 åœ°å€ï¼ˆ0x7FFEEFBFF518ï¼‰å†…å®¹ï¼ˆ13ï¼‰ç§»åŠ¨åˆ° r9
</span><span class="c"></span>    <span class="err">0</span><span class="nf">x100000e06</span> <span class="err">&lt;+</span><span class="mi">54</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">movq</span>   <span class="p">-</span><span class="mi">0x10</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">),</span> <span class="nv">%r9</span>
    <span class="c">; å°† rbp - 0x8 åœ°å€ï¼ˆ0x7FFEEFBFF518ï¼‰å†…å®¹ï¼ˆ14ï¼‰ç§»åŠ¨åˆ° r10
</span><span class="c"></span>    <span class="err">0</span><span class="nf">x100000e0a</span> <span class="err">&lt;+</span><span class="mi">58</span><span class="err">&gt;</span><span class="p">:</span>  <span class="no">movq</span>   <span class="p">-</span><span class="mi">0x8</span><span class="p">(</span><span class="nv">%rbp</span><span class="p">),</span> <span class="nv">%r10</span>
    <span class="c">; ...
</span></code></pre></div><p>æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œå½“å…ƒç»„ä½œä¸ºè¿”å›å€¼æ—¶ï¼Œå°†ä» <code>rax</code> å¼€å§‹åç§»ä¾æ¬¡å­˜æ”¾ã€‚</p>
<!--

- å¯„å­˜å™¨ï¼š
  - 16 ä¸ªå¸¸ç”¨å¯„å­˜å™¨ï¼š
    - `rax`ã€`rbx`ã€`rcx`ã€`rdx`ã€`rsi`ã€`rdi`ã€`rbp`ã€`rsp`
    - `r8`ã€`r9`ã€`r10`ã€`r11`ã€`r12`ã€`r13`ã€`r14`ã€`r15`
    - `r` å¼€å¤´çš„å¯„å­˜å™¨å‡ä¸º 64 ä½(8 å­—èŠ‚ï¼‰å¯„å­˜å™¨ï¼Œ`e` å¼€å¤´ä¸º 32 ä½ï¼Œ`ax`ã€`bx`ã€`cx` ä¸º 16 ä½ï¼Œ`ah`ã€`al` ä¸º 8 ä½ã€‚
  - ç”¨é€”
    - `rax`ã€`rdx` å¸¸ä½œä¸ºå‡½æ•°è¿”å›å€¼ä½¿ç”¨
  - ç»“æ„ä½“å’Œå¯¹è±¡ç­‰å‡å­˜å‚¨åœ¨å†…å­˜ï¼ˆéå¯„å­˜å™¨ï¼‰

## æ±‡ç¼–è¯­è¨€

- æ±‡ç¼–è¯­è¨€åˆ†ç±»ï¼š
  - 8086 æ±‡ç¼–ï¼ˆ16 ä½ï¼ˆBitï¼‰ï¼Œå³æ¯ä¸ªå¯„å­˜å™¨çš„å¤§å°ä¸º 16 ä½ï¼Œ2 å­—èŠ‚ï¼‰
  - x86 æ±‡ç¼–ï¼ˆ32 ä½ï¼‰
  - x64 æ±‡ç¼–ï¼ˆ64 ä½ï¼‰
  - ARM æ±‡ç¼–ç­‰
- AT&T æ±‡ç¼–ç”¨äº iOS æ¨¡æ‹Ÿå™¨ï¼ŒARM æ±‡ç¼–ç”¨äº iOS çœŸæœº

|    é¡¹ç›®     |                                AT&T                                 |                           Intel                           |                                                                                                                   è¯´æ˜                                                                                                                   |
| :---------: | :-----------------------------------------------------------------: | :-------------------------------------------------------: | :--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------: |
| å¯„å­˜å™¨å‘½å  |                               `%rax`                                |                           `rax`                           |                                                                                                                    -                                                                                                                     |
| æ“ä½œæ•°é¡ºåº  |                          `movq %rax, %rdx`                          |                      `mov rdx, rax`                       |                                                                                                        å°† `rax` çš„å€¼èµ‹å€¼ç»™ `rdx`                                                                                                         |
| å¸¸æ•°/ç«‹å³æ•° |                `movq $3, %rax`<br>`movq $0x10, %rax`                |              `mov rax, 3`<br>`mov rax, 0x10`              |                                                                                                å°† `3` èµ‹å€¼ç»™ `rax` å°† `0x10` èµ‹å€¼ç»™ `rax`                                                                                                |
|  å†…å­˜èµ‹å€¼   |                      `movq $0xa, 0x1ff7(%rip)`                      |             `mov qword ptr [rip+0x1ff7], 0xa`             |                                                                                            å°† `0xa` èµ‹å€¼ç»™åœ°å€ä¸º `rip` + `0x1ff7` çš„å†…å­˜ç©ºé—´                                                                                             |
| å–å†…å­˜åœ°å€  |                      `leaq -0x18(%rbp), %rax`                       |                  `lea rax, [rbp â€“ 0x18]`                  |                                                                                                  å°† `rbp â€“ 0x18` è¿™ä¸ªåœ°å€å€¼èµ‹å€¼ç»™ `rax`                                                                                                  |
| `jmp` æŒ‡ä»¤  | `jmp *%rdx`<br>`jmp 0x4001002`<br>`jmp *(%rax)`ï¼ˆ`*` ä»£è¡¨é—´æ¥è·³è½¬ï¼‰ |        `jmp rdx`<br>`jmp 0x4001002`<br>`jmp [rax]`        |                                                                                  `call` å’Œ `jmp` å†™æ³•ç±»ä¼¼ï¼ˆ`call` åé€šå¸¸ä¸ºå‡½æ•°åœ°å€ï¼Œå¯é…åˆ `ret` ä½¿ç”¨ï¼‰                                                                                  |
| æ“ä½œæ•°é•¿åº¦  |   `movl %eax, %edx`<br>`movb $0x10, %al`<br>`leaw 0x10(%dx), %ax`   | `mov edx, eax`<br>`mov al, 0x10`<br>`lea ax, [dx + 0x10]` | **b** = byte (8-bit)<br>**s** = short (16-bit integer or 32-bit floating point)<br>**w** = word (16-bit)<br>**l** = long (32-bit integer or 64-bit floating point)<br>**q** = quad (64 bit)<br>**t** = ten bytes (80-bit floating point) |

- `movq -0x18(%rbp), %rax` & `leaq -0x18(%rbp), %rax` çš„åŒºåˆ«ï¼š
  - å‰è€…ä¸ºå°† `%rbp - 0x18` å¾—åˆ°çš„åœ°å€å¯¹åº”å­˜å‚¨ç©ºé—´çš„æ•°æ®ï¼Œå­˜å‚¨åˆ° `rax` å¯„å­˜å™¨ï¼›
  - åè€…ä¸ºå°† `%rbp - 0x18` å¾—åˆ°çš„åœ°å€ï¼Œå­˜å‚¨åˆ° `rax` å¯„å­˜å™¨ã€‚
- `call 0x10`ï¼šè·³è½¬è‡³ `0x10` å‡½æ•°åœ°å€å¤„ï¼›
- `call *%rax`ï¼šè·³è½¬è‡³ `rax` å¯„å­˜å™¨å­˜å‚¨çš„å‡½æ•°åœ°å€å¤„ã€‚

## LLDB

|            æ“ä½œ            |                                            æŒ‡ä»¤                                             |
| :------------------------: | :-----------------------------------------------------------------------------------------: |
|       åˆ—å‡ºæ‰€æœ‰å¯„å­˜å™¨       |                                       `register read`                                       |
|       è¯»å–å¯„å­˜å™¨çš„å€¼       |                  `register read/æ ¼å¼ å¯„å­˜å™¨åç§°`<br>`register read/x rax`                   |
|       ä¿®æ”¹å¯„å­˜å™¨çš„å€¼       |                 `register write å¯„å­˜å™¨åç§° æ•°å€¼`<br>`register write rax 0`                  |
|       è¯»å–å†…å­˜ä¸­çš„å€¼       |                    `x/æ•°é‡-æ ¼å¼-å­—èŠ‚å¤§å° å†…å­˜åœ°å€`<br>`x/3xw 0x0000010`                     |
|       ä¿®æ”¹å†…å­˜ä¸­çš„å€¼       |                 `memory write å†…å­˜åœ°å€ æ•°å€¼`<br>`memory write 0x0000010 10`                 |
|            æ ¼å¼            |                          `x` æ˜¯åå…­è¿›åˆ¶ï¼Œ`f` æ˜¯æµ®ç‚¹ï¼Œ`d` æ˜¯åè¿›åˆ¶                           |
|          å­—èŠ‚å¤§å°          | `b` â€“ byte 1 å­—èŠ‚<br>`h` â€“ half word 2 å­—èŠ‚<br>`w` â€“ word 4 å­—èŠ‚<br>`g` â€“ giant word 8 å­—èŠ‚ |
|     expression è¡¨è¾¾å¼      |           å¯ä»¥ç®€å†™ä¸ºï¼š`expr è¡¨è¾¾å¼`<br>`expression $rax`<br>`expression $rax = 1`           |
| `po` è¡¨è¾¾å¼ `print` è¡¨è¾¾å¼ |                                `po/x $rax`<br>`po (int)$rax`                                |

```swift
func foo() {
    let a = 10
    let b = a + 1

    print(b) // BREAKPOINT âš ï¸
}

foo()

// LLDB:
//    (lldb) register read // è¯»å–æ‰€æœ‰å¯„å­˜å™¨
//    General Purpose Registers:
//           rax = 0x000000010313e1d0
//           rbx = 0x000000010313e1d0
//           rcx = 0x0000000000000000
//           rdx = 0x0000000000000004
//           rdi = 0x00000000000003e3
//           rsi = 0x000000010045d080
//           rbp = 0x00007ffeefbff4c0
//           rsp = 0x00007ffeefbff4b0
//            r8 = 0x0000000010313e1e
//            r9 = 0x0000000010313e21
//           r10 = 0x00000000fffffffe
//           r11 = 0x0000000000000000
//           r12 = 0x0000000000000000
//           r13 = 0x0000000000000000
//           r14 = 0x0000000000000000
//           r15 = 0x0000000000000000
//           rip = 0x0000000100000a59  demo`main + 41 [inlined] demo.foo() -> () + 37 at main.swift:8
//      demo`main + 4 at main.swift:8
//        rflags = 0x0000000000000202
//            cs = 0x000000000000002b
//            fs = 0x0000000000000000
//            gs = 0x0000000000000000
//
//    (lldb) register read rax // è¯»å– rax å¯„å­˜å™¨
//         rax = 0x000000010313e1d0
//    (lldb) register read/x rax // ä»¥åå…­è¿›åˆ¶è¯»å– rax å¯„å­˜å™¨
//         rax = 0x000000010313e1d0
//    (lldb) register write rax 10 // å†™å…¥ rax å¯„å­˜å™¨ 10
//    (lldb) register read/d rax // ä»¥åè¿›åˆ¶è¯»å– rax å¯„å­˜å™¨
//         rax = 10
//    (lldb) x 0x000000010313e1d0 // è¯»å–å†…å­˜çš„å€¼
//    0x10313e1d0: 60 52 a3 93 ff 7f 00 00 02 00 00 00 00 00 00 00  `R..............
//    0x10313e1e0: 01 00 00 00 00 00 00 00 02 00 00 00 00 00 00 00  ................
//    (lldb) x/3xw 0x000000010313e1d0 // ä»¥ä¸€ä¸ªå­—ï¼ˆ4 å­—èŠ‚ï¼‰è¯»å–ï¼Œè¯»å–ä¸‰æ®µï¼Œåå…­è¿›åˆ¶è¡¨ç¤º
//    0x10313e1d0: 0x93a35260 0x00007fff 0x00000002
//    (lldb) x/4xg 0x000000010313e1d0  // ä»¥ 8 å­—èŠ‚è¯»å–ï¼Œè¯»å–å››æ®µï¼Œåå…­è¿›åˆ¶è¡¨ç¤º
//    0x10313e1d0: 0x00007fff93a35260 0x0000000000000002
//    0x10313e1e0: 0x0000000000000001 0x0000000000000002
```

|                  æŒ‡ä»¤                  |                               è§£é‡Š                               |
| :------------------------------------: | :--------------------------------------------------------------: |
|    `thread step-over`ã€`next`ã€`n`     |          å•æ­¥è¿â¾ï¼ŒæŠŠå­å‡½æ•°å½“åšæ•´ä½“â¼€æ­¥æ‰§è¡Œï¼ˆæºç çº§åˆ«ï¼‰          |
|     `thread step-in`ã€`step`ã€`s`      |           å•æ­¥è¿è¡Œï¼Œé‡åˆ°å­å‡½æ•°ä¼šè¿›â¼Šå­å‡½æ•°ï¼ˆæºç çº§åˆ«ï¼‰           |
| `thread step-inst-over`ã€`nexti`ã€`ni` |          å•æ­¥è¿è¡Œï¼ŒæŠŠå­å‡½æ•°å½“åšæ•´ä½“â¼€æ­¥æ‰§â¾ï¼ˆæ±‡ç¼–çº§åˆ«ï¼‰          |
|   `thread step-inst`ã€`stepi`ã€`si`    |           å•æ­¥è¿è¡Œï¼Œé‡åˆ°å­å‡½æ•°ä¼šè¿›å…¥å­å‡½æ•°ï¼ˆæ±‡ç¼–çº§åˆ«ï¼‰           |
|      `thread step-out`ã€`finish`       | ç›´æ¥æ‰§è¡Œå®Œå½“å‰å‡½æ•°çš„æ‰€æœ‰ä»£ç ï¼Œè¿”å›åˆ°ä¸Šä¸€ä¸ªå‡½æ•°ï¼ˆé‡åˆ°æ–­ç‚¹ä¼šå¡ä½ï¼‰ |

## enum & switch-case

 -->
<h2 id="reference">Reference</h2>
<ul>
<li><a href="https://docs.microsoft.com/en-us/windows-hardware/drivers/debugger/x64-architecture?view=drivers-server-ver15">x64 Architecture - Microsoft</a></li>
</ul>
</div>
                    <div class="post_footer">
                        
                        <div class="meta">
                            <div class="info">
                                <span class="field tags">
                                    <i class="ri-stack-line"></i>
                                    
                                    <a href="https://kingcos.me/tags/swift/">Swift</a>
                                    
                                    <a href="https://kingcos.me/tags/swift-%E6%8B%BE%E9%81%97/">Swift æ‹¾é—</a>
                                    
                                </span>
                            </div>
                        </div>
                        
                    </div>
                </div>
                
                
                <div class="doc_comments"><div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "kingcos" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a></div>
                
            </div>
        </div>
    </div>
    <a id="back_to_top" href="#" class="back_to_top"><i class="ri-arrow-up-s-line"></i></a>
    <footer class="footer">
    <div class="powered_by">
        <a href="https://kingcos.me">Powered by kingcos with love.</a>
    </div>

    <div class="footer_slogan">
        <span>â¤ï¸</span>
    </div>
</footer>
    <script src="https://kingcos.me/js/jquery-3.5.1.min.js"></script>
<link href="https://kingcos.me/css/fancybox.min.css" rel="stylesheet">
<script src="https://kingcos.me/js/fancybox.min.js"></script>
<script src="https://kingcos.me/js/zozo.js"></script>


<script type="text/javascript" async
    src="https://cdn.bootcss.com/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
        MathJax.Hub.Config({
            tex2jax: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\[\[', '\]\]']],
                processEscapes: true,
                processEnvironments: true,
                skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
                TeX: {
                    equationNumbers: { autoNumber: "AMS" },
                    extensions: ["AMSmath.js", "AMSsymbols.js"]
                }
            }
        });

        MathJax.Hub.Queue(function () {
            
            
            
            var all = MathJax.Hub.getAllJax(), i;
            for (i = 0; i < all.length; i += 1) {
                all[i].SourceElement().parentNode.className += ' has-jax';
            }
        });
    </script>

<style>
    code.has-jax {
        font: inherit;
        font-size: 100%;
        background: inherit;
        border: inherit;
        color: #515151;
    }
</style>



<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-138311951-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

</body>

</html>
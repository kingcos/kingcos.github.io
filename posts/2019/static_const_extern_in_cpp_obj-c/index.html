<!DOCTYPE html>
<html lang="en">
<head>
  
    <title>C/C&#43;&#43;/Obj-C 中的 static、const &amp; extern :: iBlog</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="description" content="Date Notes Notes     2019-07-23 首次提交     Preface 虽然天天接触 C/C&#43;&#43;/Obj-C，但其实很多人（包括我）对于 static、const &amp;amp; extern 关键字具体的作用却含糊不清，尤其是遇到指针时。我们可能只是知道它们和常量有关，现在是时候搞清楚它们了。
C/C&#43;&#43; 基础类型 int a = 0; a = 10; const int b = 0; // error: cannot assign to variable &#39;b&#39; with const-qualified type &#39;const int&#39; // b = 10; int const c = 0; // c = 10;  对于基础类型，const
集合类型 int a[] = {1, 2, 3}; a[0] = 0; int const b[] = {1, 2, 3}; // error: read-only variable is not assignable // b[0] = 1; const int c[] = {1, 2, 3}; // c[0] = 1;  指向基础类型的指针 int foo = 0; int bar = 10; int *c = &amp;amp;foo; c = &amp;amp;bar; *c = foo; const int *d = &amp;amp;foo; d = &amp;amp;bar; // error: read-only variable is not assignable // *d = foo; int const *e = &amp;amp;foo; e = &amp;amp;bar; // *e = foo; int *const f = &amp;amp;foo; // error: cannot assign to variable &#39;f&#39; with const-qualified type &#39;int *const&#39; // f = &amp;amp;bar; *f = foo;  指向对象类型的指针 class Foo { public: double bar; Foo(double _bar) { bar = _bar; } }; Foo *foo1 = new Foo(0."/>
<meta name="keywords" content=""/>
<meta name="robots" content="noodp"/>
<link rel="canonical" href="/posts/2019/static_const_extern_in_cpp_obj-c/" />


<link rel="stylesheet" href="/assets/style.css">

  <link rel="stylesheet" href="/assets/green.css">



<link rel="stylesheet" href="/style.css">


<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/img/apple-touch-icon-144-precomposed.png">

<link rel="shortcut icon" href="/img/favicon/favicon.ico">



<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="C/C&#43;&#43;/Obj-C 中的 static、const &amp; extern :: iBlog — " />
<meta name="twitter:description" content="Date Notes Notes     2019-07-23 首次提交     Preface 虽然天天接触 C/C&#43;&#43;/Obj-C，但其实很多人（包括我）对于 static、const &amp;amp; extern 关键字具体的作用却含糊不清，尤其是遇到指针时。我们可能只是知道它们和常量有关，现在是时候搞清楚它们了。
C/C&#43;&#43; 基础类型 int a = 0; a = 10; const int b = 0; // error: cannot assign to variable &#39;b&#39; with const-qualified type &#39;const int&#39; // b = 10; int const c = 0; // c = 10;  对于基础类型，const
集合类型 int a[] = {1, 2, 3}; a[0] = 0; int const b[] = {1, 2, 3}; // error: read-only variable is not assignable // b[0] = 1; const int c[] = {1, 2, 3}; // c[0] = 1;  指向基础类型的指针 int foo = 0; int bar = 10; int *c = &amp;amp;foo; c = &amp;amp;bar; *c = foo; const int *d = &amp;amp;foo; d = &amp;amp;bar; // error: read-only variable is not assignable // *d = foo; int const *e = &amp;amp;foo; e = &amp;amp;bar; // *e = foo; int *const f = &amp;amp;foo; // error: cannot assign to variable &#39;f&#39; with const-qualified type &#39;int *const&#39; // f = &amp;amp;bar; *f = foo;  指向对象类型的指针 class Foo { public: double bar; Foo(double _bar) { bar = _bar; } }; Foo *foo1 = new Foo(0." />
<meta name="twitter:site" content="/" />
<meta name="twitter:creator" content="" />
<meta name="twitter:image" content="">


<meta property="og:locale" content="en" />
<meta property="og:type" content="article" />
<meta property="og:title" content="C/C&#43;&#43;/Obj-C 中的 static、const &amp; extern :: iBlog — ">
<meta property="og:description" content="Date Notes Notes     2019-07-23 首次提交     Preface 虽然天天接触 C/C&#43;&#43;/Obj-C，但其实很多人（包括我）对于 static、const &amp;amp; extern 关键字具体的作用却含糊不清，尤其是遇到指针时。我们可能只是知道它们和常量有关，现在是时候搞清楚它们了。
C/C&#43;&#43; 基础类型 int a = 0; a = 10; const int b = 0; // error: cannot assign to variable &#39;b&#39; with const-qualified type &#39;const int&#39; // b = 10; int const c = 0; // c = 10;  对于基础类型，const
集合类型 int a[] = {1, 2, 3}; a[0] = 0; int const b[] = {1, 2, 3}; // error: read-only variable is not assignable // b[0] = 1; const int c[] = {1, 2, 3}; // c[0] = 1;  指向基础类型的指针 int foo = 0; int bar = 10; int *c = &amp;amp;foo; c = &amp;amp;bar; *c = foo; const int *d = &amp;amp;foo; d = &amp;amp;bar; // error: read-only variable is not assignable // *d = foo; int const *e = &amp;amp;foo; e = &amp;amp;bar; // *e = foo; int *const f = &amp;amp;foo; // error: cannot assign to variable &#39;f&#39; with const-qualified type &#39;int *const&#39; // f = &amp;amp;bar; *f = foo;  指向对象类型的指针 class Foo { public: double bar; Foo(double _bar) { bar = _bar; } }; Foo *foo1 = new Foo(0." />
<meta property="og:url" content="/posts/2019/static_const_extern_in_cpp_obj-c/" />
<meta property="og:site_name" content="C/C&#43;&#43;/Obj-C 中的 static、const &amp; extern" />
<meta property="og:image" content="">
<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">

<meta property="article:published_time" content="2019-07-22 00:00:00 &#43;0000 UTC" />











</head>
<body class="">


<div class="container center">

  <header class="header">
  <div class="header__inner">
    <div class="header__logo">
      <a href="/">
  <div class="logo">
    iBlog
  </div>
</a>

    </div>
    <div class="menu-trigger">menu</div>
  </div>
  
  
    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-138311951-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

  

  
    <nav class="menu">
  <ul class="menu__inner menu__inner--desktop">
    
      
        
          <li><a href="/about">About &amp; AMA</a></li>
        
      
        
          <li><a href="/links">Links</a></li>
        
      
        
          <li><a href="/perspective">Perspective</a></li>
        
      
        
          <li><a href="/words">Words</a></li>
        
      
      
    
  </ul>

  <ul class="menu__inner menu__inner--mobile">
    
      
        <li><a href="/about">About &amp; AMA</a></li>
      
    
      
        <li><a href="/links">Links</a></li>
      
    
      
        <li><a href="/perspective">Perspective</a></li>
      
    
      
        <li><a href="/words">Words</a></li>
      
    
  </ul>
</nav>

  
</header>


  <div class="content">
    
<div class="post">
  <h1 class="post-title">
    <a href="/posts/2019/static_const_extern_in_cpp_obj-c/">C/C++/Obj-C 中的 static、const &amp; extern</a></h1>
  <div class="post-meta">
    <span class="post-date">
      2019-07-22
    </span>
    
  </div>

  
  <span class="post-tags">
    
    #<a href="/tags/focus/">Focus</a>&nbsp;
    
    #<a href="/tags/ios/">iOS</a>&nbsp;
    
    #<a href="/tags/obj-c/">Obj-C</a>&nbsp;
    
    #<a href="/tags/c/c&#43;&#43;/">C/C&#43;&#43;</a>&nbsp;
    
  </span>
  

  

  <div class="post-content">
    

<table>
<thead>
<tr>
<th align="center">Date</th>
<th align="center">Notes</th>
<th align="center">Notes</th>
</tr>
</thead>

<tbody>
<tr>
<td align="center">2019-07-23</td>
<td align="center">首次提交</td>
<td align="center"></td>
</tr>
</tbody>
</table>

<h2 id="preface">Preface</h2>

<p>虽然天天接触 C/C++/Obj-C，但其实很多人（包括我）对于 <code>static</code>、<code>const</code> &amp; <code>extern</code> 关键字具体的作用却含糊不清，尤其是遇到指针时。我们可能只是知道它们和常量有关，现在是时候搞清楚它们了。</p>

<h2 id="c-c">C/C++</h2>

<h3 id="基础类型">基础类型</h3>

<pre><code class="language-cpp">int a = 0;
a = 10;

const int b = 0;
// error: cannot assign to variable 'b' with const-qualified type 'const int'
// b = 10;

int const c = 0;
// c = 10;
</code></pre>

<p>对于基础类型，<code>const</code></p>

<h3 id="集合类型">集合类型</h3>

<pre><code class="language-cpp">int a[] = {1, 2, 3};
a[0] = 0;

int const b[] = {1, 2, 3};
// error: read-only variable is not assignable
// b[0] = 1;

const int c[] = {1, 2, 3};
// c[0] = 1;
</code></pre>

<h3 id="指向基础类型的指针">指向基础类型的指针</h3>

<pre><code class="language-cpp">int foo = 0;
int bar = 10;

int *c = &amp;foo;
c = &amp;bar;
*c = foo;

const int *d = &amp;foo;
d = &amp;bar;
// error: read-only variable is not assignable
// *d = foo;

int const *e = &amp;foo;
e = &amp;bar;
// *e = foo;

int *const f = &amp;foo;
// error: cannot assign to variable 'f' with const-qualified type 'int *const'
// f = &amp;bar;
*f = foo;
</code></pre>

<h3 id="指向对象类型的指针">指向对象类型的指针</h3>

<pre><code class="language-cpp">class Foo
{
public:
    double bar;

    Foo(double _bar)
    {
        bar = _bar;
    }
};

Foo *foo1 = new Foo(0.0);
foo1-&gt;bar = 0.5;
cout &lt;&lt; foo1-&gt;bar &lt;&lt; endl;

foo1 = new Foo(1.5);
cout &lt;&lt; foo1-&gt;bar &lt;&lt; endl;

const Foo *foo2 = new Foo(0.0);
// error: cannot assign to variable 'foo2' with const-qualified type 'const Foo *'
// foo2-&gt;bar = 0.5;

foo2 = new Foo(1.5);

Foo const *foo3 = new Foo(0.0);
// foo3-&gt;bar = 0.5;

foo3 = new Foo(1.5);

Foo *const foo4 = new Foo(0.0);
foo4-&gt;bar = 0.5;

// error: cannot assign to variable 'foo4' with const-qualified type 'Foo *const'
// foo4 = new Foo(1.5);
</code></pre>

<h3 id="指向指针的指针">指向指针的指针</h3>

<pre><code class="language-cpp">int foo = 0;
int foo2 = 10;
int *bar = &amp;foo;
int *bar2 = &amp;foo2;
int **baz = &amp;bar;

cout &lt;&lt; **baz &lt;&lt; endl;
baz = &amp;bar2;
cout &lt;&lt; **baz &lt;&lt; endl;
*baz = &amp;foo2;
cout &lt;&lt; **baz &lt;&lt; endl;
**baz = foo2;
cout &lt;&lt; **baz &lt;&lt; endl;

cout &lt;&lt; &quot;---&quot; &lt;&lt; endl;

// error: cannot initialize a variable of type 'const int **' with an rvalue of type 'int **'
// const int **baz2 = &amp;bar;

// int const **baz2 = &amp;bar;

int *const *baz2 = &amp;bar;
cout &lt;&lt; **baz2 &lt;&lt; endl;
baz2 = &amp;bar2;
cout &lt;&lt; **baz2 &lt;&lt; endl;
// error: read-only variable is not assignable
// *baz2 = &amp;foo2;
**baz2 = foo2;
cout &lt;&lt; **baz2 &lt;&lt; endl;

cout &lt;&lt; &quot;---&quot; &lt;&lt; endl;

int **const baz3 = &amp;bar;
cout &lt;&lt; **baz3 &lt;&lt; endl;
// error: cannot assign to variable 'baz3' with const-qualified type 'int **const'
// baz3 = &amp;bar2;
*baz3 = &amp;foo2;
cout &lt;&lt; **baz3 &lt;&lt; endl;
**baz3 = foo2;
cout &lt;&lt; **baz3 &lt;&lt; endl;

// OUTPUT:
// 0
// 10
// 10
// 10
// ---
// 0
// 10
// 10
// ---
// 0
// 10
// 10
</code></pre>

<h2 id="obj-c">Obj-C</h2>

<h3 id="基础类型-1">基础类型</h3>

<h3 id="集合类型-1">集合类型</h3>

<h3 id="指向基础类型的指针-1">指向基础类型的指针</h3>

<h3 id="指向复杂类型的指针">指向复杂类型的指针</h3>

<h3 id="指向指针的指针-1">指向指针的指针</h3>

<h2 id="reference">Reference</h2>

<pre><code>

//        PersonA *p = [[PersonA alloc] init];
//        [p doSomethingHiddly];

        ////    AAA = @&quot;BBB&quot;;
        //    BBB = @&quot;CCC&quot;;
        //    NSString *a = @&quot;CCC&quot;;
        //    BBB = a;
        ////    NSLog(@&quot;%@&quot;, BBB);
        ////    DDD = 333;
        ////    CCC = 333;

//        NSString * const D = @&quot;DD&quot;;
//        const NSString *E = @&quot;EE&quot;;
//
//        id DD = [D copy];
//        id EE = [E copy];
//
//        //    D = @&quot;D&quot;;
//        E = [[NSString alloc] init];
//
//        BBB = @&quot;&quot;;
//
//        // 指向的内存地址不能改，自己的地址能改
//        PersonA * const ppp1 = [[PersonA alloc] init];
//        // 指向的内存地址能改，自己的地址不能改
//        const PersonA * ppp2 = [[PersonA alloc] init];
//        const PersonA * const ppp3 = [[PersonA alloc] init];
//
//        PersonA const * ppp4 = [[PersonA alloc] init];
//        PersonA const * const ppp5 = [[PersonA alloc] init];


//        PersonA * ppp3 = ppp1;
//        &amp;ppp1 = &amp;ppp3;
//
//        ppp1.name = @&quot;111&quot;;
//
//        ppp1 = [[PersonA alloc] init];
//        ppp2 = [[PersonA alloc] init];



//        ppp4.name = @&quot;&quot;;



        // 一旦变量被声明，系统将为该变量分配内存空间，这块内存空间是不可更改的。

        // a/b 是 int 型，保存的数据是 int
        // 这个数据本身是不能更改的
        const int a = 5;
//        a = 10;
        // ---
        int const b = 5;
//        b = 10;
        // ---
        int cc = 5;
        int dd = 10;
        // c 是指针类型，保存的数据是内存地址，该内存地址指向的区域存储了 int 类型
        // const int * c 代表保存的内存地址可以改变，但其保存的内存地址所指向的 int 不可变
        // const int const * c == int const * c == const int * c
        int const * c = &amp;cc;
//        const int * c = &amp;cc;
//        const int const * c = &amp;cc;
//        *c = dd;
        c = &amp;dd;

        NSLog(@&quot;c - %d&quot;, *c);

        // d 是指针类型，保存的数据是内存地址，该内存地址指向的区域存储了 int 类型
        // int * const d 代表保存的内存地址不可变，但其保存的内存地址所指向的 int 可以变
        int * const d = &amp;dd;
//        d = &amp;cc;
        *d = cc;

        NSLog(@&quot;d - %d&quot;, *d);

        int ee = 5;
        int eee = 10;

        // e 是指针类型，保存的数据是内存地址，该内存地址指向的区域存储了 int 类型
        // const int * const e 代表保存的内存地址和其所指向的 int 都不可以变
        const int * const e = &amp;ee;
//        e = &amp;eee;
//        *e = eee;

        const NSString *str = @&quot;str&quot;;
        str = @&quot;string&quot;;


//        const Person * p = [[Person alloc] init];
//        const Person const * p = [[Person alloc] init];
//        PersonA const * p = [[PersonA alloc] init];
//        p-&gt;_height = 10;
//        p-&gt;_name = @&quot;&quot;;
//        p = [PersonA new];

//        PersonA * const pp = [[PersonA alloc] init];
//        pp-&gt;_height = 10;
//        pp-&gt;_name = @&quot;&quot;;
//        pp = [Person new];

        PersonA *pa = [[PersonA alloc] init];
//        pa-&gt;_name = @&quot;11&quot;;
//        NSLog(@&quot;%@&quot;, pa-&gt;_name);
        pa.name = @&quot;11&quot;;
        [pa test];





//        NSString *str1 = [[NSString alloc] initWithString:@&quot;The string&quot;];
//        NSString *str2 = [NSString stringWithString:@&quot;The string&quot;];
//        NSString *str3 = @&quot;The string&quot;;
//        NSString *str4 = [NSString stringWithFormat:@&quot;string&quot;];
//        NSString *str5 = str4;
//        Method method = class_getInstanceMethod([PersonA class], @selector(doSomethingHiddly));

        NSLog(@&quot;---&quot;);
        NSString *aaa = @&quot;1234567890-&quot;;
        NSString *bbb = @&quot;1234567890-&quot;;
        bbb = @&quot;&quot;;

        NSLog(@&quot;%d&quot;, aaa == bbb);
        NSLog(@&quot;%d&quot;, [aaa isEqual:bbb]);
        NSLog(@&quot;%d&quot;, [aaa isEqualToString:bbb]);
        NSLog(@&quot;%d&quot;, aaa == @&quot;1234567890-&quot;);
</code></pre>

  </div>
  
  <div class="pagination">
    <div class="pagination__title">
      <span
        class="pagination__title-h">Read other posts</span>
      <hr />
    </div>
    <div class="pagination__buttons">
      
      
      <span class="button next">
        <a href="/posts/2019/zen_and_the_art_of_the_objective-c_craftsmanship/">
          <span class="button__text">Zen and the Art of the Objective-C Craftsmanship</span>
          <span class="button__icon">→</span>
        </a>
      </span>
      
    </div>
  </div>
  

  

    
    
    <div class="post bg-white">
      <script src="https://utteranc.es/client.js"
            repo="kingcos/kingcos.github.io"
            issue-term="pathname"
            label="comments"
            theme="github-dark"
            crossorigin="anonymous"
            async>
      </script>
    </div>
    

</div>

  </div>

  
    <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright">
        <span>© 2019 · <a href="http://github.com/kingcos">kingcos</a></span>
      </div>
    
  </div>
</footer>

<script src="/assets/main.js"></script>
<script src="/assets/prism.js"></script>





  
</div>

</body>
</html>

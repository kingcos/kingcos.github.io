<!DOCTYPE html>
<html lang="en">
  <head>
    
      <title>Obj-C ä¸­çš„ isa æŒ‡é’ˆ :: iBlog</title>
    
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="description" content="Date Notes Refer.     2019-08-18 é¦–æ¬¡æäº¤ objc4-750.1    Preface isa æŒ‡é’ˆæ˜¯æ‰€æœ‰ Obj-C å¯¹è±¡ä¸­éƒ½æ‹¥æœ‰çš„ä¸€ä¸ªæˆå‘˜ã€‚å› ä¸ºé™¤äº†ç»§æ‰¿é“¾ä¹‹å¤–ï¼ŒObj-C è¿˜ç‰¹æœ‰ä¸€æ¡ä»å®ä¾‹å¯¹è±¡åˆ°ç±»å¯¹è±¡ã€å…ƒç±»å¯¹è±¡çš„é“¾ã€‚è€Œåè€…æ­£æ˜¯ä¾é  isa è€Œä¸²è”èµ·æ¥çš„ï¼Œé‚£ä¹ˆæœ¬æ–‡å°±å°†ç»“åˆæºç è°ˆè°ˆ Obj-C ä¸­çš„ isaã€‚
å¯¹äºä¸å¤§ç†Ÿæ‚‰ Obj-C ä¸­å¯¹è±¡çš„åŒå­¦ï¼Œå¯ä»¥å…ˆè¡Œé˜…è¯» Obj-C ä¸­çš„å¯¹è±¡ä¸€æ–‡ã€‚
Where // NSObject.h @interface NSObject &amp;lt;NSObject&amp;gt; { #pragma clang diagnostic push#pragma clang diagnostic ignored &amp;#34;-Wobjc-interface-ivars&amp;#34; Class isa OBJC_ISA_AVAILABILITY; // â¬…ï¸ #pragma clang diagnostic pop} // objc-runtime-new.h struct objc_class : objc_object { // Class ISA; } // objc-private.h struct objc_object { private: isa_t isa; // â¬…ï¸ } å¦‚ä¸Šï¼Œå¯¹äºå®ä¾‹å¯¹è±¡ï¼Œisa å®šä¹‰åœ¨åŸºç±» NSObject çš„å†…éƒ¨è¢«å…¶å®ƒç±»æ‰€ç»§æ‰¿ï¼›å¯¹äºç±»å¯¹è±¡å’Œå…ƒç±»å¯¹è±¡ï¼Œisa åœ¨ objc_object ç»“æ„ä½“ä¸­è¢«ç»§æ‰¿ã€‚"/>
<meta name="keywords" content="kingcos.me,maimieng.comios,swift,objective-c,obj-c,objc,oc,geek,python,ruby,golang,go,apple,mac"/>
<meta name="robots" content="noodp"/>
<link rel="canonical" href="/posts/2019/isa_in_objc/" />





<link rel="stylesheet" href="/assets/style.css">


<link rel="stylesheet" href="/style.css">


<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/img/apple-touch-icon-144-precomposed.png">
<link rel="shortcut icon" href="/img/favicon.png">


<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Obj-C ä¸­çš„ isa æŒ‡é’ˆ"/>
<meta name="twitter:description" content="`isa` æŒ‡é’ˆæ˜¯æ‰€æœ‰ Obj-C å¯¹è±¡ä¸­éƒ½æ‹¥æœ‰çš„ä¸€ä¸ªæˆå‘˜ã€‚å› ä¸ºé™¤äº†ç»§æ‰¿é“¾ä¹‹å¤–ï¼ŒObj-C è¿˜ç‰¹æœ‰ä¸€æ¡ä»å®ä¾‹å¯¹è±¡åˆ°ç±»å¯¹è±¡ã€å…ƒç±»å¯¹è±¡çš„é“¾ã€‚è€Œåè€…æ­£æ˜¯ä¾é  `isa` è€Œä¸²è”èµ·æ¥çš„ï¼Œé‚£ä¹ˆæœ¬æ–‡å°±å°†ç»“åˆæºç è°ˆè°ˆ Obj-C ä¸­çš„ `isa`ã€‚"/>



<meta property="og:title" content="Obj-C ä¸­çš„ isa æŒ‡é’ˆ" />
<meta property="og:description" content="`isa` æŒ‡é’ˆæ˜¯æ‰€æœ‰ Obj-C å¯¹è±¡ä¸­éƒ½æ‹¥æœ‰çš„ä¸€ä¸ªæˆå‘˜ã€‚å› ä¸ºé™¤äº†ç»§æ‰¿é“¾ä¹‹å¤–ï¼ŒObj-C è¿˜ç‰¹æœ‰ä¸€æ¡ä»å®ä¾‹å¯¹è±¡åˆ°ç±»å¯¹è±¡ã€å…ƒç±»å¯¹è±¡çš„é“¾ã€‚è€Œåè€…æ­£æ˜¯ä¾é  `isa` è€Œä¸²è”èµ·æ¥çš„ï¼Œé‚£ä¹ˆæœ¬æ–‡å°±å°†ç»“åˆæºç è°ˆè°ˆ Obj-C ä¸­çš„ `isa`ã€‚" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/2019/isa_in_objc/" />
<meta property="article:published_time" content="2019-08-18T00:00:00+00:00" />
<meta property="article:modified_time" content="2019-08-18T00:00:00+00:00" /><meta property="og:site_name" content="iBlog" />






  </head>
  <body class="dark-theme">
    <div class="container">
      <header class="header">
  <span class="header__inner">
    <a href="/" class="logo" style="text-decoration: none;">
  
    <span class="logo__mark"><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44">
  <path fill="none" d="M15 8l14.729 14.382L15 35.367"/>
</svg>
</span>
    <span class="logo__text">kingcos.me</span>
    <span class="logo__cursor"></span>
  
</a>

    <span class="header__right">
      
        <nav class="menu">
  <ul class="menu__inner menu__inner--desktop">
    
      
        
          <li><a href="/about">About</a></li>
        
      
        
          <li><a href="/links">Links</a></li>
        
      
        
          <li><a href="/perspective">Perspective</a></li>
        
      
        
          <li><a href="/words">Words</a></li>
        
      
      
    
  </ul>

  <ul class="menu__inner menu__inner--mobile">
    
      
        <li><a href="/about">About</a></li>
      
    
      
        <li><a href="/links">Links</a></li>
      
    
      
        <li><a href="/perspective">Perspective</a></li>
      
    
      
        <li><a href="/words">Words</a></li>
      
    
  </ul>
</nav>

        <span class="menu-trigger">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M0 0h24v24H0z" fill="none"/>
            <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
          </svg>
        </span>
      
      <span class="theme-toggle">
        <svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M22 41C32.4934 41 41 32.4934 41 22C41 11.5066 32.4934 3 22
  3C11.5066 3 3 11.5066 3 22C3 32.4934 11.5066 41 22 41ZM7 22C7
  13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22Z"/>
</svg>

      </span>
    </span>
  </span>
</header>


      <div class="content">
        
  <div class="post">
    <h2 class="post-title"><a href="/posts/2019/isa_in_objc/">Obj-C ä¸­çš„ isa æŒ‡é’ˆ</a></h2>
    <div class="post-meta">
      
        <span class="post-date">
            2019-08-18
        </span>
      
      
      
        <span class="post-read-time">â€” 2 min read</span>
      
    </div>

    
      <span class="post-tags">
        
          #<a href="/tags/focus/">Focus</a>&nbsp;
        
          #<a href="/tags/ios/">iOS</a>&nbsp;
        
          #<a href="/tags/obj-c/">Obj-C</a>&nbsp;
        
          #<a href="/tags//">ğŸŒŸ</a>&nbsp;
        
      </span>
    

    

    <div class="post-content">
      <table>
<thead>
<tr>
<th align="center">Date</th>
<th align="center">Notes</th>
<th align="center">Refer.</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">2019-08-18</td>
<td align="center">é¦–æ¬¡æäº¤</td>
<td align="center"><a href="https://opensource.apple.com/tarballs/objc4/">objc4-750.1</a></td>
</tr>
</tbody>
</table>
<p><img src="/img/2019/isa_in_objc/0.png" alt="0"></p>
<h2 id="preface">Preface</h2>
<p><code>isa</code> æŒ‡é’ˆæ˜¯æ‰€æœ‰ Obj-C å¯¹è±¡ä¸­éƒ½æ‹¥æœ‰çš„ä¸€ä¸ªæˆå‘˜ã€‚å› ä¸ºé™¤äº†ç»§æ‰¿é“¾ä¹‹å¤–ï¼ŒObj-C è¿˜ç‰¹æœ‰ä¸€æ¡ä»å®ä¾‹å¯¹è±¡åˆ°ç±»å¯¹è±¡ã€å…ƒç±»å¯¹è±¡çš„é“¾ã€‚è€Œåè€…æ­£æ˜¯ä¾é  <code>isa</code> è€Œä¸²è”èµ·æ¥çš„ï¼Œé‚£ä¹ˆæœ¬æ–‡å°±å°†ç»“åˆæºç è°ˆè°ˆ Obj-C ä¸­çš„ <code>isa</code>ã€‚</p>
<p>å¯¹äºä¸å¤§ç†Ÿæ‚‰ Obj-C ä¸­å¯¹è±¡çš„åŒå­¦ï¼Œå¯ä»¥å…ˆè¡Œé˜…è¯» <a href="../objects_in_obj-c/">Obj-C ä¸­çš„å¯¹è±¡</a>ä¸€æ–‡ã€‚</p>
<h2 id="where">Where</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#75715e">// NSObject.h
</span><span style="color:#75715e"></span><span style="color:#960050;background-color:#1e0010">@</span>interface NSObject <span style="color:#f92672">&lt;</span>NSObject<span style="color:#f92672">&gt;</span> {
<span style="color:#75715e">#</span><span style="color:#75715e">pragma clang diagnostic push</span><span style="color:#75715e">
</span><span style="color:#75715e"></span><span style="color:#75715e">#</span><span style="color:#75715e">pragma clang diagnostic ignored &#34;-Wobjc-interface-ivars&#34;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span>    Class isa  OBJC_ISA_AVAILABILITY; <span style="color:#75715e">// â¬…ï¸
</span><span style="color:#75715e"></span><span style="color:#75715e">#</span><span style="color:#75715e">pragma clang diagnostic pop</span><span style="color:#75715e">
</span><span style="color:#75715e"></span>}

<span style="color:#75715e">// objc-runtime-new.h
</span><span style="color:#75715e"></span><span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">objc_class</span> <span style="color:#f92672">:</span> objc_object {
    <span style="color:#75715e">// Class ISA;
</span><span style="color:#75715e"></span>}

<span style="color:#75715e">// objc-private.h
</span><span style="color:#75715e"></span><span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">objc_object</span> {
<span style="color:#66d9ef">private</span><span style="color:#f92672">:</span>
    isa_t isa; <span style="color:#75715e">// â¬…ï¸
</span><span style="color:#75715e"></span>}
</code></pre></div><p>å¦‚ä¸Šï¼Œå¯¹äºå®ä¾‹å¯¹è±¡ï¼Œ<code>isa</code> å®šä¹‰åœ¨åŸºç±» <code>NSObject</code> çš„å†…éƒ¨è¢«å…¶å®ƒç±»æ‰€ç»§æ‰¿ï¼›å¯¹äºç±»å¯¹è±¡å’Œå…ƒç±»å¯¹è±¡ï¼Œ<code>isa</code> åœ¨ <code>objc_object</code> ç»“æ„ä½“ä¸­è¢«ç»§æ‰¿ã€‚</p>
<p><img src="/img/2019/isa_in_objc/1.png" alt="1"></p>
<p>å®ä¾‹å¯¹è±¡ä¸­çš„ <code>isa</code> æŒ‡å‘ç±»å¯¹è±¡ï¼Œç±»å¯¹è±¡ä¸­çš„ <code>isa</code> æŒ‡å‘å…ƒç±»å¯¹è±¡ï¼Œå…ƒç±»å¯¹è±¡ä¸­çš„ <code>isa</code> æŒ‡å‘æ ¹å…ƒç±»å¯¹è±¡ï¼ˆåŒ…æ‹¬æ ¹å…ƒç±»å¯¹è±¡ä¹ŸæŒ‡å‘è‡ªå·±ï¼‰ã€‚</p>
<h2 id="what">What</h2>
<p>é‚£ä¹ˆ <code>isa</code> åˆ°åº•æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå…¶å®åœ¨ ARM 64 ä¹‹å‰ï¼Œ<code>isa</code> ç›´æ¥ä¿å­˜äº†ç±»å¯¹è±¡æˆ–è€…å…ƒç±»å¯¹è±¡çš„åœ°å€ï¼Œè€Œä¹‹åä½¿ç”¨äº†ä½åŸŸç»“æ„å­˜å‚¨äº†æ›´å¤šä¿¡æ¯ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥åœ¨æºç ä¸­è¿½æ ¹æº¯æºæ‰¾åˆ° <code>isa_t</code> ç±»å‹çš„å…±ç”¨ä½“ï¼ˆå…³äºå…±ç”¨ä½“å’Œä½åŸŸï¼Œå¯å‚è€ƒ <a href="../bit_field_union_in_cpp/">C/C++ ä¸­çš„ä½åŸŸä¸å…±ç”¨ä½“</a>ä¸€æ–‡ï¼‰ï¼š</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#75715e">// objc-private.h
</span><span style="color:#75715e"></span><span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">objc_object</span> {
<span style="color:#66d9ef">private</span><span style="color:#f92672">:</span>
    isa_t isa;

<span style="color:#75715e">// ...
</span><span style="color:#75715e"></span>}

<span style="color:#66d9ef">union</span> <span style="color:#a6e22e">isa_t</span> {
    isa_t() { }
    isa_t(uintptr_t value) <span style="color:#f92672">:</span> bits(value) { }

    Class cls;
    uintptr_t bits;
<span style="color:#75715e">#</span><span style="color:#75715e">if defined(ISA_BITFIELD)</span><span style="color:#75715e">
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">struct</span> {
        ISA_BITFIELD;  <span style="color:#75715e">// defined in isa.h
</span><span style="color:#75715e"></span>    };
<span style="color:#75715e">#</span><span style="color:#75715e">endif</span><span style="color:#75715e">
</span><span style="color:#75715e"></span>};

<span style="color:#75715e">// isa.h
</span><span style="color:#75715e"></span><span style="color:#75715e">// ARM 64
</span><span style="color:#75715e"></span><span style="color:#75715e">#</span><span style="color:#75715e"> if __arm64__</span><span style="color:#75715e">
</span><span style="color:#75715e"></span><span style="color:#75715e">#</span><span style="color:#75715e">   define ISA_MASK        0x0000000ffffffff8ULL</span><span style="color:#75715e">
</span><span style="color:#75715e"></span><span style="color:#75715e">#</span><span style="color:#75715e">   define ISA_MAGIC_MASK  0x000003f000000001ULL</span><span style="color:#75715e">
</span><span style="color:#75715e"></span><span style="color:#75715e">#</span><span style="color:#75715e">   define ISA_MAGIC_VALUE 0x000001a000000001ULL</span><span style="color:#75715e">
</span><span style="color:#75715e"></span><span style="color:#75715e">#</span><span style="color:#75715e">   define ISA_BITFIELD                                                      \</span><span style="color:#75715e">
</span><span style="color:#75715e"></span><span style="color:#75715e">      uintptr_t nonpointer        : 1;                                       \</span><span style="color:#75715e">
</span><span style="color:#75715e"></span><span style="color:#75715e">      uintptr_t has_assoc         : 1;                                       \</span><span style="color:#75715e">
</span><span style="color:#75715e"></span><span style="color:#75715e">      uintptr_t has_cxx_dtor      : 1;                                       \</span><span style="color:#75715e">
</span><span style="color:#75715e"></span><span style="color:#75715e">      uintptr_t shiftcls          : 33; </span><span style="color:#75715e">/*MACH_VM_MAX_ADDRESS 0x1000000000*/</span><span style="color:#75715e"> \</span><span style="color:#75715e">
</span><span style="color:#75715e"></span><span style="color:#75715e">      uintptr_t magic             : 6;                                       \</span><span style="color:#75715e">
</span><span style="color:#75715e"></span><span style="color:#75715e">      uintptr_t weakly_referenced : 1;                                       \</span><span style="color:#75715e">
</span><span style="color:#75715e"></span><span style="color:#75715e">      uintptr_t deallocating      : 1;                                       \</span><span style="color:#75715e">
</span><span style="color:#75715e"></span><span style="color:#75715e">      uintptr_t has_sidetable_rc  : 1;                                       \</span><span style="color:#75715e">
</span><span style="color:#75715e"></span><span style="color:#75715e">      uintptr_t extra_rc          : 19</span><span style="color:#75715e">
</span><span style="color:#75715e"></span><span style="color:#75715e">#</span><span style="color:#75715e">   define RC_ONE   (1ULL&lt;&lt;45)</span><span style="color:#75715e">
</span><span style="color:#75715e"></span><span style="color:#75715e">#</span><span style="color:#75715e">   define RC_HALF  (1ULL&lt;&lt;18)</span><span style="color:#75715e">
</span><span style="color:#75715e"></span>
<span style="color:#75715e">// _uintptr_t.h
</span><span style="color:#75715e"></span><span style="color:#75715e">#</span><span style="color:#75715e">ifndef _UINTPTR_T</span><span style="color:#75715e">
</span><span style="color:#75715e"></span><span style="color:#75715e">#</span><span style="color:#75715e">define _UINTPTR_T</span><span style="color:#75715e">
</span><span style="color:#75715e"></span><span style="color:#66d9ef">typedef</span> <span style="color:#66d9ef">unsigned</span> <span style="color:#66d9ef">long</span>           uintptr_t;
<span style="color:#75715e">#</span><span style="color:#75715e">endif </span><span style="color:#75715e">/* _UINTPTR_T */</span><span style="color:#75715e">
</span></code></pre></div><p>ä¸ºäº†æœ€å¤§ç¨‹åº¦åœ°ä¼˜åŒ–å†…å­˜å ç”¨ï¼Œ<code>isa</code> ä½¿ç”¨äº†ä½åŸŸä¸å…±ç”¨ä½“ç»“æ„ï¼Œå°† <code>unsigned long</code> çš„ 8 ä¸ªå­—èŠ‚åˆ†ä¸º 64 ä½æ¥ä½¿ç”¨ã€‚åœ¨ ARM 64 ç»“æ„ä¹‹ä¸‹ï¼Œ<code>isa</code> ä¸­çš„å†…å®¹å¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr>
<th align="center">ISA_BITFIELD</th>
<th align="center">Bits</th>
<th align="center">Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">nonpointer</td>
<td align="center">1</td>
<td align="center"><code>0</code>ï¼šæ™®é€šæŒ‡é’ˆï¼Œç›´æ¥å­˜å‚¨ç±»æˆ–å…ƒç±»å¯¹è±¡çš„åœ°å€<!-- raw HTML omitted --><code>1</code>ï¼šç»è¿‡ä¼˜åŒ–çš„æŒ‡é’ˆï¼Œä½¿ç”¨ä½åŸŸç»“æ„å­˜å‚¨äº†æ›´å¤šä¿¡æ¯</td>
</tr>
<tr>
<td align="center">has_assoc</td>
<td align="center">1</td>
<td align="center"><code>0</code>ï¼šæ ‡è®°æœªè®¾ç½®è¿‡å…³è”å¯¹è±¡<!-- raw HTML omitted --><code>1</code>ï¼šæ ‡è®°è®¾ç½®è¿‡å…³è”å¯¹è±¡</td>
</tr>
<tr>
<td align="center">has_cxx_dtor</td>
<td align="center">1</td>
<td align="center"><code>0</code>ï¼šæ ‡è®°æ²¡æœ‰ C++ ææ„å‡½æ•°<!-- raw HTML omitted --><code>1</code>ï¼šæ ‡è®°æœ‰ C++ ææ„å‡½æ•°</td>
</tr>
<tr>
<td align="center">shiftcls</td>
<td align="center">33</td>
<td align="center">å­˜å‚¨ç±»æˆ–å…ƒç±»å¯¹è±¡çš„åœ°å€</td>
</tr>
<tr>
<td align="center">magic</td>
<td align="center">6</td>
<td align="center">è°ƒè¯•æ—¶åˆ†è¾¨å¯¹è±¡æ˜¯å¦æœªå®Œæˆåˆå§‹åŒ–</td>
</tr>
<tr>
<td align="center">weakly_referenced</td>
<td align="center">1</td>
<td align="center"><code>0</code>ï¼šæ ‡è®°æœªå¼±å¼•ç”¨è¿‡<!-- raw HTML omitted --><code>1</code>ï¼šæ ‡è®°å¼±å¼•ç”¨è¿‡</td>
</tr>
<tr>
<td align="center">deallocating</td>
<td align="center">1</td>
<td align="center"><code>0</code>ï¼šå¯¹è±¡æœªæ­£åœ¨é‡Šæ”¾<!-- raw HTML omitted --><code>1</code>ï¼šå¯¹è±¡æ­£åœ¨é‡Šæ”¾</td>
</tr>
<tr>
<td align="center">has_sidetable_rc</td>
<td align="center">1</td>
<td align="center"><code>0</code>ï¼šå¼•ç”¨è®¡æ•°å­˜å‚¨åœ¨ extra_rc<!-- raw HTML omitted --><code>1</code>ï¼šå¼•ç”¨è®¡æ•°è¿‡å¤§ï¼Œå­˜å‚¨åœ¨ side table ç±»çš„å±æ€§ä¸­</td>
</tr>
<tr>
<td align="center">extra_rc</td>
<td align="center">19</td>
<td align="center">å­˜å‚¨å¼•ç”¨è®¡æ•° - 1</td>
</tr>
</tbody>
</table>
<p>å¾—åˆ°äº† <code>isa</code> ä¸­å„ä¸ªæˆå‘˜çš„ä½æ•°ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡æ©ç æ¥è¿ç®—å¾—å‡ºæˆ‘ä»¬æƒ³è¦çš„éƒ¨åˆ†ã€‚æ¯”å¦‚ <code>ISA_MASK</code>ï¼Œ<code>0x0000000ffffffff8</code> æ¢ç®—ä¸ºäºŒè¿›åˆ¶å³ <code>0b 0000 0000 0000 0000 0000 0000 0000 1111 1111 1111 1111 1111 1111 1111 1111 1000</code>ï¼Œå› æ­¤å¦‚æœä½¿ç”¨ <code>&amp;</code> é€»è¾‘ä¸å°†æŠŠ <code>shiftcls</code> å³ç±»æˆ–å…ƒç±»å¯¹è±¡çš„åœ°å€å¾—å‡ºï¼š</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-objectivec" data-lang="objectivec"><span style="color:#75715e">#</span><span style="color:#75715e">import &lt;Foundation</span><span style="color:#75715e">/</span><span style="color:#75715e">Foundation.h&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span><span style="color:#75715e">#</span><span style="color:#75715e">import &lt;objc</span><span style="color:#75715e">/</span><span style="color:#75715e">runtime.h&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">@interface</span> <span style="color:#a6e22e">Foo</span> : <span style="color:#a6e22e">NSObject</span>
<span style="color:#66d9ef">@end</span>

<span style="color:#66d9ef">@implementation</span> <span style="color:#a6e22e">Foo</span>
<span style="color:#66d9ef">@end</span>

<span style="color:#66d9ef">int</span> main(<span style="color:#66d9ef">int</span> argc, <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span> <span style="color:#f92672">*</span> argv[]) {
    <span style="color:#66d9ef">@autoreleasepool</span> {
        Foo <span style="color:#f92672">*</span>foo <span style="color:#f92672">=</span> [[Foo alloc] init];

        NSLog(<span style="color:#e6db74">@&#34;</span><span style="color:#e6db74">%p</span><span style="color:#e6db74">&#34;</span>, object_getClass(foo));
    }
}

<span style="color:#75715e">// LLDB:
</span><span style="color:#75715e"></span><span style="color:#75715e">// (lldb) p/x foo-&gt;isa
</span><span style="color:#75715e"></span><span style="color:#75715e">// (Class) $0 = 0x001d800100002479 Foo
</span><span style="color:#75715e"></span><span style="color:#75715e">// (lldb) p/x 0x001d800100002479 &amp; 0x0000000ffffffff8ULL
</span><span style="color:#75715e"></span><span style="color:#75715e">// (unsigned long long) $1 = 0x0000000100002478
</span><span style="color:#75715e"></span><span style="color:#75715e">// 2019-08-19 01:36:16.856340+0800 Block_in_Obj-C[77178:84300219] 0x100002478
</span></code></pre></div><h2 id="reference">Reference</h2>
<ul>
<li><a href="../bit_field_union_in_cpp/">C/C++ ä¸­çš„ä½åŸŸä¸å…±ç”¨ä½“ - kingcos</a></li>
<li><a href="../objects_in_obj-c/">Obj-C ä¸­çš„å¯¹è±¡ - kingcos</a></li>
</ul>

    </div>
    
      <div class="pagination">
        <div class="pagination__title">
          <span class="pagination__title-h">Read other posts</span>
          <hr />
        </div>
        <div class="pagination__buttons">
          
            <span class="button previous">
              <a href="/posts/2019/swift_tips_in_reverse/">
                <span class="button__icon">â†</span>
                <span class="button__text">SwiftTips in Reverse</span>
              </a>
            </span>
          
          
            <span class="button next">
              <a href="/posts/2019/bit_field_union_in_cpp/">
                <span class="button__text">C/C&#43;&#43; ä¸­çš„ä½åŸŸä¸å…±ç”¨ä½“</span>
                <span class="button__icon">â†’</span>
              </a>
            </span>
          
        </div>
      </div>
    

    

    
    
    <div>
      <div id="github-comment">
      </div>

      <script type="text/javascript">
        function getUtterances(isDark) {
          var utterances = document.createElement('script');
          utterances.type = 'text/javascript';
          utterances.async = true;
          utterances.setAttribute('issue-term', "pathname")
          utterances.setAttribute('repo', "kingcos\/kingcos.github.io")
          utterances.setAttribute('label', "comments")
          isDark ? utterances.setAttribute('theme', "github-dark") : utterances.setAttribute('theme', "github-light")
          utterances.crossorigin = 'anonymous';
          utterances.src = 'https://utteranc.es/client.js';

          return utterances
        }

        var themeToggle = document.querySelector(".theme-toggle")
        themeToggle.addEventListener("click", function () {
          var getTheme = window.localStorage && window.localStorage.getItem("theme")
          var divNode = document.getElementById('github-comment')
          while(divNode.hasChildNodes()) {
            divNode.removeChild(divNode.firstChild);
          }
          
          
          

          
          
          
          
          
          
          document.getElementById('github-comment').appendChild(getUtterances(getTheme !== "dark"))
        })

        var getTheme = window.localStorage && window.localStorage.getItem("theme")
        document.getElementById('github-comment').appendChild(getUtterances(getTheme === "dark"))
      </script>
    </div>
    

    </div>

      </div>

      
        <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright copyright--user">All rights reserved by kingcos.me</div>
    
  </div>
</footer>

<script src="/assets/main.js"></script>
<script src="/assets/prism.js"></script>


      
    </div>

    
      
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-138311951-1', 'auto');
	
	ga('send', 'pageview');
}
</script>

    
  </body>
</html>

<!DOCTYPE html>
<html lang="en">
  <head>
    
      <title>iOS 开发问题解决集锦 :: iBlog</title>
    
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="description" content="Unable to boot device in current state: Creating  Xcode: 9.4.1 macOS: 10.13 在使用模拟器或者 xcodebuild test 时可能会出现此问题。  Solution  使用 xcrun simctl list 命令列出所有模拟器机型，用 xcrun simctl erase UDID 还原相应的设备，重试即可。 下面是一个 Python 3 脚本，可以使用 python erase_simulators.py -d &#39;DEVICE_TYPE&#39; 来直接还原相应设备类型的所有设备。  # -*- coding: utf-8 -*- import argparse import subprocess import re def erase_device(device): status, output = subprocess.getstatusoutput(&amp;#39;xcrun simctl list | grep \&amp;#39;&amp;#39; &#43; device &#43; &amp;#39; (\&amp;#39;&amp;#39;) if status == 0: outputs = output."/>
<meta name="keywords" content="kingcos.me,maimieng.comios,swift,objective-c,obj-c,objc,oc,geek,python,ruby,golang,go,apple,mac"/>
<meta name="robots" content="noodp"/>
<link rel="canonical" href="/posts/2018/ios_dev_issue_list/" />





<link rel="stylesheet" href="/assets/style.css">


<link rel="stylesheet" href="/style.css">


<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/img/apple-touch-icon-144-precomposed.png">
<link rel="shortcut icon" href="/img/favicon.png">


<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="iOS 开发问题解决集锦"/>
<meta name="twitter:description" content="持续更新 ing"/>



<meta property="og:title" content="iOS 开发问题解决集锦" />
<meta property="og:description" content="持续更新 ing" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/2018/ios_dev_issue_list/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-07-10T00:00:00&#43;00:00" />
<meta property="article:modified_time" content="2018-07-10T00:00:00&#43;00:00" /><meta property="og:site_name" content="iBlog" />





<script data-ad-client="ca-pub-9925978992661955" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

  </head>
  <body class="">
    <div class="container">
      <header class="header">
  <span class="header__inner">
    <a href="/" class="logo" style="text-decoration: none;">
  
    <span class="logo__mark"><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44">
  <path fill="none" d="M15 8l14.729 14.382L15 35.367"/>
</svg>
</span>
    <span class="logo__text">kingcos.me</span>
    <span class="logo__cursor"></span>
  
</a>

    <span class="header__right">
      
        <nav class="menu">
  <ul class="menu__inner menu__inner--desktop">
    
      
        
          <li><a href="/about">About</a></li>
        
      
        
          <li><a href="/read">Read</a></li>
        
      
      
    
  </ul>

  <ul class="menu__inner menu__inner--mobile">
    
      
        <li><a href="/about">About</a></li>
      
    
      
        <li><a href="/read">Read</a></li>
      
    
  </ul>
</nav>

        <span class="menu-trigger">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M0 0h24v24H0z" fill="none"/>
            <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
          </svg>
        </span>
      
      <span class="theme-toggle">
        <svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M22 41C32.4934 41 41 32.4934 41 22C41 11.5066 32.4934 3 22
  3C11.5066 3 3 11.5066 3 22C3 32.4934 11.5066 41 22 41ZM7 22C7
  13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22Z"/>
</svg>

      </span>
    </span>
  </span>
</header>


      <div class="content">
        
  <div class="post">
    <h2 class="post-title"><a href="/posts/2018/ios_dev_issue_list/">iOS 开发问题解决集锦</a></h2>
    <div class="post-meta">
      
        <span class="post-date">
            2018-07-10
        </span>
      
      
      
        <span class="post-read-time">— 2 min read</span>
      
    </div>

    
      <span class="post-tags">
        
          #<a href="/tags/tips/">Tips</a>&nbsp;
        
          #<a href="/tags/ios/">iOS</a>&nbsp;
        
      </span>
    

    

    <div class="post-content">
      <h2 id="unable-to-boot-device-in-current-state-creating">Unable to boot device in current state: Creating</h2>
<ul>
<li>Xcode: 9.4.1</li>
<li>macOS: 10.13</li>
<li>在使用模拟器或者 <code>xcodebuild test</code> 时可能会出现此问题。</li>
</ul>
<h4 id="solution">Solution</h4>
<ul>
<li>使用 <code>xcrun simctl list</code> 命令列出所有模拟器机型，用 <code>xcrun simctl erase UDID</code> 还原相应的设备，重试即可。</li>
<li>下面是一个 Python 3 脚本，可以使用 <code>python erase_simulators.py -d 'DEVICE_TYPE'</code> 来直接还原相应设备类型的所有设备。</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># -*- coding: utf-8 -*-</span>

<span style="color:#f92672">import</span> argparse
<span style="color:#f92672">import</span> subprocess
<span style="color:#f92672">import</span> re

<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">erase_device</span>(device):
    status, output <span style="color:#f92672">=</span> subprocess<span style="color:#f92672">.</span>getstatusoutput(<span style="color:#e6db74">&#39;xcrun simctl list | grep </span><span style="color:#ae81ff">\&#39;</span><span style="color:#e6db74">&#39;</span> <span style="color:#f92672">+</span> device <span style="color:#f92672">+</span> <span style="color:#e6db74">&#39; (</span><span style="color:#ae81ff">\&#39;</span><span style="color:#e6db74">&#39;</span>)
    <span style="color:#66d9ef">if</span> status <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>:
        outputs <span style="color:#f92672">=</span> output<span style="color:#f92672">.</span>split(<span style="color:#e6db74">&#39;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#39;</span>)
        <span style="color:#66d9ef">for</span> output <span style="color:#f92672">in</span> outputs:
            simulator_udids <span style="color:#f92672">=</span> re<span style="color:#f92672">.</span>findall(<span style="color:#e6db74">&#39;[A-Z0-9-]{36}&#39;</span>, output)
            <span style="color:#66d9ef">if</span> simulator_udids <span style="color:#f92672">!=</span> []:
                <span style="color:#66d9ef">for</span> udid <span style="color:#f92672">in</span> simulator_udids:
                    subprocess<span style="color:#f92672">.</span>getstatusoutput(<span style="color:#e6db74">&#39;xcrun simctl erase&#39;</span> <span style="color:#f92672">+</span> udid)
                    <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;Already erased &#39;</span> <span style="color:#f92672">+</span> device <span style="color:#f92672">+</span> <span style="color:#e6db74">&#39; - UDID: &#39;</span> <span style="color:#f92672">+</span> udid)

<span style="color:#66d9ef">if</span> __name__ <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;__main__&#39;</span>:
    iphone_64_devices <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#39;iPhone 5s&#39;</span>, <span style="color:#e6db74">&#39;iPhone 6&#39;</span>, <span style="color:#e6db74">&#39;iPhone 6 Plus&#39;</span>, <span style="color:#e6db74">&#39;iPhone 6s&#39;</span>, <span style="color:#e6db74">&#39;iPhone 6s Plus&#39;</span>, <span style="color:#e6db74">&#39;iPhone 7&#39;</span>, <span style="color:#e6db74">&#39;iPhone 7 Plus&#39;</span>, <span style="color:#e6db74">&#39;iPhone 8&#39;</span>, <span style="color:#e6db74">&#39;iPhone 8 Plus&#39;</span>, <span style="color:#e6db74">&#39;iPhone X&#39;</span>]
    parser <span style="color:#f92672">=</span> argparse<span style="color:#f92672">.</span>ArgumentParser()
    parser<span style="color:#f92672">.</span>add_argument(<span style="color:#e6db74">&#39;-d&#39;</span>, <span style="color:#e6db74">&#39;--device&#39;</span>, help<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Specify the simulator device, eg. iPhone X&#39;</span>, choices<span style="color:#f92672">=</span>iphone_64_devices)
    args <span style="color:#f92672">=</span> parser<span style="color:#f92672">.</span>parse_args()
    <span style="color:#66d9ef">if</span> args<span style="color:#f92672">.</span>device <span style="color:#f92672">is</span> <span style="color:#f92672">not</span> None:
        erase_device(args<span style="color:#f92672">.</span>device)
    <span style="color:#66d9ef">else</span>:
        <span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;Please specify the device option!&#39;</span>)
</code></pre></div><h3 id="the-operation-couldnt-be-completed-dvtcoresimulatoradditionserrordomain-error-0">The operation couldn’t be completed. (DVTCoreSimulatorAdditionsErrorDomain error 0.)</h3>
<ul>
<li>Xcode: 10</li>
<li>macOS: 10.14</li>
<li>在清空了 <code>~/Library/Developer/CoreSimulator/Devices</code> 后 <code>xcodebuild test</code> 时出现此问题。</li>
</ul>
<h4 id="solution-1">Solution</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">xcrun simctl erase all
</code></pre></div><h2 id="cannot-find-srcrootinfoplist">Cannot find &ldquo;$(SRCROOT)/*/Info.plist&rdquo;</h2>
<ul>
<li>Fastlane <code>increment_version_number</code></li>
<li><code>agvtool new-marketing-version x.x.x</code></li>
<li>某些 Target 无法使用命令批量更新版本号时出现此问题。</li>
</ul>
<h4 id="solution-2">Solution</h4>
<ul>
<li>在项目的 Build Settings 中搜索 <code>$(SRCROOT)</code>，删除包含该内容条目中的 <code>$(SRCROOT)</code> 变量（通常是 <code>INFOPLIST_FILE</code> 字段）。</li>
</ul>
<hr>
<h2 id="failed-to-verify-bitcode-in-">Failed to verify bitcode in *</h2>
<ul>
<li>当主 Target 未开启 Bitcode 时，Archive 后，通常有「Rebuild from bitcode」选项，勾选时可能会出现此问题；</li>
<li>抑或使用 Fastlane「build_ios_app」打包，出现该问题。</li>
</ul>
<h4 id="solution-3">Solution</h4>
<ul>
<li>手动打包不勾选「Rebuild from bitcode」选项即可；</li>
<li>Fastlane 需要在关闭 Bitcode，具体如下：</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ruby" data-lang="ruby">build_ios_app(<span style="color:#e6db74">export_options</span>: { <span style="color:#e6db74">compileBitcode</span>: <span style="color:#66d9ef">false</span> })
</code></pre></div><h2 id="missing-password-for-user-xxxyyycom-and-running-in-non-interactive-shell">Missing password for user <a href="mailto:xxx@yyy.com">xxx@yyy.com</a>, and running in non-interactive shell</h2>
<ul>
<li>Fastlane 上传 App Store 时会出现该问题。</li>
</ul>
<h4 id="solution-4">Solution</h4>
<ul>
<li>根据 <a href="https://github.com/fastlane/fastlane/tree/master/credentials_manager">https://github.com/fastlane/fastlane/tree/master/credentials_manager</a> 添加打包上传 App Store 的 Apple ID 资格，如需更改密码，可先移除再添加即可（需搭配 unlock_keychain 使用）。</li>
</ul>
<hr>
<h2 id="no-value-found-for-username">No value found for &lsquo;username&rsquo;</h2>
<ul>
<li>Fastlane 上传 App Store 时会出现该问题。</li>
</ul>
<h4 id="solution-5">Solution</h4>
<ul>
<li><code>No value found for 'username'</code> 是 Pilot（<a href="https://docs.fastlane.tools/actions/upload_to_testflight/">upload_to_testflight</a>）的报错信息；</li>
<li>可在 AppFile 配置上传 App Store 的 Apple ID，或在 upload_to_testflight 添加 username 参数，并按照上条 Tips 添加账号密码至 Key Chain。</li>
</ul>
<hr>
<h2 id="please-see-simulator-help-for-information-on-adjusting-system-settings-to-allow-more-simulated-devices-to-boot-at-once">Please see Simulator Help for information on adjusting system settings to allow more simulated devices to boot at once.</h2>
<ul>
<li>在使用模拟器作为 destination 时出现此错误。</li>
</ul>
<h4 id="solution-6">Solution</h4>
<ul>
<li><a href="https://help.apple.com/simulator/mac/9.0/index.html#/dev8a5f2aa4e">官方文档</a>。</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">sudo launchctl limit maxproc <span style="color:#ae81ff">2000</span> <span style="color:#ae81ff">2500</span>
</code></pre></div><h2 id="在-iphone-x-及以上全面屏机型-uiwebview-的内容未填充整个视图">在 iPhone X 及以上全面屏机型 UIWebView 的内容未填充整个视图</h2>
<ul>
<li>视图层级关系：UIWebView &gt; UIWebScrollView &gt; UIWebBrowserView</li>
<li>由于 iPhone X 带来的全面屏，系统会自动对其中的 UIWebBrowserView 进行调整，导致即使设置 UIWebView 整体的约束，显示的内容区域也时有问题。</li>
</ul>
<h4 id="solution-7">Solution</h4>
<ul>
<li>将其中的 UIScrollView 的自动调整行为关闭即可。</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">if</span> <span style="color:#75715e">#available</span>(<span style="color:#75715e">iOS</span> <span style="color:#ae81ff">11.0</span>, <span style="color:#f92672">*</span>) {
    webView.scrollView.contentInsetAdjustmentBehavior = .never
}
</code></pre></div>
    </div>
    
      <div class="pagination">
        <div class="pagination__title">
          <span class="pagination__title-h">Read other posts</span>
          <hr />
        </div>
        <div class="pagination__buttons">
          
            <span class="button previous">
              <a href="/posts/2018/airplay_on_pi/">
                <span class="button__icon">←</span>
                <span class="button__text">将树莓派作为 AirPlay 音频服务器</span>
              </a>
            </span>
          
          
            <span class="button next">
              <a href="/posts/2018/uncovering_sourcekit/">
                <span class="button__text">[译] 起底 SourceKit</span>
                <span class="button__icon">→</span>
              </a>
            </span>
          
        </div>
      </div>
    

    

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<table style="border: 0;">
  <tr>
  <td style="border: 0; width: 30%;">
    <img src='/img/about/1.jpg'>
  </td>
  <td style="border: 0;">
    <ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-9925978992661955"
     data-ad-slot="3213735320"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
  </td>
  </tr>
</table>



<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>


    
    
    <div>
      <div id="github-comment">
      </div>

      <script type="text/javascript">
        function getUtterances(isDark) {
          var utterances = document.createElement('script');
          utterances.type = 'text/javascript';
          utterances.async = true;
          utterances.setAttribute('issue-term', "pathname")
          utterances.setAttribute('repo', "kingcos\/kingcos.github.io")
          utterances.setAttribute('label', "comments")
          isDark ? utterances.setAttribute('theme', "github-dark") : utterances.setAttribute('theme', "github-light")
          utterances.crossorigin = 'anonymous';
          utterances.src = 'https://utteranc.es/client.js';

          return utterances
        }

        var themeToggle = document.querySelector(".theme-toggle")
        themeToggle.addEventListener("click", function () {
          var getTheme = window.localStorage && window.localStorage.getItem("theme")
          var divNode = document.getElementById('github-comment')
          while(divNode.hasChildNodes()) {
            divNode.removeChild(divNode.firstChild);
          }
          
          
          

          
          
          
          
          
          
          document.getElementById('github-comment').appendChild(getUtterances(getTheme !== "dark"))
        })

        var getTheme = window.localStorage && window.localStorage.getItem("theme")
        document.getElementById('github-comment').appendChild(getUtterances(getTheme === "dark"))
      </script>
    </div>
    

    </div>

      </div>

      
        <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright copyright--user">All rights reserved by kingcos.me</div>
    
  </div>
</footer>

<script src="/assets/main.js"></script>
<script src="/assets/prism.js"></script>



      
    </div>

    
      
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-138311951-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
    
  </body>
</html>

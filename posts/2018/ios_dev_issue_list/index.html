<!DOCTYPE html>
<html lang="en">
<head>
  
    <title>iOS 开发问题解决集锦 :: iBlog</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="description" content="Unable to boot device in current state: Creating  Xcode: 9.4.1 macOS: 10.13 在使用模拟器或者 xcodebuild test 时可能会出现此问题。  Solution  使用 xcrun simctl list 命令列出所有模拟器机型，用 xcrun simctl erase UDID 还原相应的设备，重试即可。 下面是一个 Python 3 脚本，可以使用 python erase_simulators.py -d &#39;DEVICE_TYPE&#39; 来直接还原相应设备类型的所有设备。
# -*- coding: utf-8 -*- import argparse import subprocess import re def erase_device(device): status, output = subprocess.getstatusoutput(&#39;xcrun simctl list | grep \&#39;&#39; &#43; device &#43; &#39; (\&#39;&#39;) if status == 0: outputs = output."/>
<meta name="keywords" content=""/>
<meta name="robots" content="noodp"/>
<link rel="canonical" href="/posts/2018/ios_dev_issue_list/" />


<link rel="stylesheet" href="/assets/style.css">

  <link rel="stylesheet" href="/assets/green.css">



<link rel="stylesheet" href="/style.css">


<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/img/apple-touch-icon-144-precomposed.png">

<link rel="shortcut icon" href="/img/favicon/favicon.ico">



<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="iOS 开发问题解决集锦 :: iBlog — " />
<meta name="twitter:description" content="Unable to boot device in current state: Creating  Xcode: 9.4.1 macOS: 10.13 在使用模拟器或者 xcodebuild test 时可能会出现此问题。  Solution  使用 xcrun simctl list 命令列出所有模拟器机型，用 xcrun simctl erase UDID 还原相应的设备，重试即可。 下面是一个 Python 3 脚本，可以使用 python erase_simulators.py -d &#39;DEVICE_TYPE&#39; 来直接还原相应设备类型的所有设备。
# -*- coding: utf-8 -*- import argparse import subprocess import re def erase_device(device): status, output = subprocess.getstatusoutput(&#39;xcrun simctl list | grep \&#39;&#39; &#43; device &#43; &#39; (\&#39;&#39;) if status == 0: outputs = output." />
<meta name="twitter:site" content="/" />
<meta name="twitter:creator" content="" />
<meta name="twitter:image" content="">


<meta property="og:locale" content="en" />
<meta property="og:type" content="article" />
<meta property="og:title" content="iOS 开发问题解决集锦 :: iBlog — ">
<meta property="og:description" content="Unable to boot device in current state: Creating  Xcode: 9.4.1 macOS: 10.13 在使用模拟器或者 xcodebuild test 时可能会出现此问题。  Solution  使用 xcrun simctl list 命令列出所有模拟器机型，用 xcrun simctl erase UDID 还原相应的设备，重试即可。 下面是一个 Python 3 脚本，可以使用 python erase_simulators.py -d &#39;DEVICE_TYPE&#39; 来直接还原相应设备类型的所有设备。
# -*- coding: utf-8 -*- import argparse import subprocess import re def erase_device(device): status, output = subprocess.getstatusoutput(&#39;xcrun simctl list | grep \&#39;&#39; &#43; device &#43; &#39; (\&#39;&#39;) if status == 0: outputs = output." />
<meta property="og:url" content="/posts/2018/ios_dev_issue_list/" />
<meta property="og:site_name" content="iOS 开发问题解决集锦" />
<meta property="og:image" content="">
<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">

<meta property="article:published_time" content="2018-07-10 00:00:00 &#43;0000 UTC" />











</head>
<body class="">


<div class="container center">

  <header class="header">
  <div class="header__inner">
    <div class="header__logo">
      <a href="/">
  <div class="logo">
    iBlog
  </div>
</a>

    </div>
    <div class="menu-trigger">menu</div>
  </div>
  
  
    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-138311951-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

  

  
    <nav class="menu">
  <ul class="menu__inner menu__inner--desktop">
    
      
        
          <li><a href="/about">About &amp; AMA</a></li>
        
      
        
          <li><a href="/links">Links</a></li>
        
      
        
          <li><a href="/perspective">Perspective</a></li>
        
      
        
          <li><a href="/words">Words</a></li>
        
      
      
    
  </ul>

  <ul class="menu__inner menu__inner--mobile">
    
      
        <li><a href="/about">About &amp; AMA</a></li>
      
    
      
        <li><a href="/links">Links</a></li>
      
    
      
        <li><a href="/perspective">Perspective</a></li>
      
    
      
        <li><a href="/words">Words</a></li>
      
    
  </ul>
</nav>

  
</header>


  <div class="content">
    
<div class="post">
  <h1 class="post-title">
    <a href="/posts/2018/ios_dev_issue_list/">iOS 开发问题解决集锦</a></h1>
  <div class="post-meta">
    <span class="post-date">
      2018-07-10
    </span>
    
  </div>

  
  <span class="post-tags">
    
    #<a href="/tags/tips/">Tips</a>&nbsp;
    
    #<a href="/tags/ios/">iOS</a>&nbsp;
    
  </span>
  

  

  <div class="post-content">
    

<h2 id="unable-to-boot-device-in-current-state-creating">Unable to boot device in current state: Creating</h2>

<ul>
<li>Xcode: 9.4.1</li>
<li>macOS: 10.13</li>
<li>在使用模拟器或者 <code>xcodebuild test</code> 时可能会出现此问题。</li>
</ul>

<h4 id="solution">Solution</h4>

<ul>
<li>使用 <code>xcrun simctl list</code> 命令列出所有模拟器机型，用 <code>xcrun simctl erase UDID</code> 还原相应的设备，重试即可。</li>

<li><p>下面是一个 Python 3 脚本，可以使用 <code>python erase_simulators.py -d 'DEVICE_TYPE'</code> 来直接还原相应设备类型的所有设备。</p>

<pre><code class="language-python"># -*- coding: utf-8 -*-

import argparse
import subprocess
import re

def erase_device(device):
status, output = subprocess.getstatusoutput('xcrun simctl list | grep \'' + device + ' (\'')
if status == 0:
    outputs = output.split('\n')
    for output in outputs:
        simulator_udids = re.findall('[A-Z0-9-]{36}', output)
        if simulator_udids != []:
            for udid in simulator_udids:
                subprocess.getstatusoutput('xcrun simctl erase' + udid)
                print('Already erased ' + device + ' - UDID: ' + udid)

if __name__ == '__main__':
iphone_64_devices = ['iPhone 5s', 'iPhone 6', 'iPhone 6 Plus', 'iPhone 6s', 'iPhone 6s Plus', 'iPhone 7', 'iPhone 7 Plus', 'iPhone 8', 'iPhone 8 Plus', 'iPhone X']
parser = argparse.ArgumentParser()
parser.add_argument('-d', '--device', help='Specify the simulator device, eg. iPhone X', choices=iphone_64_devices)
args = parser.parse_args()
if args.device is not None:
    erase_device(args.device)
else:
    print('Please specify the device option!')
</code></pre></li>
</ul>

<h3 id="the-operation-couldn-t-be-completed-dvtcoresimulatoradditionserrordomain-error-0">The operation couldn’t be completed. (DVTCoreSimulatorAdditionsErrorDomain error 0.)</h3>

<ul>
<li>Xcode: 10</li>
<li>macOS: 10.14</li>
<li>在清空了 <code>~/Library/Developer/CoreSimulator/Devices</code> 后 <code>xcodebuild test</code> 时出现此问题。</li>
</ul>

<h4 id="solution-1">Solution</h4>

<pre><code class="language-shell">xcrun simctl erase all
</code></pre>

<h2 id="cannot-find-srcroot-info-plist">Cannot find &ldquo;$(SRCROOT)/*/Info.plist&rdquo;</h2>

<ul>
<li>Fastlane <code>increment_version_number</code></li>
<li><code>agvtool new-marketing-version x.x.x</code></li>
<li>某些 Target 无法使用命令批量更新版本号时出现此问题。</li>
</ul>

<h4 id="solution-2">Solution</h4>

<ul>
<li>在项目的 Build Settings 中搜索 <code>$(SRCROOT)</code>，删除包含该内容条目中的 <code>$(SRCROOT)</code> 变量（通常是 <code>INFOPLIST_FILE</code> 字段）。</li>
</ul>

<hr />

<h2 id="failed-to-verify-bitcode-in">Failed to verify bitcode in *</h2>

<ul>
<li>当主 Target 未开启 Bitcode 时，Archive 后，通常有「Rebuild from bitcode」选项，勾选时可能会出现此问题；</li>
<li>抑或使用 Fastlane「build_ios_app」打包，出现该问题。</li>
</ul>

<h4 id="solution-3">Solution</h4>

<ul>
<li>手动打包不勾选「Rebuild from bitcode」选项即可；</li>

<li><p>Fastlane 需要在关闭 Bitcode，具体如下：</p>

<pre><code class="language-ruby">build_ios_app(export_options: { compileBitcode: false })
</code></pre></li>
</ul>

<h2 id="missing-password-for-user-xxx-yyy-com-and-running-in-non-interactive-shell">Missing password for user xxx@yyy.com, and running in non-interactive shell</h2>

<ul>
<li>Fastlane 上传 App Store 时会出现该问题。</li>
</ul>

<h4 id="solution-4">Solution</h4>

<ul>
<li>根据 <a href="https://github.com/fastlane/fastlane/tree/master/credentials_manager">https://github.com/fastlane/fastlane/tree/master/credentials_manager</a> 添加打包上传 App Store 的 Apple ID 资格，如需更改密码，可先移除再添加即可（需搭配 unlock_keychain 使用）。</li>
</ul>

<hr />

<h2 id="no-value-found-for-username">No value found for &lsquo;username&rsquo;</h2>

<ul>
<li>Fastlane 上传 App Store 时会出现该问题。</li>
</ul>

<h4 id="solution-5">Solution</h4>

<ul>
<li><code>No value found for 'username'</code> 是 Pilot（<a href="https://docs.fastlane.tools/actions/upload_to_testflight/">upload_to_testflight</a>）的报错信息；</li>
<li>可在 AppFile 配置上传 App Store 的 Apple ID，或在 upload_to_testflight 添加 username 参数，并按照上条 Tips 添加账号密码至 Key Chain。</li>
</ul>

<hr />

<h2 id="please-see-simulator-help-for-information-on-adjusting-system-settings-to-allow-more-simulated-devices-to-boot-at-once">Please see Simulator Help for information on adjusting system settings to allow more simulated devices to boot at once.</h2>

<ul>
<li>在使用模拟器作为 destination 时出现此错误。</li>
</ul>

<h4 id="solution-6">Solution</h4>

<ul>
<li><p><a href="https://help.apple.com/simulator/mac/9.0/index.html#/dev8a5f2aa4e">官方文档</a>。</p>

<pre><code class="language-shell">sudo launchctl limit maxproc 2000 2500
</code></pre></li>
</ul>

<h2 id="在-iphone-x-及以上全面屏机型-uiwebview-的内容未填充整个视图">在 iPhone X 及以上全面屏机型 UIWebView 的内容未填充整个视图</h2>

<ul>
<li>视图层级关系：UIWebView &gt; UIWebScrollView &gt; UIWebBrowserView</li>
<li>由于 iPhone X 带来的全面屏，系统会自动对其中的 UIWebBrowserView 进行调整，导致即使设置 UIWebView 整体的约束，显示的内容区域也时有问题。</li>
</ul>

<h4 id="solution-7">Solution</h4>

<ul>
<li><p>将其中的 UIScrollView 的自动调整行为关闭即可。</p>

<pre><code class="language-swift">if #available(iOS 11.0, *) {
webView.scrollView.contentInsetAdjustmentBehavior = .never
}
</code></pre></li>
</ul>

  </div>
  
  <div class="pagination">
    <div class="pagination__title">
      <span
        class="pagination__title-h">Read other posts</span>
      <hr />
    </div>
    <div class="pagination__buttons">
      
      <span class="button previous">
        <a href="/posts/2018/airplay_on_pi/">
          <span class="button__icon">←</span>
          <span class="button__text">将树莓派作为 AirPlay 音频服务器</span>
        </a>
      </span>
      
      
      <span class="button next">
        <a href="/posts/2018/uncovering_sourcekit/">
          <span class="button__text">[译]起底 SourceKit</span>
          <span class="button__icon">→</span>
        </a>
      </span>
      
    </div>
  </div>
  

  

    
    
    <div class="post bg-white">
      <script src="https://utteranc.es/client.js"
            repo="kingcos/kingcos.github.io"
            issue-term="pathname"
            label="comments"
            theme="github-dark"
            crossorigin="anonymous"
            async>
      </script>
    </div>
    

</div>

  </div>

  
    <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright">
        <span>© 2019 · <a href="http://github.com/kingcos">kingcos</a></span>
      </div>
    
  </div>
</footer>

<script src="/assets/main.js"></script>
<script src="/assets/prism.js"></script>





  
</div>

</body>
</html>

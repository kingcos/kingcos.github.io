<!DOCTYPE html>
<html lang="en">
  <head>
    
      <title>Swift 中的内联函数 :: iBlog</title>
    
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="description" content="内联函数（Inline Functions）指编译时刻将函数调用展开成函数体。在 Xcode 中的 Swift 项目中，如果开启了编译器优化（Release 模式默认会开启优化），编译器会自动将某些函数变成内联函数。但若函数存在以下特点将不会被自动内联：
 函数体比较长（内联会导致可执行代码体积增大） 包含递归调用（内联会导致死循环） 包含动态派发（编译时刻无法确认要执行的代码）  func foo() { print(&amp;#34;foo&amp;#34;) // 开启优化后断点需打在该行（函数已被优化为内联函数） } foo() // 默认断点打在该行 将以上代码转换为汇编：
// DEBUG 默认（No Optimization [-Onone]） demo`main: 0x100000a50 &amp;lt;&#43;0&amp;gt;: pushq %rbp 0x100000a51 &amp;lt;&#43;1&amp;gt;: movq %rsp, %rbp 0x100000a54 &amp;lt;&#43;4&amp;gt;: subq $0x10, %rsp 0x100000a58 &amp;lt;&#43;8&amp;gt;: movl %edi, -0x4(%rbp) 0x100000a5b &amp;lt;&#43;11&amp;gt;: movq %rsi, -0x10(%rbp) ; 函数调用（下面开启编译器优化后，则不存在该行汇编指令） -&amp;gt; 0x100000a5f &amp;lt;&#43;15&amp;gt;: callq 0x100000a70 ; demo.foo() -&amp;gt; () at main.swift:11  0x100000a64 &amp;lt;&#43;20&amp;gt;: xorl %eax, %eax 0x100000a66 &amp;lt;&#43;22&amp;gt;: addq $0x10, %rsp 0x100000a6a &amp;lt;&#43;26&amp;gt;: popq %rbp 0x100000a6b &amp;lt;&#43;27&amp;gt;: retq // DEBUG（Xcode - Target - Build Settings - Swift Compiler - Optimization Level - DEBUG: Optimize for Speed [-O]） demo`main: 0x100000a10 &amp;lt;&#43;0&amp;gt;: pushq %rbp 0x100000a11 &amp;lt;&#43;1&amp;gt;: movq %rsp, %rbp 0x100000a14 &amp;lt;&#43;4&amp;gt;: pushq %rbx 0x100000a15 &amp;lt;&#43;5&amp;gt;: pushq %rax 0x100000a16 &amp;lt;&#43;6&amp;gt;: xorl %edi, %edi 0x100000a18 &amp;lt;&#43;8&amp;gt;: callq 0x100000b10 ; type metadata accessor for Swift."/>
<meta name="keywords" content="kingcos.me,maimieng.comios,swift,objective-c,obj-c,objc,oc,geek,python,ruby,golang,go,apple,mac"/>
<meta name="robots" content="noodp"/>
<link rel="canonical" href="/posts/draft/swift_inline_funcs/" />





<link rel="stylesheet" href="/assets/style.css">


<link rel="stylesheet" href="/style.css">


<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/img/apple-touch-icon-144-precomposed.png">
<link rel="shortcut icon" href="/img/favicon.png">


<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Swift 中的内联函数"/>
<meta name="twitter:description" content="内联函数（Inline Functions）指编译时刻将函数调用展开成函数体。在 Xcode 中的 Swift 项目中，如果开启了编译器优化（Release 模式默认会开启优化），编译器会自动将某些函数变成内联函数。但若函数存在以下特点将不会被自动内联：
 函数体比较长（内联会导致可执行代码体积增大） 包含递归调用（内联会导致死循环） 包含动态派发（编译时刻无法确认要执行的代码）  func foo() { print(&#34;foo&#34;) // 开启优化后断点需打在该行（函数已被优化为内联函数） } foo() // 默认断点打在该行 将以上代码转换为汇编：
// DEBUG 默认（No Optimization [-Onone]） demo`main: 0x100000a50 &lt;&#43;0&gt;: pushq %rbp 0x100000a51 &lt;&#43;1&gt;: movq %rsp, %rbp 0x100000a54 &lt;&#43;4&gt;: subq $0x10, %rsp 0x100000a58 &lt;&#43;8&gt;: movl %edi, -0x4(%rbp) 0x100000a5b &lt;&#43;11&gt;: movq %rsi, -0x10(%rbp) ; 函数调用（下面开启编译器优化后，则不存在该行汇编指令） -&gt; 0x100000a5f &lt;&#43;15&gt;: callq 0x100000a70 ; demo.foo() -&gt; () at main.swift:11  0x100000a64 &lt;&#43;20&gt;: xorl %eax, %eax 0x100000a66 &lt;&#43;22&gt;: addq $0x10, %rsp 0x100000a6a &lt;&#43;26&gt;: popq %rbp 0x100000a6b &lt;&#43;27&gt;: retq // DEBUG（Xcode - Target - Build Settings - Swift Compiler - Optimization Level - DEBUG: Optimize for Speed [-O]） demo`main: 0x100000a10 &lt;&#43;0&gt;: pushq %rbp 0x100000a11 &lt;&#43;1&gt;: movq %rsp, %rbp 0x100000a14 &lt;&#43;4&gt;: pushq %rbx 0x100000a15 &lt;&#43;5&gt;: pushq %rax 0x100000a16 &lt;&#43;6&gt;: xorl %edi, %edi 0x100000a18 &lt;&#43;8&gt;: callq 0x100000b10 ; type metadata accessor for Swift."/>



<meta property="og:title" content="Swift 中的内联函数" />
<meta property="og:description" content="内联函数（Inline Functions）指编译时刻将函数调用展开成函数体。在 Xcode 中的 Swift 项目中，如果开启了编译器优化（Release 模式默认会开启优化），编译器会自动将某些函数变成内联函数。但若函数存在以下特点将不会被自动内联：
 函数体比较长（内联会导致可执行代码体积增大） 包含递归调用（内联会导致死循环） 包含动态派发（编译时刻无法确认要执行的代码）  func foo() { print(&#34;foo&#34;) // 开启优化后断点需打在该行（函数已被优化为内联函数） } foo() // 默认断点打在该行 将以上代码转换为汇编：
// DEBUG 默认（No Optimization [-Onone]） demo`main: 0x100000a50 &lt;&#43;0&gt;: pushq %rbp 0x100000a51 &lt;&#43;1&gt;: movq %rsp, %rbp 0x100000a54 &lt;&#43;4&gt;: subq $0x10, %rsp 0x100000a58 &lt;&#43;8&gt;: movl %edi, -0x4(%rbp) 0x100000a5b &lt;&#43;11&gt;: movq %rsi, -0x10(%rbp) ; 函数调用（下面开启编译器优化后，则不存在该行汇编指令） -&gt; 0x100000a5f &lt;&#43;15&gt;: callq 0x100000a70 ; demo.foo() -&gt; () at main.swift:11  0x100000a64 &lt;&#43;20&gt;: xorl %eax, %eax 0x100000a66 &lt;&#43;22&gt;: addq $0x10, %rsp 0x100000a6a &lt;&#43;26&gt;: popq %rbp 0x100000a6b &lt;&#43;27&gt;: retq // DEBUG（Xcode - Target - Build Settings - Swift Compiler - Optimization Level - DEBUG: Optimize for Speed [-O]） demo`main: 0x100000a10 &lt;&#43;0&gt;: pushq %rbp 0x100000a11 &lt;&#43;1&gt;: movq %rsp, %rbp 0x100000a14 &lt;&#43;4&gt;: pushq %rbx 0x100000a15 &lt;&#43;5&gt;: pushq %rax 0x100000a16 &lt;&#43;6&gt;: xorl %edi, %edi 0x100000a18 &lt;&#43;8&gt;: callq 0x100000b10 ; type metadata accessor for Swift." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/draft/swift_inline_funcs/" />
<meta property="article:published_time" content="2019-02-09T00:00:00+00:00" />
<meta property="article:modified_time" content="2019-02-09T00:00:00+00:00" /><meta property="og:site_name" content="iBlog" />




<script data-ad-client="ca-pub-9925978992661955" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

  </head>
  <body class="">
    <div class="container">
      <header class="header">
  <span class="header__inner">
    <a href="/" class="logo" style="text-decoration: none;">
  
    <span class="logo__mark"><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44">
  <path fill="none" d="M15 8l14.729 14.382L15 35.367"/>
</svg>
</span>
    <span class="logo__text">kingcos.me</span>
    <span class="logo__cursor"></span>
  
</a>

    <span class="header__right">
      
        <nav class="menu">
  <ul class="menu__inner menu__inner--desktop">
    
      
        
          <li><a href="/about">About</a></li>
        
      
        
          <li><a href="/links">Links</a></li>
        
      
        
          <li><a href="/perspective">Perspective</a></li>
        
      
        
          <li><a href="/words">Words</a></li>
        
      
      
    
  </ul>

  <ul class="menu__inner menu__inner--mobile">
    
      
        <li><a href="/about">About</a></li>
      
    
      
        <li><a href="/links">Links</a></li>
      
    
      
        <li><a href="/perspective">Perspective</a></li>
      
    
      
        <li><a href="/words">Words</a></li>
      
    
  </ul>
</nav>

        <span class="menu-trigger">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M0 0h24v24H0z" fill="none"/>
            <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
          </svg>
        </span>
      
      <span class="theme-toggle">
        <svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M22 41C32.4934 41 41 32.4934 41 22C41 11.5066 32.4934 3 22
  3C11.5066 3 3 11.5066 3 22C3 32.4934 11.5066 41 22 41ZM7 22C7
  13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22Z"/>
</svg>

      </span>
    </span>
  </span>
</header>


      <div class="content">
        
  <div class="post">
    <h2 class="post-title"><a href="/posts/draft/swift_inline_funcs/">Swift 中的内联函数</a></h2>
    <div class="post-meta">
      
        <span class="post-date">
            2019-02-09
        </span>
      
      
      
        <span class="post-read-time">— 3 min read</span>
      
    </div>

    
      <span class="post-tags">
        
          #<a href="/tags/swift/">Swift</a>&nbsp;
        
      </span>
    

    

    <div class="post-content">
      <p>内联函数（Inline Functions）指编译时刻将函数调用展开成函数体。在 Xcode 中的 Swift 项目中，如果开启了编译器优化（Release 模式默认会开启优化），编译器会自动将某些函数变成内联函数。但若函数存在以下特点将不会被自动内联：</p>
<ol>
<li>函数体比较长（内联会导致可执行代码体积增大）</li>
<li>包含递归调用（内联会导致死循环）</li>
<li>包含动态派发（编译时刻无法确认要执行的代码）</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">foo</span>() {
    print(<span style="color:#e6db74">&#34;foo&#34;</span>) <span style="color:#75715e">// 开启优化后断点需打在该行（函数已被优化为内联函数）</span>
}

foo() <span style="color:#75715e">// 默认断点打在该行</span>
</code></pre></div><p>将以上代码转换为汇编：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-asm" data-lang="asm"><span style="color:#960050;background-color:#1e0010">//</span> <span style="color:#a6e22e">DEBUG</span> <span style="color:#960050;background-color:#1e0010">默认（</span><span style="color:#66d9ef">No</span> <span style="color:#66d9ef">Optimization</span> [-<span style="color:#66d9ef">Onone</span>]<span style="color:#960050;background-color:#1e0010">）</span>

<span style="color:#a6e22e">demo</span><span style="color:#960050;background-color:#1e0010">`</span><span style="color:#66d9ef">main</span>:
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000a50</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">0</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">pushq</span>  %rbp
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000a51</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">1</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   %rsp, %rbp
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000a54</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">4</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">subq</span>   <span style="color:#66d9ef">$0x10</span>, %rsp
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000a58</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">8</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movl</span>   %edi, -<span style="color:#ae81ff">0x4</span>(%rbp)
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000a5b</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">11</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">movq</span>   %rsi, -<span style="color:#ae81ff">0x10</span>(%rbp)
    <span style="color:#75715e">; 函数调用（下面开启编译器优化后，则不存在该行汇编指令）
</span><span style="color:#75715e"></span><span style="color:#960050;background-color:#1e0010">-&gt;</span>  <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000a5f</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">15</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">callq</span>  <span style="color:#ae81ff">0x100000a70</span>               <span style="color:#75715e">; demo.foo() -&gt; () at main.swift:11
</span><span style="color:#75715e"></span>    <span style="color:#ae81ff">0x100000a64</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">20</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">xorl</span>   %eax, %eax
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000a66</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">22</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">addq</span>   <span style="color:#66d9ef">$0x10</span>, %rsp
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000a6a</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">26</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">popq</span>   %rbp
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000a6b</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">27</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">retq</span>

<span style="color:#960050;background-color:#1e0010">//</span> <span style="color:#a6e22e">DEBUG</span><span style="color:#960050;background-color:#1e0010">（</span><span style="color:#66d9ef">Xcode</span> - <span style="color:#66d9ef">Target</span> - <span style="color:#66d9ef">Build</span> <span style="color:#66d9ef">Settings</span> - <span style="color:#66d9ef">Swift</span> <span style="color:#66d9ef">Compiler</span> - <span style="color:#66d9ef">Optimization</span> <span style="color:#66d9ef">Level</span> - <span style="color:#66d9ef">DEBUG</span>: <span style="color:#66d9ef">Optimize</span> <span style="color:#66d9ef">for</span> <span style="color:#66d9ef">Speed</span> [-<span style="color:#66d9ef">O</span>]<span style="color:#960050;background-color:#1e0010">）</span>
<span style="color:#a6e22e">demo</span><span style="color:#960050;background-color:#1e0010">`</span><span style="color:#66d9ef">main</span>:
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000a10</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">0</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:   <span style="color:#66d9ef">pushq</span>  %rbp
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000a11</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">1</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:   <span style="color:#66d9ef">movq</span>   %rsp, %rbp
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000a14</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">4</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:   <span style="color:#66d9ef">pushq</span>  %rbx
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000a15</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">5</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:   <span style="color:#66d9ef">pushq</span>  %rax
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000a16</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">6</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:   <span style="color:#66d9ef">xorl</span>   %edi, %edi
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000a18</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">8</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:   <span style="color:#66d9ef">callq</span>  <span style="color:#ae81ff">0x100000b10</span>               <span style="color:#75715e">; type metadata accessor for Swift._ContiguousArrayStorage&lt;Any&gt; at &lt;compiler-generated&gt;
</span><span style="color:#75715e"></span>    <span style="color:#ae81ff">0x100000a1d</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">13</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">pushq</span>  <span style="color:#66d9ef">$0x40</span>
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000a1f</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">15</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">popq</span>   %rsi
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000a20</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">16</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">pushq</span>  <span style="color:#66d9ef">$0x7</span>
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000a22</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">18</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">popq</span>   %rdx
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000a23</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">19</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   %rax, %rdi
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000a26</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">22</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">callq</span>  <span style="color:#ae81ff">0x100000e90</span>               <span style="color:#75715e">; symbol stub for: swift_allocObject
</span><span style="color:#75715e"></span>    <span style="color:#ae81ff">0x100000a2b</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">27</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   %rax, %rbx
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000a2e</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">30</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movaps</span> <span style="color:#ae81ff">0x51b</span>(%rip), %xmm0
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000a35</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">37</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movups</span> %xmm0, <span style="color:#ae81ff">0x10</span>(%rax)
<span style="color:#960050;background-color:#1e0010">-&gt;</span>  <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000a39</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">41</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   <span style="color:#ae81ff">0x5c8</span>(%rip), %rax         <span style="color:#75715e">; (void *)0x00007fff86ceebc8: type metadata for Swift.String
</span><span style="color:#75715e"></span>    <span style="color:#ae81ff">0x100000a40</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">48</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   %rax, <span style="color:#ae81ff">0x38</span>(%rbx)
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000a44</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">52</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   <span style="color:#66d9ef">$0x6f6f66</span>, <span style="color:#ae81ff">0x20</span>(%rbx)     <span style="color:#75715e">; imm = 0x6F6F66
</span><span style="color:#75715e"></span>    <span style="color:#ae81ff">0x100000a4c</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">60</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movabsq</span> <span style="color:#66d9ef">$-0x1d00000000000000</span>, %rax <span style="color:#75715e">; imm = 0xE300000000000000
</span><span style="color:#75715e"></span>    <span style="color:#ae81ff">0x100000a56</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">70</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   %rax, <span style="color:#ae81ff">0x28</span>(%rbx)
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000a5a</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">74</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">pushq</span>  <span style="color:#66d9ef">$0x20</span>
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000a5c</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">76</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">popq</span>   %rsi
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000a5d</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">77</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">pushq</span>  <span style="color:#66d9ef">$0xa</span>
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000a5f</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">79</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">popq</span>   %rcx
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000a60</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">80</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movabsq</span> <span style="color:#66d9ef">$-0x1f00000000000000</span>, %rdx <span style="color:#75715e">; imm = 0xE100000000000000
</span><span style="color:#75715e"></span>    <span style="color:#ae81ff">0x100000a6a</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">90</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   %rbx, %rdi
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000a6d</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">93</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   %rdx, %r8
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000a70</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">96</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">callq</span>  <span style="color:#ae81ff">0x100000e60</span>               <span style="color:#75715e">; symbol stub for: Swift.print(_: Any..., separator: Swift.String, terminator: Swift.String) -&gt; ()
</span><span style="color:#75715e"></span>    <span style="color:#ae81ff">0x100000a75</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">101</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">movq</span>   %rbx, %rdi
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000a78</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">104</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">callq</span>  <span style="color:#ae81ff">0x100000ea8</span>               <span style="color:#75715e">; symbol stub for: swift_release
</span><span style="color:#75715e"></span>    <span style="color:#ae81ff">0x100000a7d</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">109</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">xorl</span>   %eax, %eax
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000a7f</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">111</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">addq</span>   <span style="color:#66d9ef">$0x8</span>, %rsp
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000a83</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">115</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">popq</span>   %rbx
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000a84</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">116</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">popq</span>   %rbp
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000a85</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">117</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">retq</span>

<span style="color:#960050;background-color:#1e0010">//</span> <span style="color:#a6e22e">DEBUG</span><span style="color:#960050;background-color:#1e0010">（</span><span style="color:#66d9ef">Optimize</span> <span style="color:#66d9ef">for</span> <span style="color:#66d9ef">Size</span> [-<span style="color:#66d9ef">Osize</span>]<span style="color:#960050;background-color:#1e0010">，多次调用时则不开启内联以降低大小）</span>
<span style="color:#a6e22e">demo</span><span style="color:#960050;background-color:#1e0010">`</span><span style="color:#66d9ef">main</span>:
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000a00</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">0</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:   <span style="color:#66d9ef">pushq</span>  %rbp
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000a01</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">1</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:   <span style="color:#66d9ef">movq</span>   %rsp, %rbp
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000a04</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">4</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:   <span style="color:#66d9ef">pushq</span>  %rbx
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000a05</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">5</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:   <span style="color:#66d9ef">pushq</span>  %rax
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000a06</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">6</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:   <span style="color:#66d9ef">movq</span>   <span style="color:#ae81ff">0x6bb</span>(%rip), %rdi         <span style="color:#75715e">; lazy cache variable for type metadata for Swift._ContiguousArrayStorage&lt;Any&gt;
</span><span style="color:#75715e"></span>    <span style="color:#ae81ff">0x100000a0d</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">13</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">testq</span>  %rdi, %rdi
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000a10</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">16</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">jne</span>    <span style="color:#ae81ff">0x100000a33</span>               <span style="color:#75715e">; &lt;+51&gt; [inlined] generic specialization &lt;Any&gt; of Swift._allocateUninitializedArray&lt;A&gt;(Builtin.Word) -&gt; (Swift.Array&lt;A&gt;, Builtin.RawPointer) + 47 at main.swift:12
</span><span style="color:#75715e"></span>    <span style="color:#ae81ff">0x100000a12</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">18</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   <span style="color:#ae81ff">0x5f7</span>(%rip), %rsi         <span style="color:#75715e">; (void *)0x00007fff86cf6908: type metadata for Any
</span><span style="color:#75715e"></span>    <span style="color:#ae81ff">0x100000a19</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">25</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">addq</span>   <span style="color:#66d9ef">$0x8</span>, %rsi
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000a1d</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">29</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">xorl</span>   %edi, %edi
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000a1f</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">31</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">callq</span>  <span style="color:#ae81ff">0x100000e5a</span>               <span style="color:#75715e">; symbol stub for: type metadata accessor for Swift._ContiguousArrayStorage
</span><span style="color:#75715e"></span>    <span style="color:#ae81ff">0x100000a24</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">36</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   %rax, %rdi
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000a27</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">39</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">testq</span>  %rdx, %rdx
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000a2a</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">42</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">jne</span>    <span style="color:#ae81ff">0x100000a33</span>               <span style="color:#75715e">; &lt;+51&gt; [inlined] generic specialization &lt;Any&gt; of Swift._allocateUninitializedArray&lt;A&gt;(Builtin.Word) -&gt; (Swift.Array&lt;A&gt;, Builtin.RawPointer) + 47 at main.swift:12
</span><span style="color:#75715e"></span>    <span style="color:#ae81ff">0x100000a2c</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">44</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   %rdi, <span style="color:#ae81ff">0x695</span>(%rip)         <span style="color:#75715e">; lazy cache variable for type metadata for Swift._ContiguousArrayStorage&lt;Any&gt;
</span><span style="color:#75715e"></span>    <span style="color:#ae81ff">0x100000a33</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">51</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movl</span>   <span style="color:#66d9ef">$0x40</span>, %esi
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000a38</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">56</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movl</span>   <span style="color:#66d9ef">$0x7</span>, %edx
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000a3d</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">61</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">callq</span>  <span style="color:#ae81ff">0x100000e90</span>               <span style="color:#75715e">; symbol stub for: swift_allocObject
</span><span style="color:#75715e"></span>    <span style="color:#ae81ff">0x100000a42</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">66</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   %rax, %rbx
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000a45</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">69</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movaps</span> <span style="color:#ae81ff">0x504</span>(%rip), %xmm0
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000a4c</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">76</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movups</span> %xmm0, <span style="color:#ae81ff">0x10</span>(%rax)
<span style="color:#960050;background-color:#1e0010">-&gt;</span>  <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000a50</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">80</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   <span style="color:#ae81ff">0x5b1</span>(%rip), %rax         <span style="color:#75715e">; (void *)0x00007fff86ceebc8: type metadata for Swift.String
</span><span style="color:#75715e"></span>    <span style="color:#ae81ff">0x100000a57</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">87</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   %rax, <span style="color:#ae81ff">0x38</span>(%rbx)
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000a5b</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">91</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movq</span>   <span style="color:#66d9ef">$0x6f6f66</span>, <span style="color:#ae81ff">0x20</span>(%rbx)     <span style="color:#75715e">; imm = 0x6F6F66
</span><span style="color:#75715e"></span>    <span style="color:#ae81ff">0x100000a63</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">99</span><span style="color:#960050;background-color:#1e0010">&gt;</span>:  <span style="color:#66d9ef">movabsq</span> <span style="color:#66d9ef">$-0x1d00000000000000</span>, %rax <span style="color:#75715e">; imm = 0xE300000000000000
</span><span style="color:#75715e"></span>    <span style="color:#ae81ff">0x100000a6d</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">109</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">movq</span>   %rax, <span style="color:#ae81ff">0x28</span>(%rbx)
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000a71</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">113</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">movabsq</span> <span style="color:#66d9ef">$-0x1f00000000000000</span>, %rdx <span style="color:#75715e">; imm = 0xE100000000000000
</span><span style="color:#75715e"></span>    <span style="color:#ae81ff">0x100000a7b</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">123</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">movl</span>   <span style="color:#66d9ef">$0x20</span>, %esi
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000a80</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">128</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">movl</span>   <span style="color:#66d9ef">$0xa</span>, %ecx
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000a85</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">133</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">movq</span>   %rbx, %rdi
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000a88</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">136</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">movq</span>   %rdx, %r8
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000a8b</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">139</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">callq</span>  <span style="color:#ae81ff">0x100000e60</span>               <span style="color:#75715e">; symbol stub for: Swift.print(_: Any..., separator: Swift.String, terminator: Swift.String) -&gt; ()
</span><span style="color:#75715e"></span>    <span style="color:#ae81ff">0x100000a90</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">144</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">movq</span>   %rbx, %rdi
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000a93</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">147</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">callq</span>  <span style="color:#ae81ff">0x100000ea8</span>               <span style="color:#75715e">; symbol stub for: swift_release
</span><span style="color:#75715e"></span>    <span style="color:#ae81ff">0x100000a98</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">152</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">xorl</span>   %eax, %eax
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000a9a</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">154</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">addq</span>   <span style="color:#66d9ef">$0x8</span>, %rsp
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000a9e</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">158</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">popq</span>   %rbx
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000a9f</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">159</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">popq</span>   %rbp
    <span style="color:#960050;background-color:#1e0010">0</span><span style="color:#a6e22e">x100000aa0</span> <span style="color:#960050;background-color:#1e0010">&lt;+</span><span style="color:#ae81ff">160</span><span style="color:#960050;background-color:#1e0010">&gt;</span>: <span style="color:#66d9ef">retq</span>
</code></pre></div><ul>
<li>官方源码中使用 <code>@inline</code> 来建议（注意「建议」而非强制）编译器去禁止（<code>never</code>）或在条件允许的情况下（除递归、动态派发等）总是（<code>__always</code>）内联，优先级高于编译设置；</li>
<li>注意 <code>__always</code> 只在开启编译器优化选项时（无论是优化速度还是体积）几乎总是内联（未开启时将不会被内联）。</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#75715e">// [-O] / [-Osize]</span>

@inline(never) <span style="color:#66d9ef">func</span> <span style="color:#a6e22e">bar</span>() {
    print(<span style="color:#e6db74">&#34;bar&#34;</span>)
}

@inline(__always) <span style="color:#66d9ef">func</span> <span style="color:#a6e22e">baz</span>() {
    print(<span style="color:#e6db74">&#34;baz&#34;</span>)
}

bar()
baz()
</code></pre></div>
    </div>
    
      <div class="pagination">
        <div class="pagination__title">
          <span class="pagination__title-h">Read other posts</span>
          <hr />
        </div>
        <div class="pagination__buttons">
          
            <span class="button previous">
              <a href="/posts/draft/swift_inout/">
                <span class="button__icon">←</span>
                <span class="button__text">Swift 中的 inout</span>
              </a>
            </span>
          
          
            <span class="button next">
              <a href="/posts/2019/obj-c_swift_bridge_tips/">
                <span class="button__text">Objective-C 与 Swift 桥接中的坑</span>
                <span class="button__icon">→</span>
              </a>
            </span>
          
        </div>
      </div>
    

    

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<table style="border: 0;">
  <tr>
  <td style="border: 0; width: 30%;">
    <img src='/img/about/1.jpg'>
  </td>
  <td style="border: 0;">
    <ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-9925978992661955"
     data-ad-slot="3213735320"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
  </td>
  </tr>
</table>



<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>


    
    
    <div>
      <div id="github-comment">
      </div>

      <script type="text/javascript">
        function getUtterances(isDark) {
          var utterances = document.createElement('script');
          utterances.type = 'text/javascript';
          utterances.async = true;
          utterances.setAttribute('issue-term', "pathname")
          utterances.setAttribute('repo', "kingcos\/kingcos.github.io")
          utterances.setAttribute('label', "comments")
          isDark ? utterances.setAttribute('theme', "github-dark") : utterances.setAttribute('theme', "github-light")
          utterances.crossorigin = 'anonymous';
          utterances.src = 'https://utteranc.es/client.js';

          return utterances
        }

        var themeToggle = document.querySelector(".theme-toggle")
        themeToggle.addEventListener("click", function () {
          var getTheme = window.localStorage && window.localStorage.getItem("theme")
          var divNode = document.getElementById('github-comment')
          while(divNode.hasChildNodes()) {
            divNode.removeChild(divNode.firstChild);
          }
          
          
          

          
          
          
          
          
          
          document.getElementById('github-comment').appendChild(getUtterances(getTheme !== "dark"))
        })

        var getTheme = window.localStorage && window.localStorage.getItem("theme")
        document.getElementById('github-comment').appendChild(getUtterances(getTheme === "dark"))
      </script>
    </div>
    

    </div>

      </div>

      
        <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright copyright--user">All rights reserved by kingcos.me</div>
    
  </div>
</footer>

<script src="/assets/main.js"></script>
<script src="/assets/prism.js"></script>



      
    </div>

    
      
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-138311951-1', 'auto');
	
	ga('send', 'pageview');
}
</script>

    
  </body>
</html>

<!DOCTYPE html>
<html lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="author" content="kingcos" />
	
	
	
	<title>ä» 0 å¼€å§‹ä½¿ç”¨ Docker å¿«é€Ÿæ­å»º Hadoop é›†ç¾¤ç¯å¢ƒ ï½œ kingcos</title>
	
    
    
    <meta name="description" content="ä» 0 å¼€å§‹ä½¿ç”¨ Docker å¿«é€Ÿæ­å»º Hadoop é›†ç¾¤ç¯å¢ƒã€‚" />
    

    
    
    <meta name="keywords" content="Hugo, theme, zozo" />
    

	
    
    <link rel="shortcut icon" href="https://kingcos.me/images/favicon.png" />

    <link rel="stylesheet" type="text/css" media="screen" href="https://kingcos.me/css/normalize.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.0/animate.min.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="https://kingcos.me/css/zozo.css" />
	<link rel="stylesheet" type="text/css" media="screen" href="https://cdn.jsdelivr.net/npm/remixicon@2.5.0/fonts/remixicon.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="https://kingcos.me/css/highlight.css" />

    
    
</head>

<script data-ad-client="ca-pub-9925978992661955" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>


<body>
    <div class="main animate__animated animate__fadeInDown">
        <div class="nav_container animated fadeInDown">
    <div class="site_nav" id="site_nav">
        <ul>
            
            <li>
                <a href="/">Home</a>
            </li>
            
            <li>
                <a href="/posts/">Archive</a>
            </li>
            
            <li>
                <a href="/tags/">Tags</a>
            </li>
            
            <li>
                <a href="/about/">About</a>
            </li>
            
        </ul>
    </div>
    <div class="menu_icon">
        <a id="menu_icon"><i class="ri-menu-line"></i></a>
    </div>
</div>


<link rel="stylesheet" href="https://kingcos.me/scss/main.min.75b49085bfb07b1bf150a1d59b4773d857e0452a747e37243805218b528a4045.css" integrity="sha256-dbSQhb&#43;wexvxUKHVm0dz2FfgRSp0fjckOAUhi1KKQEU=" media="screen">

<style>
.nav_container {
  height: 1rem;
}
 
table {
    width: 100%;
    table-layout: fixed;
}

 
.markdown code {
    white-space: normal;
    word-wrap: break-word;
    word-break: break-word;
    line-height: 1.5em;
    font-size: 0.85em;
    font-weight: bold;
    display: inline-block;
     
}

 
.menu_icon a {
    font-size: 16px;
}

 
body {
    font-family: 'Hiragino Sans GB', 'SFMono', 'Lato', '-apple-system';
    -webkit-font-smoothing: 'antialiased';
}

 
.markdown strong, .markdown b, .markdown em {
    font-weight: bold;
}

.post .post_content p {
     

    line-height: 1.75em;
}

 
.markdown img {
    max-width: 100%;
    margin: 0 auto;
    display: block;
    border-radius: 0.25rem;
}

 
.ri-stack-line {
    vertical-align: middle;
}

 
.ri-map-pin-time-line {
    vertical-align: middle;
}

 
.chroma .lntd:nth-child(2) {
    width: 100%;
}

 

 
.markdown .book-hint::before {
    content: none;
}

.markdown .book-hint {
    margin: 1rem 0;
    padding: 0.5rem 1rem 0.5rem 0.75rem;

    border-inline-start: 0.25rem solid #e9ecef;
    border-radius: 0.25rem;

    font-style: normal;
     
}

.book-hint strong {
    background-color: transparent;
}

.markdown .book-hint.info {
    border-left-color:#6bf;
    background-color:rgba(102,187,255,.1);
}

.markdown .book-hint.warning {
    border-left-color:#fd6;
    background-color:rgba(255,221,102,.1);
}

.markdown .book-hint.danger {
    border-left-color:#f66;
    background-color:rgba(255,102,102,.1);
}

</style>

        <div class="header animated fadeInDown">
    <div class="site_title_container">
        <div class="site_title">
            
                <a href="https://kingcos.me/">
                    
                    <img class="kingcos" style="margin-top: -20px; margin-left: -10px;" src="/title.svg" width="150px">
                </a>
            
        </div>
        <div class="description">
            <p class="sub_title">ä¸“æ³¨ã€åšæŒ</p>
            <div class="my_socials">
                
                
                <a href="https://github.com/kingcos" title="github" target="_blank"><i class="ri-github-fill"></i></a>
                
                
                
                <a href="https://www.instagram.com/kingcos_v/" title="instagram" target="_blank"><i class="ri-instagram-fill"></i></a>
                
                
                
                <a href="https://twitter.com/kingcos_v" title="twitter" target="_blank"><i class="ri-twitter-fill"></i></a>
                
                
                
                <a href="https://weibo.com/u/1798410923" title="weibo" target="_blank"><i class="ri-weibo-fill"></i></a>
                
                
                
            </div>
        </div>
    </div>
</div>
        <div class="content">
            <div class="post_page">
                <div class="post animate__animated animate__fadeInDown">
                    <div class="post_title post_detail_title">
                        <h2><a href='/posts/2017/docker_for_hadoop/'>ä» 0 å¼€å§‹ä½¿ç”¨ Docker å¿«é€Ÿæ­å»º Hadoop é›†ç¾¤ç¯å¢ƒ</a></h2>
                        <span class="date">2017.03.27</span>
                        <span>by kingcos</span>
                        
                        
                        
                        
                    </div>
                    <div class="post_content markdown"><table>
<thead>
<tr>
<th style="text-align:center">Date</th>
<th style="text-align:center">Notes</th>
<th style="text-align:center">Hadoop</th>
<th style="text-align:center">Other</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">2017-03-27</td>
<td style="text-align:center">é¦–æ¬¡æäº¤</td>
<td style="text-align:center">2.7.2</td>
<td style="text-align:center">Docker CE, IntelliJ IDEA 2016.3</td>
</tr>
</tbody>
</table>
<h2 id="preface">Preface</h2>
<p>è‡ªä»å­¦ä¹  iOS/Swift ä»¥æ¥ï¼Œå°±æ²¡æœ‰å¤ªå¤šæ—¶é—´åˆ†é…ç»™ Java ä¸“ä¸šè¯¾ï¼Œæ¯•ç«Ÿæˆ‘ä¸æ˜¯ä¸ªä¸‰å¿ƒäºŒç”¨è¿˜èƒ½æ ·æ ·å­¦å¥½çš„äººã€‚ä¸è¿‡ä½œä¸ºå¤§ä¸‰çš„ä¸“ä¸šè¯¾ï¼Œåˆ†å¸ƒå¼è®¡ç®—æŠ€æœ¯è¿˜æ˜¯æœ‰å»ä¸Šè¯¾çš„ï¼Œæ¯•ç«Ÿä¸èƒ½æœ€åæŒ‚ç§‘å§ :]</p>
<p>æ›¾æœ‰äººè¯´ï¼Œã€Œå¼€å‘ä¸€ä¸ªé¡¹ç›®ï¼Œè‡³å°‘æœ‰ 50% æ—¶é—´åœ¨é…ç½®ç¯å¢ƒã€ã€‚ç¡®å®ï¼Œåœ¨æŠ˜è…¾äº†ä¸‰å‘¨çš„è¯¾æ—¶ä¹‹åï¼Œæˆ‘æ‰æŒ‰ç…§è€å¸ˆç»™çš„è¯¦ç»†æ­¥éª¤é…ç½®å¥½ Hadoop çš„ç¯å¢ƒã€‚å°½ç®¡å¦‚æ­¤ï¼Œç”±äºç§ç§åŸå› ï¼Œç­é‡Œä»æœ‰å¾ˆå¤šåŒå­¦è¿˜æ²¡æœ‰é…ç½®å¥½ Hadoop çš„ç¯å¢ƒï¼Œå¯¼è‡´è¯¾ç¨‹ä¸€ç›´åœæ»ã€‚åœ¨å¶ç„¶ä¸­ï¼Œæˆ‘æƒ³åˆ°äº† Dockerï¼ŒDocker è¿™ä¸ªè¯æˆ‘è‡³å°‘åœ¨åŠå¹´å‰å·²ç»å¬è¯´ï¼ˆå½“ç„¶ï¼Œæ•æˆ‘å­¤é™‹å¯¡é—»ï¼ŒDocker æ—©åœ¨ 13 å¹´å³å‘è¡Œï¼‰ï¼Œä½†ä¸€ç›´æ²¡æœ‰å»äº†è§£å’Œä½¿ç”¨ã€‚æ—¶è‡³ä»Šæ—¥ï¼Œæˆ‘å¯¹ Docker çš„äº†è§£ä¹Ÿååˆ†å°‘ï¼Œç®€å•çš„æ¥è¯´ï¼ŒDocker æ˜¯ä¸€ç§å®¹å™¨ï¼ˆContainerï¼‰ç®¡ç†å·¥å…·ï¼Œé€šè¿‡ Docker æˆ‘ä»¬å¯ä»¥é…ç½®å¯ç§»æ¤çš„ç¯å¢ƒï¼Œæ–¹ä¾¿å‘å¸ƒã€‚Docker åŸºäº Linuxï¼Œä½†ä¹Ÿæä¾›äº† macOS å’Œ Windows æ¡Œé¢ç‰ˆï¼Œæ–¹ä¾¿åœ¨æˆ‘ä»¬çš„æœ¬åœ°æœºå™¨æµ‹è¯•ã€ä½¿ç”¨ã€‚</p>
<p>è™½ç„¶æœ¬æ–‡æ˜¯ä¸€ä¸ªå°ç™½å‘çš„æ–‡ç« ï¼Œä½†ä¸‹è½½å’Œå®‰è£…çš„è¿‡ç¨‹ä¹Ÿä¸ä¼šåœ¨æœ¬æ–‡æ¶‰åŠã€‚ä¸€æ˜¯å®˜æ–¹ç½‘ç«™å¿…ç„¶æä¾›äº†ç›¸åº”çš„æ•™ç¨‹ï¼Œçº¯ç²¹çš„ç¿»è¯‘æ¯«æ— æ„ä¹‰ï¼›äºŒæ˜¯ä¸‹è½½å’Œå®‰è£…å¯èƒ½éšç€åç»­æ›´æ–°å‘ç”Ÿç•¥å¾®çš„åŒºåˆ«ï¼Œè€Œæœ¬æ–‡åªç€çœ¼äºé…ç½® Hadoop é›†ç¾¤ç¯å¢ƒçš„æ­å»ºã€‚</p>
<p><strong>ä¸è¿‡ç”±äºä¸ªäººå¯¹ Hadoop å’Œ Docker çš„äº†è§£ç”šå°‘ï¼Œå¦‚æœ‰é”™è¯¯ï¼Œå¸Œæœ›æŒ‡å‡ºï¼Œæˆ‘ä¼šå­¦ä¹ ã€æ”¹æ­£ã€‚</strong></p>
<h2 id="linux">Linux</h2>
<ul>
<li>Info:</li>
<li>Ubuntu 16.10 x64</li>
</ul>
<blockquote>
<p>Docker æœ¬èº«å°±æ˜¯åŸºäº Linux çš„ï¼Œæ‰€ä»¥é¦–å…ˆä»¥æˆ‘çš„ä¸€å°æœåŠ¡å™¨åšå®éªŒã€‚è™½ç„¶æœ€åè·‘ wordcount å·²ç»ç”±äºå†…å­˜ä¸è¶³è€Œå´©æ‰ï¼Œä½†æ˜¯ä¹‹å‰çš„è¿‡ç¨‹è¿˜æ˜¯å¯ä»¥å‚è€ƒçš„ã€‚</p>
</blockquote>
<h4 id="è¿æ¥æœåŠ¡å™¨">è¿æ¥æœåŠ¡å™¨</h4>
<ul>
<li>ä½¿ç”¨ ssh å‘½ä»¤è¿æ¥è¿œç¨‹æœåŠ¡å™¨ã€‚</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">ssh root@<span class="o">[</span>Your IP Address<span class="o">]</span>
</code></pre></div><p><img src="/img/2017/Docker_for_Hadoop/1.png" alt="ssh root@127.0.0.1"></p>
<h4 id="æ›´æ–°è½¯ä»¶åˆ—è¡¨">æ›´æ–°è½¯ä»¶åˆ—è¡¨</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">apt-get update
</code></pre></div><p><img src="/img/2017/Docker_for_Hadoop/2.png" alt="apt-get update"></p>
<ul>
<li>æ›´æ–°å®Œæˆã€‚</li>
</ul>
<p><img src="/img/2017/Docker_for_Hadoop/3.png" alt="æ›´æ–°å®Œæˆ"></p>
<h4 id="å®‰è£…-docker">å®‰è£… Docker</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">sudo apt-get install docker.io
</code></pre></div><p><img src="/img/2017/Docker_for_Hadoop/4.png" alt="sudo apt-get install docker.io"></p>
<ul>
<li>å½“é‡åˆ°è¾“å…¥æ˜¯å¦ç»§ç»­æ—¶ï¼Œè¾“å…¥ã€ŒYï¼yã€ç»§ç»­ã€‚</li>
</ul>
<p><img src="/img/2017/Docker_for_Hadoop/5.png" alt="Y"></p>
<ul>
<li>å®‰è£…å®Œæˆã€‚</li>
</ul>
<p><img src="/img/2017/Docker_for_Hadoop/6.png" alt="å®‰è£…å®Œæˆ"></p>
<ul>
<li>è¾“å…¥ã€Œdockerã€æµ‹è¯•æ˜¯å¦å®‰è£…æˆåŠŸã€‚</li>
</ul>
<p><img src="/img/2017/Docker_for_Hadoop/7.png" alt="docker"></p>
<h4 id="æ‹‰å–é•œåƒ">æ‹‰å–é•œåƒ</h4>
<ul>
<li>é•œåƒï¼Œæ˜¯ Docker çš„æ ¸å¿ƒï¼Œå¯ä»¥é€šè¿‡ä»è¿œç¨‹æ‹‰å–é•œåƒå³å¯é…ç½®å¥½æˆ‘ä»¬æ‰€éœ€è¦çš„ç¯å¢ƒï¼Œæˆ‘ä»¬è¿™æ¬¡éœ€è¦çš„æ˜¯ Hadoop é›†ç¾¤çš„é•œåƒã€‚</li>
</ul>
<p><img src="/img/2017/Docker_for_Hadoop/8.png" alt="kiwenlau/hadoop-cluster-docker"></p>
<ul>
<li>åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ <a href="http://kiwenlau.com">kiwenlau</a> çš„ Hadoop é›†ç¾¤é•œåƒä»¥åŠå…¶é…ç½®ã€‚ç”±äºæˆ‘çš„æœåŠ¡å™¨æœ¬èº«å³åœ¨å›½å¤–ï¼Œå› æ­¤æ‹‰å–é•œåƒçš„é€Ÿåº¦è¾ƒå¿«ï¼Œå›½å†…ç”±äºä¼—æ‰€å‘¨çŸ¥çš„åŸå› ï¼Œå¯ä»¥æ›¿æ¢ä¸ºç›¸åº”çš„å›½å†…æºï¼Œä»¥åŠ å¿«æ‹‰å–é€Ÿåº¦ã€‚</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">sudo docker pull kiwenlau/hadoop:1.0
</code></pre></div><ul>
<li>æ‹‰å–é•œåƒå®Œæˆã€‚</li>
</ul>
<p><img src="/img/2017/Docker_for_Hadoop/9.png" alt="sudo docker pull kiwenlau/hadoop:1.0"></p>
<h4 id="å…‹éš†ä»“åº“">å…‹éš†ä»“åº“</h4>
<ul>
<li>å…‹éš†ä»“åº“åˆ°å½“å‰æ–‡ä»¶å¤¹ï¼ˆå¯ä»¥è‡ªè¡Œåˆ›å»ºå¹¶åˆ‡æ¢åˆ°ç›¸åº”æ–‡ä»¶å¤¹ï¼‰ã€‚</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">git clone https://github.com/kiwenlau/hadoop-cluster-docker
</code></pre></div><ul>
<li>å…‹éš†ä»“åº“å®Œæˆã€‚</li>
</ul>
<p><img src="/img/2017/Docker_for_Hadoop/10.png" alt="å…‹éš†ä»“åº“å®Œæˆ"></p>
<h4 id="æ¡¥æ¥ç½‘ç»œ">æ¡¥æ¥ç½‘ç»œ</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">sudo docker network create --driver<span class="o">=</span>bridge hadoop
</code></pre></div><p><img src="/img/2017/Docker_for_Hadoop/11.png" alt="sudo docker network create &ndash;driver=bridge hadoop"></p>
<h4 id="è¿è¡Œå®¹å™¨">è¿è¡Œå®¹å™¨</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="nb">cd</span> hadoop-cluster-docker
./start-container.sh
</code></pre></div><ul>
<li>é»˜è®¤æ˜¯ 1 ä¸ªä¸»èŠ‚ç‚¹ï¼Œ2 ä¸ªä»èŠ‚ç‚¹ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥æ ¹æ®æ€§èƒ½è°ƒæ•´ä¸º N èŠ‚ç‚¹ï¼Œè¯¦è§æ–‡æœ«å‚è€ƒé“¾æ¥ã€‚</li>
</ul>
<p><img src="/img/2017/Docker_for_Hadoop/12.png" alt="./start-container.sh"></p>
<h4 id="å¯åŠ¨-hadoop">å¯åŠ¨ Hadoop</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">./start-hadoop.sh
</code></pre></div><ul>
<li>åœ¨ä¸Šä¸€æ­¥ï¼Œæˆ‘ä»¬å·²ç»è¿è¡Œå®¹å™¨ï¼Œå³å¯ç›´æ¥è¿è¡Œ Hadoopã€‚å¯åŠ¨æ—¶é•¿ä¸æœºå™¨æ€§èƒ½æœ‰å…³ï¼Œä¹Ÿæ˜¯éš¾ä¸ºäº†æˆ‘è¿™ä¸€å° 512 MB å†…å­˜çš„æœåŠ¡å™¨ã€‚</li>
</ul>
<p><img src="/img/2017/Docker_for_Hadoop/13.png" alt="./start-hadoop.sh"></p>
<h4 id="æµ‹è¯•-word-count">æµ‹è¯• Word Count</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">./run-wordcount.sh
</code></pre></div><ul>
<li>Word Count æ˜¯ä¸€ä¸ªæµ‹è¯• Hadoop çš„ Shell è„šæœ¬ï¼Œå³è®¡ç®—æ–‡æœ¬ä¸­çš„å•è¯ä¸ªæ•°ã€‚ä¸è¿‡ç”±äºæˆ‘çš„æœåŠ¡å™¨å†…å­˜ä¸å¤Ÿåˆ†é…æ— æ³•å®Œæˆï¼Œæ‰€ä»¥åç»­ä»¥æœ¬æœºè¿›è¡Œæµ‹è¯•ã€‚</li>
</ul>
<h4 id="ç½‘é¡µç®¡ç†">ç½‘é¡µç®¡ç†</h4>
<ul>
<li>æˆ‘ä»¬å¯ä»¥é€šè¿‡ç½‘é¡µè¿œç¨‹ç®¡ç† Hadoopï¼š</li>
<li>Name Node: [Your IP Address]:50070/</li>
<li>Resource Manager: [Your IP Address]:8088/</li>
</ul>
<h2 id="macos">macOS</h2>
<ul>
<li>Info:</li>
<li>macOS 10.12.4 beta (16E191a)</li>
</ul>
<h4 id="ä¸‹è½½--å®‰è£…">ä¸‹è½½ &amp; å®‰è£…</h4>
<ul>
<li>æ‰“å¼€ Docker å®˜æ–¹ç½‘ç«™ï¼š<a href="https://www.docker.com">https://www.docker.com</a>ï¼Œé€‰æ‹©ç¤¾åŒºç‰ˆï¼Œå¹¶ä¸‹è½½ã€å®‰è£…ã€‚Windows ç³»ç»Ÿç”¨æˆ·å¯ä»¥é€‰æ‹© Windows ç‰ˆæœ¬ã€‚</li>
</ul>
<p><img src="/img/2017/Docker_for_Hadoop/14.png" alt="Docker CE"></p>
<p><img src="/img/2017/Docker_for_Hadoop/15.png" alt="macOS or Windows"></p>
<h4 id="è¿è¡Œ-docker">è¿è¡Œ Docker</h4>
<ul>
<li>æ‰“å¼€ Dockerã€‚ä¸ºäº†ç®€å•ï¼Œæˆ‘æ²¡æœ‰æ”¹åŠ¨é…ç½®ï¼Œå¦‚éœ€æ›´æ”¹ï¼Œå¯ä»¥åœ¨ Preferences ä¸­ä¿®æ”¹ã€‚</li>
</ul>
<p><img src="/img/2017/Docker_for_Hadoop/16.png" alt="Docker is running"></p>
<ul>
<li>æˆ‘ä»¬å¯ä»¥åœ¨ç»ˆç«¯ï¼ˆTerminalï¼‰è¾“å…¥ã€Œdockerã€ï¼Œæµ‹è¯•æ˜¯å¦å®‰è£…æˆåŠŸã€‚</li>
</ul>
<p><img src="/img/2017/Docker_for_Hadoop/17.png" alt="docker"></p>
<h4 id="æ‹‰å–é•œåƒ--å…‹éš†ä»“åº“--æ¡¥æ¥ç½‘ç»œ--è¿è¡Œå®¹å™¨--å¯åŠ¨-hadoop">æ‹‰å–é•œåƒ &amp; å…‹éš†ä»“åº“ &amp; æ¡¥æ¥ç½‘ç»œ &amp; è¿è¡Œå®¹å™¨ &amp; å¯åŠ¨ Hadoop</h4>
<ul>
<li>åŒ Linuxã€‚</li>
</ul>
<h4 id="æµ‹è¯•-word-count-1">æµ‹è¯• Word Count</h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">./run-wordcount.sh
</code></pre></div><ul>
<li>åŒ Linuxï¼Œä½†è¿™æ¬¡æˆ‘ä»¬å¯ä»¥è¿ç®—å‡ºç»“æœäº†ã€‚</li>
</ul>
<p><img src="/img/2017/Docker_for_Hadoop/18.png" alt="./run-wordcount.sh"></p>
<h2 id="windows">Windows</h2>
<blockquote>
<p>å…¶å®æœ€å¼€å§‹å°±æ²¡æœ‰æ‰“ç®—æ”¾å‡º Windows ç‰ˆï¼Œå€’ä¸æ˜¯å› ä¸ºè§‰å¾— Windows ä¸å¥½ï¼Œè€Œæ˜¯ç›®å‰æ‰‹å¤´æ²¡æœ‰ Windows çš„ç”µè„‘ï¼Œå€Ÿç”¨åŒå­¦çš„ç”µè„‘ä¹Ÿä¸æ˜¯å¾ˆæ–¹ä¾¿ã€‚å¦‚æœéœ€è¦å®‰è£… Dockerï¼Œéœ€è¦ CPU æ”¯æŒè™šæ‹ŸåŒ–ï¼Œä¸”å®‰è£…äº† 64 ä½ Windows 10 Pro/ä¼ä¸šç‰ˆï¼ˆéœ€è¦å¼€å¯ Hyper-Vï¼‰ã€‚å…¶ä»–ç‰ˆæœ¬çš„ Windows å¯ä»¥å®‰è£… Docker Toolboxã€‚</p>
</blockquote>
<ul>
<li>æš‚æ— ã€‚</li>
</ul>
<h2 id="intellij-idea">IntelliJ IDEA</h2>
<blockquote>
<p>æˆ‘ä»¬çš„ Hadoop é›†ç¾¤å·²ç»åœ¨å®¹å™¨é‡Œå®‰è£…å®Œæˆï¼Œè€Œä¸”å·²ç»å¯ä»¥è¿è¡Œã€‚ç›¸æ¯”è‡ªå·±ä¸€ä¸ªä¸ªå»ºç«‹è™šæ‹Ÿæœºï¼Œè¿™æ ·çš„ç¡®ååˆ†æ–¹ä¾¿ã€å¿«æ·ã€‚ä¸ºäº†ä¾¿äºå¼€å‘è°ƒè¯•ï¼Œæ¥ä¸‹æ¥å°±éœ€è¦åœ¨ IntelliJ IDEA ä¸‹é…ç½®å¼€å‘ç¯å¢ƒï¼ŒåŒ…ç®¡ç†å·¥å…·é€‰æ‹© Gradleã€‚Maven é…åˆ Eclipse çš„é…ç½®ç½‘ä¸Šå·²ç»æœ‰å¾ˆå¤šäº†ï¼Œéœ€è¦çš„åŒå­¦å¯ä»¥è‡ªè¡Œæœç´¢ã€‚</p>
</blockquote>
<h3 id="docker-å¼€å¯-9000-ç«¯å£æ˜ å°„">Docker å¼€å¯ 9000 ç«¯å£æ˜ å°„</h3>
<ul>
<li>ç”±äºæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ <a href="http://kiwenlau.com">kiwenlau</a> çš„é•œåƒå’Œå¼€æºè„šæœ¬ï¼Œè™½ç„¶åŠ å¿«äº†é…ç½®è¿‡ç¨‹ï¼Œä½†æ˜¯ä¹Ÿå±è”½äº†å¾ˆå¤šç»†èŠ‚ã€‚æ¯”å¦‚åœ¨å…¶è„šæœ¬ä¸­åªé»˜è®¤å¼€å¯äº† 50070 å’Œ 8088 çš„ç«¯å£æ˜ å°„ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>docker ps</code>ï¼ˆæ³¨æ„æ˜¯åœ¨æœ¬æœºï¼Œè€Œä¸æ˜¯åœ¨å®¹å™¨è¿è¡Œè¯¥å‘½ä»¤ï¼‰åˆ—å‡ºæ‰€æœ‰å®¹å™¨ï¼ŒæŸ¥çœ‹å®¹å™¨æ˜ å°„çš„ç«¯å£ã€‚</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="nb">cd</span> hadoop-cluster-docker
vim start-container.sh
</code></pre></div><ul>
<li>åˆ‡æ¢åˆ°è„šæœ¬æ–‡ä»¶å¤¹ï¼Œä½¿ç”¨ Vim ç¼–è¾‘ start-container.shã€‚åœ¨å›¾ä¸­å…‰æ ‡å¤„æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼Œä¿å­˜å¹¶é€€å‡ºã€‚</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">-p 9000:9000 \
</code></pre></div><p><img src="/img/2017/Docker_for_Hadoop/19.png" alt="æ˜ å°„ 9000 ç«¯å£"></p>
<ul>
<li>é‡å¯å®¹å™¨ï¼Œå¹¶æŸ¥çœ‹å®¹å™¨çŠ¶æ€ï¼Œå¦‚å›¾å³ä¸ºæ˜ å°„æˆåŠŸã€‚</li>
</ul>
<p><img src="/img/2017/Docker_for_Hadoop/20.png" alt="æ˜ å°„ç«¯å£æˆåŠŸ"></p>
<h3 id="å¼€å¯-web-hdfs-ç®¡ç†">å¼€å¯ Web HDFS ç®¡ç†*</h3>
<blockquote>
<p>è¯¥æ­¥éå¿…é¡»ã€‚ä¸ºäº†æ–¹ä¾¿åœ¨ç½‘é¡µç«¯ç®¡ç†ï¼Œå› æ­¤å¼€å¯ Web ç«¯ï¼Œé»˜è®¤å…³é—­ã€‚</p>
</blockquote>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell">which hadoop
<span class="nb">cd</span> /usr/local/hadoop/etc/hadoop/
ls

vi core-site.xml
</code></pre></div><ul>
<li>æ‰¾åˆ° Hadoop é…ç½®æ–‡ä»¶è·¯å¾„ï¼Œä½¿ç”¨ Vi ç¼–è¾‘ï¼Œè‹¥ Vi çš„æ’å…¥æ¨¡å¼ï¼ˆInsert Modeï¼‰ä¸­ï¼Œä¸Šä¸‹å·¦å³å˜æˆäº† ABCDï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å³å¯ï¼š<code>cp /etc/vim/vimrc ~/.vimrc</code> ä¿®å¤ã€‚</li>
</ul>
<p><img src="/img/2017/Docker_for_Hadoop/21.png" alt="Hadoop é…ç½®æ–‡ä»¶"></p>
<ul>
<li>æ·»åŠ ä»¥ä¸‹å†…å®¹ã€‚</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="nt">&lt;property&gt;</span>
<span class="nt">&lt;name&gt;</span>dfs.webhdfs.enabled<span class="nt">&lt;/name&gt;</span>
<span class="nt">&lt;value&gt;</span>true<span class="nt">&lt;/value&gt;</span>
<span class="nt">&lt;/property&gt;</span>
</code></pre></div><p><img src="/img/2017/Docker_for_Hadoop/22.png" alt="æ·»åŠ ä»¥ä¸Šå†…å®¹"></p>
<h3 id="å¯åŠ¨-hadoop-1">å¯åŠ¨ Hadoop</h3>
<ul>
<li>åŒ Linuxã€‚</li>
</ul>
<h3 id="æ„å»ºä¾èµ–">æ„å»ºä¾èµ–</h3>
<ul>
<li>ä½¿ç”¨ IntelliJ IDEA æ–°å»ºä¸€ä¸ª Gradle é¡¹ç›®ï¼Œåœ¨ Build.gradle ä¸­åŠ å…¥ä»¥ä¸‹ä¾èµ–ï¼ˆå¯¹åº”å®¹å™¨ Hadoop ç‰ˆæœ¬ï¼‰ã€‚</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-groovy" data-lang="groovy"><span class="n">compile</span> <span class="nl">group:</span> <span class="s1">&#39;org.apache.hadoop&#39;</span><span class="o">,</span> <span class="nl">name:</span> <span class="s1">&#39;hadoop-common&#39;</span><span class="o">,</span> <span class="nl">version:</span> <span class="s1">&#39;2.7.2&#39;</span>
<span class="n">compile</span> <span class="nl">group:</span> <span class="s1">&#39;org.apache.hadoop&#39;</span><span class="o">,</span> <span class="nl">name:</span> <span class="s1">&#39;hadoop-hdfs&#39;</span><span class="o">,</span> <span class="nl">version:</span> <span class="s1">&#39;2.7.2&#39;</span>
</code></pre></div><h3 id="demo">Demo</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="kn">import</span> <span class="nn">org.apache.commons.io.IOUtils</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.hadoop.conf.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.hadoop.fs.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.junit.Before</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.junit.Test</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.io.FileInputStream</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URI</span><span class="o">;</span>

<span class="cm">/**
</span><span class="cm">* Created by kingcos on 25/03/2017.
</span><span class="cm">*/</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">HDFSOperations</span> <span class="o">{</span>

<span class="n">FileSystem</span> <span class="n">fileSystem</span><span class="o">;</span>

<span class="nd">@Before</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">configure</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
<span class="n">Configuration</span> <span class="n">configuration</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Configuration</span><span class="o">();</span>
<span class="n">configuration</span><span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="s">&#34;fs.defaultFS&#34;</span><span class="o">,</span> <span class="s">&#34;hdfs://192.168.1.120:9000&#34;</span><span class="o">);</span>
<span class="n">fileSystem</span> <span class="o">=</span> <span class="n">FileSystem</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">URI</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="s">&#34;hdfs://192.168.1.120:9000&#34;</span><span class="o">),</span> <span class="n">configuration</span><span class="o">,</span> <span class="s">&#34;root&#34;</span><span class="o">);</span>
<span class="o">}</span>

<span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">listFiles</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
<span class="n">Path</span> <span class="n">path</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Path</span><span class="o">(</span><span class="s">&#34;/&#34;</span><span class="o">);</span>
<span class="n">RemoteIterator</span><span class="o">&lt;</span><span class="n">LocatedFileStatus</span><span class="o">&gt;</span> <span class="n">iterator</span> <span class="o">=</span> <span class="n">fileSystem</span><span class="o">.</span><span class="na">listFiles</span><span class="o">(</span><span class="n">path</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>

<span class="k">while</span> <span class="o">(</span><span class="n">iterator</span><span class="o">.</span><span class="na">hasNext</span><span class="o">())</span> <span class="o">{</span>
<span class="n">LocatedFileStatus</span> <span class="n">status</span> <span class="o">=</span> <span class="n">iterator</span><span class="o">.</span><span class="na">next</span><span class="o">();</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">status</span><span class="o">.</span><span class="na">getPath</span><span class="o">().</span><span class="na">getName</span><span class="o">());</span>
<span class="o">}</span>
<span class="o">}</span>

<span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">rm</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
<span class="n">Path</span> <span class="n">path</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Path</span><span class="o">(</span><span class="s">&#34;/&#34;</span><span class="o">);</span>
<span class="n">fileSystem</span><span class="o">.</span><span class="na">delete</span><span class="o">(</span><span class="n">path</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>
<span class="o">}</span>

<span class="nd">@Test</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">mkdir</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
<span class="n">Path</span> <span class="n">path</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Path</span><span class="o">(</span><span class="s">&#34;/demo&#34;</span><span class="o">);</span>
<span class="n">fileSystem</span><span class="o">.</span><span class="na">mkdirs</span><span class="o">(</span><span class="n">path</span><span class="o">);</span>
<span class="o">}</span>
<span class="o">}</span>
</code></pre></div><ul>
<li>ä¹‹åä¾¿å¯ä»¥é€šè¿‡ IDEA ç›´æ¥å†™ä»£ç æ¥æµ‹è¯•ï¼Œè¿™é‡Œç®€å•å†™äº†å‡ ä¸ªæ–¹æ³•ã€‚</li>
</ul>
<h2 id="æ€»ç»“">æ€»ç»“</h2>
<ul>
<li>åœ¨å†™è¿™ç¯‡æ–‡ç« ä¹‹å‰ï¼Œå…¶å®æˆ‘å¯¹ Docker çš„æ¦‚å¿µå¾ˆä¸äº†è§£ã€‚ä½†æ˜¯é€šè¿‡ Learn by do it. å¤§è‡´çŸ¥é“äº†å…¶ä¸­çš„æ¦‚å¿µå’ŒåŸç†ã€‚æˆ‘ä»¬å®Œå…¨å¯ä»¥æ„å»ºè‡ªå·±çš„å®¹å™¨ Dockerfileï¼Œæ¥éƒ¨ç½²ç”Ÿäº§å’Œå¼€å‘ç¯å¢ƒï¼Œå…¶å¼ºå¤§çš„å¯ç§»æ¤æ€§å¤§å¤§ç¼©çŸ­é…ç½®çš„è¿‡ç¨‹ã€‚</li>
<li>ç”±äºä¸ªäººå¯¹ Hadoop å’Œ Docker çš„äº†è§£ç”šå°‘ï¼Œå¦‚æœ‰é”™è¯¯ï¼Œå¸Œæœ›æŒ‡å‡ºï¼Œæˆ‘ä¼šå­¦ä¹ ã€æ”¹æ­£ã€‚</li>
<li>å¦‚æœæœ‰æ—¶é—´ï¼Œæˆ‘ä¼šå†æŠ˜è…¾ä¸€ä¸‹å…¶ä»–çš„ç©æ³• :]</li>
</ul>
<h2 id="reference">Reference</h2>
<ul>
<li><a href="http://kiwenlau.com/2016/06/12/160612-hadoop-cluster-docker-update/">åŸºäº Docker æ­å»º Hadoop é›†ç¾¤ä¹‹å‡çº§ç‰ˆ</a></li>
</ul>
</div>
                    <div class="post_footer">
                        
                        <div class="meta">
                            <div class="info">
                                <span class="field tags">
                                    <i class="ri-stack-line"></i>
                                    
                                    <a href="https://kingcos.me/tags/practice/">Practice</a>
                                    
                                    <a href="https://kingcos.me/tags/hadoop/">Hadoop</a>
                                    
                                    <a href="https://kingcos.me/tags/docker/">Docker</a>
                                    
                                    <a href="https://kingcos.me/tags/java/">Java</a>
                                    
                                </span>
                            </div>
                        </div>
                        
                    </div>
                </div>
                <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<table style="border: 0;">
  <tr>
  <td style="border: 0; width: 30%;">
    <img width='100%' src='/img/about/1.jpg'>
  </td>
  <td style="border: 0; width: 50%;">
    <center>â† å†™å¾—å¦‚ä½•ï¼Ÿè€ƒè™‘<strong>èµèµ</strong>ä¸€ä¸‹ï¼ŸğŸŒš</center>
    
  </td>
  </tr>
</table>

<hr>

<script>
    (adsbygoogle = window.adsbygoogle || []).push({});
</script>
                
                
                







    
    
    
    <div>
        <div id="github-comment">
        </div>

        <script type="text/javascript">
        function getUtterances(isDark) {
            var utterances = document.createElement('script');
            utterances.type = 'text/javascript';
            utterances.async = true;
            utterances.setAttribute('issue-term', "pathname")
            utterances.setAttribute('repo', "kingcos\/kingcos.github.io")
            utterances.setAttribute('label', "comments")
            isDark ? utterances.setAttribute('theme', "github-dark") : utterances.setAttribute('theme', "github-light")
            utterances.crossorigin = 'anonymous';
            utterances.src = 'https://utteranc.es/client.js';

            return utterances
        }
        document.getElementById('github-comment').appendChild(getUtterances(false))
        </script>
    </div>
    




                
            </div>
        </div>
    </div>
    <a id="back_to_top" href="#" class="back_to_top"><i class="ri-arrow-up-s-line"></i></a>
    <footer class="footer">
    <div class="powered_by">
        <a href="https://kingcos.me">Powered by kingcos with love.</a>
    </div>

    <div class="footer_slogan">
        <span>â¤ï¸</span>
    </div>
</footer>
    <script src="https://kingcos.me/js/jquery-3.5.1.min.js"></script>
<link href="https://kingcos.me/css/fancybox.min.css" rel="stylesheet">
<script src="https://kingcos.me/js/fancybox.min.js"></script>
<script src="https://kingcos.me/js/zozo.js"></script>


<script type="text/javascript" async
    src="https://cdn.bootcss.com/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
        MathJax.Hub.Config({
            tex2jax: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\[\[', '\]\]']],
                processEscapes: true,
                processEnvironments: true,
                skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
                TeX: {
                    equationNumbers: { autoNumber: "AMS" },
                    extensions: ["AMSmath.js", "AMSsymbols.js"]
                }
            }
        });

        MathJax.Hub.Queue(function () {
            
            
            
            var all = MathJax.Hub.getAllJax(), i;
            for (i = 0; i < all.length; i += 1) {
                all[i].SourceElement().parentNode.className += ' has-jax';
            }
        });
    </script>

<style>
    code.has-jax {
        font: inherit;
        font-size: 100%;
        background: inherit;
        border: inherit;
        color: #515151;
    }
</style>



<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-138311951-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

</body>

</html>
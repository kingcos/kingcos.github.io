<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Cache</title>
    <script src="js/echarts.js"></script>
    <link rel="stylesheet" href="css/main.css">
</head>
<body>
<h1>Cache Simulator Demo</h1>
<h3>买明 1415925008</h3>
<hr>

<div>
    <h2>1st Q&A</h2>
    <h2>Cache 命中率（Hit Rate）与其容量大小（Cache Size）的关系</h2>
    <div class="info">
        <strong>Info:</strong>
        <ul>
            <li>Cache Line/Block Size: <em><strong>64 Bytes</strong></em></li>
            <li>CPU: <em><strong>32 bits</strong></em></li>
            <li>Memory Trace File: swim.trace</li>
        </ul>
    </div>
    <div id="cs_1" class="chart" style="width: 800px; height: 400px;"></div>
    <div class="summary">
        <p>以上各组数据均为控制<strong>映射方式（Cache Organization）</strong>、<strong>替换策略（Replacement Policy）</strong>以及<strong>写策略（Writing Policy）</strong>一致，以 <strong>64 Bytes 块容量（Cache Line/Block Size）</strong>为例，表现了 <strong>Cache 命中率（Hit Rate）</strong>随 <strong>Cache 容量（Cache Size）</strong>而递增（但增幅越来越小），趋近但不等于 100%。</p>

        <p class="sum">但是由于 Cache 的工艺复杂，造价昂贵，而且当 Cache 容量到达某一大小时，命中率的增长甚微，因此综合性价比，Cache 容量设定为一定值即可（现代 CPU 也使用多级缓存来提高命中率）。</p>
    </div>
</div>

<hr>

<div>
    <h2>2nd Q&A</h2>
    <h2>Cache 块容量（Cache Line/Block Size）对不命中率（Miss Rate）的影响</h2>
    <div class="info">
        <strong>Info:</strong>
        <ul>
            <li>Cache Size: <em><strong>256 KB</strong></em></li>
            <li>CPU: <em><strong>32 bits</strong></em></li>
            <li>Memory Trace File: gcc.trace</li>
        </ul>
    </div>
    <div id="cs_2" class="chart" style="width: 800px; height: 400px;"></div>
    <div class="summary">
        <p>以上各组数据均为控制<strong>映射方式（Cache Organization）</strong>、<strong>替换策略（Replacement Policy）</strong>以及<strong>写策略（Writing
            Policy）</strong>一致，以 <strong>256 KB Cache 容量（Cache Size）</strong>为例，表现了 <strong>Cache 不命中率（Miss
            Rate）</strong>先随 <strong>Cache 块容量（Cache Size）</strong>而降低，到达某一点时，<strong>Cache 不命中率（Miss Rate）</strong>又开始增长。
        </p>

        <p class="sum">当 Cache 容量一定，块容量增加时，每块可以存放更多的数据，块中的数据的利用率增加，因此不命中率下降。但是当块容量增加到一定程度时，由于块数 = Cache 容量（Cache
            Size）／块大小（Cache Block Size），所以随着块容量增大，块数减少，新的数据可能要覆盖之前已有数据的旧块，在极限情况下，当 Cache
            容量等同于块容量，即块数为一时，每一次进入都可能不命中。因此块容量应选择一个位于中间的临界值。</p>
    </div>
</div>

<hr>

<div>
    <h2>3rd Q&A</h2>
    <h2>替换算法（Replacement Policy）对不命中率（Miss Rate）的影响</h2>
    <div class="info">
        <strong>Info:</strong>
        <ul>
            <li>Cache Size: <em><strong>256 KB</strong></em></li>
            <li>Cache Line/Block Size: <em><strong>16 Bytes</strong></em></li>
            <li>CPU: <em><strong>32 bits</strong></em></li>
            <li>Writing Policy: <em><strong>Write-Through</strong></em></li>
            <li>Memory Trace File: gzip.trace</li>
        </ul>
    </div>
    <div id="cs_3" class="chart" style="width: 800px; height: 400px;"></div>
    <div class="summary">
        <p>通过以上数据，可以得出替换算法（Replacement Policy）对不命中率（Miss Rate）的影响。当其他条件一致时，FIFO 算法的不命中率（Miss Rate）最高，其次为 LRU 和 Random 算法。</p>

        <p class="sum"></p>
    </div>
</div>

<hr>

<div class="tips">
    <strong>单位（Unit）</strong><br>
    位 bit b<br>
    字节 byte B<br>
    字 word W<br>
    字长 word size/length<br>
    CPU 一次并行处理的二进制位数（通常为 32/64 位）<br>
    32 位 CPU：1 Word = 4 Bytes = 32 bits<br>
    64 位 CPU：1 Word = 8 Bytes = 64 bits<br>
    <br>
    <strong>地址的三个域</strong><br>
    设块大小（Cache Block Size）为 B，Cache 组数（Cache Sets）为 S<br>
    块数 = Cache 容量（Cache Size）／块大小（Cache Block Size）<br>
    Cache 组数（Cache Sets） = 块数（Cache Blocks）／路数（Way）<br>
    tag = 地址总位数（单位为 bits） - index - offset bits<br>
    index = log2S bits（全相联(full-associative)时，组数(Cache Sets)为0）<br>
    offset = log2B bits（B 单位为 Byte）<br>
    PS: Cache Block 与 Cache Line 同义<br>
</div>

<hr>

<div class="info">
    <h3>Reference</h3>
    <ul>
        <li><a href="www.ccs.neu.edu/course/com3200/parent/NOTES/cache-basics.html">Cache Basics by Gene Cooperman</a></li>
        <li><a href="https://cseweb.ucsd.edu/classes/su07/cse141/cache-handout.pdf">The Basics of Caches Sat Garcia (sat@cs)</a></li>
        <li><a href="stackoverflow.com/questions/15327615/cache-set-and-tag">Cache set and tag</a></li>
    </ul>
</div>

<script type="text/javascript" src="js/cache.js"></script>
<footer>
    <hr>
    Powered by <a href="https://maimieng.com" target="_blank">https://maimieng.com</a>
</footer>
</body>
</html>
<!DOCTYPE html>
<html>

<head>
    <title>叭叭</title>
    <meta http-equiv="content-type" content="txt/html; charset=utf-8" />
    <meta content="width=device-width,user-scalable=no" name="viewport" />

    <!-- Google Analytics -->
    <script>
        (function (i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date(); a = s.createElement(o),
                m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
        })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-138311951-1', 'auto');
        ga('send', 'pageview');
    </script>
    <!-- End Google Analytics -->
</head>
<style>
    body {
        font-family: 'Hiragino Sans GB', 'SFMono', 'Lato', '-apple-system';
    }

    p {
        text-align: center;
    }

    input {
        border-bottom: 1px solid #000;
        border-top: 0px;
        border-left: 0px;
        border-right: 0px;
        height: 30px;
        font-size: 28px;
        margin-right: 10px;
        max-width: 80%;
    }

    button {
        font-size: 22px;
        font-weight: bold;
        border-radius: 10px;
        text-align: center;
        vertical-align: middle;
        border: 1px solid transparent;
        font-weight: 900;
        padding: 5px;
    }

    .main_body {
        margin-top: 20px;
        border-radius: 25px;
        border: 2px solid #a02cfe;
        padding: 10px;
        margin-left: 10px;
        margin-right: 10px;
        display: flex;
        flex-direction: column;
        align-items: center;
    }

    .operation_container {
        display: flex;
        justify-content: center;
        align-items: center;
        max-width: 90%;
    }

    .copy_button {
        background-color: #dc8de4;
        color: cornsilk;
        height: 40px;
        margin-top: 10px;
        font-size: medium;
    }

    #try_button {
        background-color: #f2a0fb;
        color: cornsilk;
        height: 40px;
        margin-top: 10px;
        font-size: medium;
    }
    
    .footer {
        font-size: small;
        /* height: 200px; */

        border-radius: 25px;
        border: 2px solid #7d00bc;
        padding: 10px;
        margin: 10px;
    }

    #content_container {
        border-radius: 25px;
        /* background-color: rgba(213, 98, 231, 0.84); */
        /* padding: 20px; */
        width: 90%;
        display: none;
        flex-direction: column;
        justify-content: center;
        align-items: center;
    }

    #tags {
        width: 100%;
        margin-bottom: 10px;
        /* background-color: yellow; */
    }

    .tag {
        background-color: #ddb2e2;
        border-radius: 5px;
        line-height: 1rem;
        font-size: 0.6rem;
        padding: 2px;
        margin-right: 5px;
        margin-bottom: 2px;
    }

    textarea {
        border: none;
        border-radius: 25px;
        background-color: rgba(213, 98, 231, 0.84);
        padding: 15px;
        width: 100%;
        height: 150px;
        font-size: medium;
        resize: none;
    }

    /* body {
        background-image:url(
            "data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' height='120px' width='120px'><text x='10' y='25' font-size='18' transform='rotate(45)'>我真的会谢</text></svg>"
        );
    } */

    /* .bgtext {
    position: relative;
    } */

    .main_body:after {
    content: "";
    font-size: 26px;
    padding: 2px;
    background-color: #ddb2e2;
    color: rgba(59, 59, 59, 0.6);
    position: fixed;
    width: 250%;
    top: -300px;
    /* left: -150px; */
    z-index: -1;
    transform: rotate(45deg);
    /* transform-origin: 100%; */
    }

</style>

<body>
    <!-- <div class="bgtext"> -->
    <div class="main_body">
        <h1>
            叭叭
        </h1>
        <div>
            <!-- 喇叭图 -->
        </div>

        <div id="tags">
            候选词：<br>
            <span>我真的栓 Q</span>
            <span>你没事儿吧</span>
        </div>

        <div class="operation_container">
            <input id="keyword_input" oninput="inputKeyword(event)"></input>
        </div>
        <p style="font-size: small;">
            <span style="font-size: xx-small;">浏览器输入 kingcos.me/baba 即可直达</span>
        </p>

        <div id="content_container">
            <textarea id="generate_content"></textarea>
            <!-- <div id="generate_content">
            </div> -->
            <div>
                <button id="try_button" onclick="trySomething(event)">点我试试</button>
                <button class="copy_button" data-clipboard-action="copy"
                    data-clipboard-target="#generate_content">点我复制</button>
            </div>

            <!-- Clipboard.js -->
            <script>
                !function (e) { if ("object" == typeof exports && "undefined" != typeof module) module.exports = e(); else if ("function" == typeof define && define.amd) define([], e); else { var t; t = "undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self ? self : this, t.Clipboard = e() } }(function () { var e, t, n; return function e(t, n, o) { function i(a, c) { if (!n[a]) { if (!t[a]) { var l = "function" == typeof require && require; if (!c && l) return l(a, !0); if (r) return r(a, !0); var u = new Error("Cannot find module '" + a + "'"); throw u.code = "MODULE_NOT_FOUND", u } var s = n[a] = { exports: {} }; t[a][0].call(s.exports, function (e) { var n = t[a][1][e]; return i(n ? n : e) }, s, s.exports, e, t, n, o) } return n[a].exports } for (var r = "function" == typeof require && require, a = 0; a < o.length; a++)i(o[a]); return i }({ 1: [function (e, t, n) { function o(e, t) { for (; e && e.nodeType !== i;) { if (e.matches(t)) return e; e = e.parentNode } } var i = 9; if ("undefined" != typeof Element && !Element.prototype.matches) { var r = Element.prototype; r.matches = r.matchesSelector || r.mozMatchesSelector || r.msMatchesSelector || r.oMatchesSelector || r.webkitMatchesSelector } t.exports = o }, {}], 2: [function (e, t, n) { function o(e, t, n, o, r) { var a = i.apply(this, arguments); return e.addEventListener(n, a, r), { destroy: function () { e.removeEventListener(n, a, r) } } } function i(e, t, n, o) { return function (n) { n.delegateTarget = r(n.target, t), n.delegateTarget && o.call(e, n) } } var r = e("./closest"); t.exports = o }, { "./closest": 1 }], 3: [function (e, t, n) { n.node = function (e) { return void 0 !== e && e instanceof HTMLElement && 1 === e.nodeType }, n.nodeList = function (e) { var t = Object.prototype.toString.call(e); return void 0 !== e && ("[object NodeList]" === t || "[object HTMLCollection]" === t) && "length" in e && (0 === e.length || n.node(e[0])) }, n.string = function (e) { return "string" == typeof e || e instanceof String }, n.fn = function (e) { var t = Object.prototype.toString.call(e); return "[object Function]" === t } }, {}], 4: [function (e, t, n) { function o(e, t, n) { if (!e && !t && !n) throw new Error("Missing required arguments"); if (!c.string(t)) throw new TypeError("Second argument must be a String"); if (!c.fn(n)) throw new TypeError("Third argument must be a Function"); if (c.node(e)) return i(e, t, n); if (c.nodeList(e)) return r(e, t, n); if (c.string(e)) return a(e, t, n); throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList") } function i(e, t, n) { return e.addEventListener(t, n), { destroy: function () { e.removeEventListener(t, n) } } } function r(e, t, n) { return Array.prototype.forEach.call(e, function (e) { e.addEventListener(t, n) }), { destroy: function () { Array.prototype.forEach.call(e, function (e) { e.removeEventListener(t, n) }) } } } function a(e, t, n) { return l(document.body, e, t, n) } var c = e("./is"), l = e("delegate"); t.exports = o }, { "./is": 3, delegate: 2 }], 5: [function (e, t, n) { function o(e) { var t; if ("SELECT" === e.nodeName) e.focus(), t = e.value; else if ("INPUT" === e.nodeName || "TEXTAREA" === e.nodeName) { var n = e.hasAttribute("readonly"); n || e.setAttribute("readonly", ""), e.select(), e.setSelectionRange(0, e.value.length), n || e.removeAttribute("readonly"), t = e.value } else { e.hasAttribute("contenteditable") && e.focus(); var o = window.getSelection(), i = document.createRange(); i.selectNodeContents(e), o.removeAllRanges(), o.addRange(i), t = o.toString() } return t } t.exports = o }, {}], 6: [function (e, t, n) { function o() { } o.prototype = { on: function (e, t, n) { var o = this.e || (this.e = {}); return (o[e] || (o[e] = [])).push({ fn: t, ctx: n }), this }, once: function (e, t, n) { function o() { i.off(e, o), t.apply(n, arguments) } var i = this; return o._ = t, this.on(e, o, n) }, emit: function (e) { var t = [].slice.call(arguments, 1), n = ((this.e || (this.e = {}))[e] || []).slice(), o = 0, i = n.length; for (o; o < i; o++)n[o].fn.apply(n[o].ctx, t); return this }, off: function (e, t) { var n = this.e || (this.e = {}), o = n[e], i = []; if (o && t) for (var r = 0, a = o.length; r < a; r++)o[r].fn !== t && o[r].fn._ !== t && i.push(o[r]); return i.length ? n[e] = i : delete n[e], this } }, t.exports = o }, {}], 7: [function (t, n, o) { !function (i, r) { if ("function" == typeof e && e.amd) e(["module", "select"], r); else if ("undefined" != typeof o) r(n, t("select")); else { var a = { exports: {} }; r(a, i.select), i.clipboardAction = a.exports } }(this, function (e, t) { "use strict"; function n(e) { return e && e.__esModule ? e : { default: e } } function o(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") } var i = n(t), r = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) { return typeof e } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e }, a = function () { function e(e, t) { for (var n = 0; n < t.length; n++) { var o = t[n]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, o.key, o) } } return function (t, n, o) { return n && e(t.prototype, n), o && e(t, o), t } }(), c = function () { function e(t) { o(this, e), this.resolveOptions(t), this.initSelection() } return a(e, [{ key: "resolveOptions", value: function e() { var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}; this.action = t.action, this.emitter = t.emitter, this.target = t.target, this.text = t.text, this.trigger = t.trigger, this.selectedText = "" } }, { key: "initSelection", value: function e() { this.text ? this.selectFake() : this.target && this.selectTarget() } }, { key: "selectFake", value: function e() { var t = this, n = "rtl" == document.documentElement.getAttribute("dir"); this.removeFake(), this.fakeHandlerCallback = function () { return t.removeFake() }, this.fakeHandler = document.body.addEventListener("click", this.fakeHandlerCallback) || !0, this.fakeElem = document.createElement("textarea"), this.fakeElem.style.fontSize = "12pt", this.fakeElem.style.border = "0", this.fakeElem.style.padding = "0", this.fakeElem.style.margin = "0", this.fakeElem.style.position = "absolute", this.fakeElem.style[n ? "right" : "left"] = "-9999px"; var o = window.pageYOffset || document.documentElement.scrollTop; this.fakeElem.style.top = o + "px", this.fakeElem.setAttribute("readonly", ""), this.fakeElem.value = this.text, document.body.appendChild(this.fakeElem), this.selectedText = (0, i.default)(this.fakeElem), this.copyText() } }, { key: "removeFake", value: function e() { this.fakeHandler && (document.body.removeEventListener("click", this.fakeHandlerCallback), this.fakeHandler = null, this.fakeHandlerCallback = null), this.fakeElem && (document.body.removeChild(this.fakeElem), this.fakeElem = null) } }, { key: "selectTarget", value: function e() { this.selectedText = (0, i.default)(this.target), this.copyText() } }, { key: "copyText", value: function e() { var t = void 0; try { t = document.execCommand(this.action) } catch (e) { t = !1 } this.handleResult(t) } }, { key: "handleResult", value: function e(t) { this.emitter.emit(t ? "success" : "error", { action: this.action, text: this.selectedText, trigger: this.trigger, clearSelection: this.clearSelection.bind(this) }) } }, { key: "clearSelection", value: function e() { this.target && this.target.blur(), window.getSelection().removeAllRanges() } }, { key: "destroy", value: function e() { this.removeFake() } }, { key: "action", set: function e() { var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "copy"; if (this._action = t, "copy" !== this._action && "cut" !== this._action) throw new Error('Invalid "action" value, use either "copy" or "cut"') }, get: function e() { return this._action } }, { key: "target", set: function e(t) { if (void 0 !== t) { if (!t || "object" !== ("undefined" == typeof t ? "undefined" : r(t)) || 1 !== t.nodeType) throw new Error('Invalid "target" value, use a valid Element'); if ("copy" === this.action && t.hasAttribute("disabled")) throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute'); if ("cut" === this.action && (t.hasAttribute("readonly") || t.hasAttribute("disabled"))) throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes'); this._target = t } }, get: function e() { return this._target } }]), e }(); e.exports = c }) }, { select: 5 }], 8: [function (t, n, o) { !function (i, r) { if ("function" == typeof e && e.amd) e(["module", "./clipboard-action", "tiny-emitter", "good-listener"], r); else if ("undefined" != typeof o) r(n, t("./clipboard-action"), t("tiny-emitter"), t("good-listener")); else { var a = { exports: {} }; r(a, i.clipboardAction, i.tinyEmitter, i.goodListener), i.clipboard = a.exports } }(this, function (e, t, n, o) { "use strict"; function i(e) { return e && e.__esModule ? e : { default: e } } function r(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") } function a(e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t } function c(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t); e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) } function l(e, t) { var n = "data-clipboard-" + e; if (t.hasAttribute(n)) return t.getAttribute(n) } var u = i(t), s = i(n), f = i(o), d = function () { function e(e, t) { for (var n = 0; n < t.length; n++) { var o = t[n]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, o.key, o) } } return function (t, n, o) { return n && e(t.prototype, n), o && e(t, o), t } }(), h = function (e) { function t(e, n) { r(this, t); var o = a(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return o.resolveOptions(n), o.listenClick(e), o } return c(t, e), d(t, [{ key: "resolveOptions", value: function e() { var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}; this.action = "function" == typeof t.action ? t.action : this.defaultAction, this.target = "function" == typeof t.target ? t.target : this.defaultTarget, this.text = "function" == typeof t.text ? t.text : this.defaultText } }, { key: "listenClick", value: function e(t) { var n = this; this.listener = (0, f.default)(t, "click", function (e) { return n.onClick(e) }) } }, { key: "onClick", value: function e(t) { var n = t.delegateTarget || t.currentTarget; this.clipboardAction && (this.clipboardAction = null), this.clipboardAction = new u.default({ action: this.action(n), target: this.target(n), text: this.text(n), trigger: n, emitter: this }) } }, { key: "defaultAction", value: function e(t) { return l("action", t) } }, { key: "defaultTarget", value: function e(t) { var n = l("target", t); if (n) return document.querySelector(n) } }, { key: "defaultText", value: function e(t) { return l("text", t) } }, { key: "destroy", value: function e() { this.listener.destroy(), this.clipboardAction && (this.clipboardAction.destroy(), this.clipboardAction = null) } }], [{ key: "isSupported", value: function e() { var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : ["copy", "cut"], n = "string" == typeof t ? [t] : t, o = !!document.queryCommandSupported; return n.forEach(function (e) { o = o && !!document.queryCommandSupported(e) }), o } }]), t }(s.default); e.exports = h }) }, { "./clipboard-action": 7, "good-listener": 4, "tiny-emitter": 6 }] }, {}, [8])(8) });
            </script>
            <script>
                var clipboard = new Clipboard('.copy_button');

                clipboard.on('success', function (e) {
                    console.log(e);
                });

                clipboard.on('error', function (e) {
                    console.log(e);
                });
            </script>

        </div>
    </div>
    <div class="footer">
        Powered by <a href="https://github.com/kingcos">kingcos</a> with ❤️
        <br>
        👉 欢迎来 <a href="https://weibo.com/u/1798410923">我的微博</a> 点赞/吐槽
        <br>
        <li>公众号：微信搜索「萌面大道」</li>
        <li>博客：<a href="https://kingcos.me">kingcos.me</a></li>
        <li>友情链接：<a href="https://kingcos.me/jjz">绝绝子生成器</a></li>

        <br>
        开源组件使用情况：
        <br>
        <li>基于 <a href="https://github.com/zenorocha/clipboard.js">zenorocha/clipboard.js</a> 提供复制功能；</li>
        <br>
        本网页除三方统计 SDK 外无任何获取您的信息的行为；本网页不产生任何内容、不带任何立场，仅供娱乐，请大家合理使用。
    </div>
    <div style="border-radius: 25px; 
    border: 2px solid #4b0346; margin: 10px;padding: 10px;">

        <table style="border: 0;">
            <tr>
                <td style="border: 0; width: 30%;">
                    <img width="100%" src='../img/about/1.jpg'>
                </td>
                <td style="border: 0; width: 50%;">
                    <!-- <center>← 写得如何？考虑<strong>赞赏</strong>一下？🌚</center> -->
                    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
                    <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9925978992661955"
                        data-ad-slot="5464406757" data-ad-format="auto" data-full-width-responsive="true"></ins>
                    <script>
                        (adsbygoogle = window.adsbygoogle || []).push({});
                    </script>
                </td>
            </tr>
        </table>

        <!-- 
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9925978992661955"
        data-ad-slot="5464406757" data-ad-format="auto" data-full-width-responsive="true"></ins>
<script>
    (adsbygoogle = window.adsbygoogle || []).push({});
</script> -->
    </div>
    <!-- </div> -->

</body>
<script>
    function inputKeyword(e) {
        var input = document.getElementById("keyword_input")
        console.log(input.value)
        
        var container = document.getElementById('content_container');
        container.style.display = 'flex';
        if (container.firstElementChild != null) {
            var word = repeatWords(input.value);
            container.firstElementChild.innerHTML = word;
            setupBackground(word);
            if (word == '') {
               container.style.display = 'none';
            }

            // container.firstElementChild.innerHTML = repeatWords(input.value);
        }
    }

    function repeatWords(word, count = 20) {
        if (word == '') {
            return '';
        }

        var maxLength = 200
        if (maxLength / word.length > count) {
            count = maxLength / word.length
        }
        var result = "";
        for (var i = 0; i < count; i++) {
            result += word;
        }
        return result;
    }

    function defaultWords() {
        return ["退🤺！", "困死我了", "睡大觉", "俺也一样", "我真的会谢", "我真的拴Q🙏", "谁说不是呢", "笑死我了", "救命🆘", "你没事儿吧？"]
    }

    function randomWord() {
        var input = document.getElementById("keyword_input");
        input.value = defaultWords()[Math.floor(Math.random() * defaultWords().length)];
        return input.value
    }

    function setWords() {
        var tags = document.getElementById("tags");
        var elements = "<span class='tag'>点我快捷选词喔</span>"
        for (var i = 0; i < defaultWords().length; i++) {
            elements += "<span class='tag' onclick='setupWord(event)'>" + defaultWords()[i] + "</span>"
        }
        tags.innerHTML = elements;
    }

    function setupWord(e) {
        var input = document.getElementById("keyword_input");
        input.value = e.target.innerHTML;
        inputKeyword();
    }

    function setupBackground(word) {
        function ruleSelector(selector) {
            function uni(selector) {
                return selector.replace(/::/g, ':')
            }
            return Array.prototype.filter.call(Array.prototype.concat.apply([], Array.prototype.map.call(document.styleSheets, function(x) {
                return Array.prototype.slice.call(x.cssRules);
            })), function(x) {
                return uni(x.selectorText) === uni(selector);
            });
        }

        var pseudo = ruleSelector(".main_body::after").slice(-1);
        const max = 2000

        var bg = ""

        if (word == '') {
            bg = '""'
        } else {
            for (var i = 0; i < max / word.length; i++) {
                bg += word + " "
            }
        }

        var isOn = localStorage.getItem('isOn')

        pseudo.forEach(function(rule) {
            if (!+isOn) {
                rule.style.content = '""';
                // rule.style.backgroundColor = '#fff';
            } else {
                rule.style.content = "\"" + bg + "\"";
            }
        });
    }

    function loadSwitch() {
        var isOn = localStorage.getItem('isOn')
        var tryButton = document.getElementById("try_button")
        tryButton.innerText = +isOn ? "已开启背景，点我关闭" : "点我试试";
    }

    function trySomething() {
        var isOn = localStorage.getItem('isOn');
        var newValue = +isOn ? 0 : 1;
        localStorage.setItem('isOn', newValue);

        var input = document.getElementById("keyword_input");

        loadSwitch();
        setupBackground(input.value);
    }

    var word = randomWord();
    inputKeyword();
    setWords();

    loadSwitch();
    setupBackground(word);

</script>
</html>
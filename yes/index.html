<!DOCTYPE html>
<html>
    <head>
        <title>椰树风 🥥</title>
        <meta http-equiv="content-type" content="txt/html; charset=utf-8" />
        <meta content="width=device-width,user-scalable=no" name="viewport" />
    </head>

    <style>

body {
            font-family: 'Hiragino Sans GB', 'SFMono', 'Lato', '-apple-system';
            background-color: black;
        }
        .container {
            /* border: 2px solid #73AD21;
            border-radius: 25px; */
            /* margin: 20px; */
            padding: 10px;
            /* height: 200px; */
            color: aliceblue;

            /* display: flex; */
            /* flex-direction: column; */
            font-weight: 600;
            word-break: break-all;
            
            font-size: 64px;
            /* max-width: 10ch; */
        }

        .block1 {
            border: 3px solid #73AD21;
            border-radius: 10px;
            padding: 5px;
            margin-right: 5px;
            /* line-height: 50px; */
            
            /* border-collapse: collapse; */
           
        }
        
        .block2 {
            border: 3px solid yellow;
            border-radius: 10px;
            padding: 5px;
            background-color: red;
            margin-right: 5px;
        }
        
        .block3 {
            border: 3px solid yellow;
            border-radius: 10px;
            padding: 5px;
            background-color: blue;
            margin-right: 5px;
           
        }
        .block4 {
            /* border: 2px solid #73AD21; */
            border-radius: 10px;
            padding: 5px;
            margin-right: 5px;
           
        }
        .block5 {
            border: 3px solid red;
            border-radius: 10px;
            padding: 5px;
            margin-right: 5px;
           
        }
        .block6 {
            border: 3px solid #73AD21;
            border-radius: 10px;
            padding: 5px;
            background-color: yellow;
            color: black;
            margin-right: 5px;
        }
    </style>

    <body>
        <div class="container" id="container">
            <!-- <span class="block1">00000 00000 00000 00000 00000 00000 00000 00000 00000 00000 00000 00000</span> -->
            <span class="block1">这是一个测试🌹</span>
            <span class="block2">#椰树牌</span>
            <span class="block3">哈哈哈</span>
            <span class="block4">Hello World</span>
            <span class="block5">绝绝子 X 椰树风</span>
            <span class="block6">我真的栓 Q 🙏</span>
        </div>
        <canvas id="canvas"></canvas>
    </body>
    <script>
        function generateSentences() {
	return [
  	"这是一个测试🌹",
    "椰树牌",
    "哈哈哈",
    "Hello World",
    "绝绝子 X 椰树风",
    "我真的栓 Q 🙏"
  ]
}

	
getFontSize = function(text, targetWidth, font) { 	
	// https://stackoverflow.com/questions/51032611/find-font-size-to-fit-text-into-a-specific-width-using-pure-js
  const canvas = document.getElementById('canvas');
  const ctx = canvas.getContext('2d');
  var size = 1; 	
  ctx.font = size + 'px ' + font; 	 
  while(ctx.measureText(text).width < targetWidth) { 		
    size++; 		
    ctx.font = size + 'px ' + font; 	
  } 	 	
  return size; 
}

function calculateFontSize() {
	// 一行最多展示 10-12 个字
 	const MaxCharactersInOneLine = 10
  
  // 屏幕宽度
  const screenWidth = window.innerWidth
  
  // 计算出的字体大小
  let targetWidth = screenWidth - 20*2 - 20*2
  return getFontSize("你好我是绝绝子椰树呀", targetWidth, 'SFMono')
  
}

function setupFontSize(size) {
	document.getElementById('container').style.fontSize = size + 'px'
    // let lineHeight = (size > 50 ? size * 1.5 : size * 1.8) + 'px'
    // let lineHeight = (size * 0.8 < 30 ? size + 30 : size * 1.8) + 'px'
    // let lineHeight = size * 1.8 + 'px'

    let lineHeight = size * 1.5
    if (size < 50) {
        // 太小
        lineHeight = size * 2
    } else if (size > 100) {
        // 太大
        lineHeight = size * 1.5
    }

	document.getElementById('container').style.lineHeight = lineHeight + 'px'
    Array.from(document.getElementsByTagName('span')).map(item => {
        item.style.borderRadius = size/3 + 'px'
        item.style.borderWidth = size/10 + 'px'
    })
    // line-height:
  console.log(size)
}


setupFontSize(calculateFontSize())

window.onresize = function(res){
	setupFontSize(calculateFontSize())
}
    </script>
</html>